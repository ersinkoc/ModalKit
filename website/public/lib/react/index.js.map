{"version":3,"sources":["../../src/core/config.ts","../../src/utils/events.ts","../../src/core/state.ts","../../src/core/stack.ts","../../src/utils/focus.ts","../../src/features/focus-trap.ts","../../src/utils/dom.ts","../../src/features/scroll-lock.ts","../../src/features/animation.ts","../../src/features/keyboard.ts","../../src/features/portal.ts","../../src/utils/id.ts","../../src/core/modal.ts","../../src/adapters/react/context.tsx","../../src/adapters/react/hooks/useModal.ts","../../src/dialogs/base.ts","../../src/dialogs/confirm.ts","../../src/adapters/react/hooks/useConfirm.ts","../../src/dialogs/alert.ts","../../src/adapters/react/hooks/useAlert.ts","../../src/dialogs/prompt.ts","../../src/adapters/react/hooks/usePrompt.ts","../../src/adapters/react/components/Modal.tsx","../../src/adapters/react/components/ModalTrigger.tsx","../../src/adapters/react/components/ModalPortal.tsx","../../src/adapters/react/components/ModalOverlay.tsx","../../src/adapters/react/components/ModalContainer.tsx","../../src/adapters/react/components/ModalContent.tsx","../../src/adapters/react/components/ModalHeader.tsx","../../src/adapters/react/components/ModalTitle.tsx","../../src/adapters/react/components/ModalDescription.tsx","../../src/adapters/react/components/ModalBody.tsx","../../src/adapters/react/components/ModalFooter.tsx","../../src/adapters/react/components/ModalClose.tsx","../../src/adapters/react/components/ConfirmDialog.tsx","../../src/adapters/react/components/AlertDialog.tsx","../../src/adapters/react/components/PromptDialog.tsx","../../src/adapters/react/imperative/modals.ts"],"names":["DEFAULT_CONFIG","mergeConfig","config","createEventEmitter","listeners","on","event","handler","off","handlers","emit","args","error","clear","createSubscriptionManager","subscribers","subscribe","callback","notify","value","createInitialState","defaultOpen","createStateManager","initialState","state","getState","setState","partial","prevState","hasStateChanged","prev","next","shouldBeMounted","open","animationState","BASE_Z_INDEX","Z_INDEX_INCREMENT","calculateZIndex","stackOrder","createModalStack","stack","events","updateStackState","modal","index","order","isTopMost","push","remove","count","isEmpty","getAll","getTopMost","getByOrder","closeAll","closeTopMost","topMost","modalStack","stackInternal","FOCUSABLE_SELECTOR","isVisible","element","style","isFocusable","getFocusableElements","container","elements","getFirstFocusable","getLastFocusable","focusables","getActiveElement","doc","activeElement","focusElement","options","savedFocus","saveFocus","restoreFocus","preventScroll","scrollX","scrollY","createFocusTrap","initialFocus","fallbackFocus","returnFocus","escapeDeactivates","clickOutsideDeactivates","allowOutsideClick","onActivate","onDeactivate","active","paused","focusing","resolveElement","ref","handleKeyDown","firstFocusable","lastFocusable","handleEscapeKey","deactivate","handleClick","target","handleFocusIn","activate","initialElement","fallbackElement","elementToFocus","returnElement","pause","unpause","isActive","isPaused","getElement","createPortalContainer","id","removeElement","getScrollbarWidth","outer","inner","scrollbarWidth","contains","parent","child","lockCount","originalStyles","isIOS","getScrollPosition","scrollPosition","lock","hasScrollbar","currentPadding","unlock","isLocked","scrollLock","createAnimationController","duration","onStateChange","onAnimationStart","onAnimationEnd","timerId","clearTimer","newState","startEnter","startExit","skipTo","targetState","isAnimating","destroy","createNoopAnimationController","isEscapeKey","createKeyboardHandler","closeOnEscape","onEscapeKeyDown","onClose","DEFAULT_PORTAL_ID","getPortalContainer","counter","generateId","prefix","createModalIds","baseId","createModal","userConfig","ids","initialOpen","stateManager","animationController","focusTrap","contentElement","overlayElement","containerElement","close","setupFocusTrap","teardownFocusTrap","activateFocusTrap","handleOpen","handleClose","finalFocus","handleOverlayClick","e","isOpen","isMounted","toggle","getStackOrder","getAnimationState","focusFirst","first","focusLast","last","getPortalTarget","getPortalProps","getOverlayProps","zIndex","el","getContainerProps","scrollBehavior","getContentProps","props","wasNull","getTitleProps","customId","getDescriptionProps","getCloseButtonProps","getTriggerProps","getConfig","setConfig","newConfig","isTop","ModalContext","createContext","useModalContext","context","useContext","idCounter","generateModalId","ModalProvider","children","modals","useState","setUpdateCounter","forceUpdate","useCallback","c","openModal","content","title","size","modalConfig","closeModal","managed","useMemo","managedModalElements","portalProps","overlayProps","containerProps","contentProps","renderedContent","jsx","jsxs","useModal","modalRef","useRef","configRef","useEffect","configString","createDialogElements","portal","overlay","createDialogModal","customConfig","styleButton","button","variant","createTitleElement","titleProps","titleEl","createMessageElement","message","descProps","messageEl","createButtonContainer","DEFAULT_OPTIONS","confirm","messageOrOptions","resolve","confirmText","cancelText","closeOnOverlayClick","buttons","resolved","cleanup","buttonContainer","buttonsToRender","autoFocusButton","btnConfig","useConfirm","getButtonVariant","alertVariant","alert","confirmButton","useAlert","prompt","placeholder","defaultValue","type","validate","required","minLength","maxLength","inputContainer","input","errorEl","validateInput","showError","clearError","handleSubmit","validationResult","cancelButton","usePrompt","ModalComponentContext","useModalComponentContext","Modal","onOpenChange","prevConfigRef","ModalTrigger","asChild","className","triggerProps","isValidElement","cloneElement","ModalPortal","portalTarget","createPortal","ModalOverlay","forwardRef","forwardedRef","ModalContainer","position","alignItems","paddingTop","SIZE_MAP","ModalContent","role","ariaLabel","ModalHeader","ModalTitle","ModalDescription","ModalBody","ModalFooter","ModalClose","closeProps","VARIANT_STYLES","ConfirmDialog","description","onConfirm","onCancel","AlertDialog","PromptDialog","setValue","setError","inputRef","result","handleConfirm"],"mappings":"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","file":"index.js","sourcesContent":["/**\r\n * Default configuration and config utilities for ModalKit\r\n */\r\n\r\nimport type { ModalConfig } from '../types'\r\n\r\n/**\r\n * Default modal configuration\r\n */\r\nexport const DEFAULT_CONFIG: Required<\r\n  Omit<\r\n    ModalConfig,\r\n    | 'open'\r\n    | 'initialFocusRef'\r\n    | 'finalFocusRef'\r\n    | 'portalTarget'\r\n    | 'id'\r\n    | 'ariaLabel'\r\n    | 'ariaLabelledBy'\r\n    | 'ariaDescribedBy'\r\n    | 'onOpen'\r\n    | 'onClose'\r\n    | 'onOpenChange'\r\n    | 'onAnimationStart'\r\n    | 'onAnimationEnd'\r\n    | 'onEscapeKeyDown'\r\n    | 'onOverlayClick'\r\n  >\r\n> = {\r\n  defaultOpen: false,\r\n  closeOnOverlayClick: true,\r\n  closeOnEscape: true,\r\n  preventScroll: true,\r\n  scrollBehavior: 'inside',\r\n  trapFocus: true,\r\n  autoFocus: true,\r\n  restoreFocus: true,\r\n  stackable: true,\r\n  closeOnStackedOpen: false,\r\n  animated: false,\r\n  animationDuration: 200,\r\n  disablePortal: false,\r\n  role: 'dialog',\r\n}\r\n\r\n/**\r\n * Merge user config with defaults\r\n */\r\nexport function mergeConfig(config?: ModalConfig): ModalConfig {\r\n  if (!config) return { ...DEFAULT_CONFIG }\r\n\r\n  return {\r\n    ...DEFAULT_CONFIG,\r\n    ...config,\r\n  }\r\n}\r\n\r\n/**\r\n * Get a resolved config value\r\n */\r\nexport function getConfigValue<K extends keyof ModalConfig>(\r\n  config: ModalConfig,\r\n  key: K,\r\n  defaultValue: NonNullable<ModalConfig[K]>\r\n): NonNullable<ModalConfig[K]> {\r\n  const value = config[key]\r\n  return value !== undefined ? (value as NonNullable<ModalConfig[K]>) : defaultValue\r\n}\r\n","/**\r\n * Event emitter utilities for ModalKit\r\n */\r\n\r\nimport type { EventEmitter } from '../types'\r\n\r\n/**\r\n * Create a typed event emitter\r\n */\r\nexport function createEventEmitter<\r\n  T extends Record<string, unknown[]>\r\n>(): EventEmitter<T> {\r\n  const listeners = new Map<keyof T, Set<Function>>()\r\n\r\n  function on<K extends keyof T>(\r\n    event: K,\r\n    handler: (...args: T[K]) => void\r\n  ): () => void {\r\n    if (!listeners.has(event)) {\r\n      listeners.set(event, new Set())\r\n    }\r\n    listeners.get(event)!.add(handler)\r\n\r\n    // Return unsubscribe function\r\n    return () => off(event, handler)\r\n  }\r\n\r\n  function off<K extends keyof T>(\r\n    event: K,\r\n    handler: (...args: T[K]) => void\r\n  ): void {\r\n    const handlers = listeners.get(event)\r\n    if (handlers) {\r\n      handlers.delete(handler)\r\n      if (handlers.size === 0) {\r\n        listeners.delete(event)\r\n      }\r\n    }\r\n  }\r\n\r\n  function emit<K extends keyof T>(event: K, ...args: T[K]): void {\r\n    const handlers = listeners.get(event)\r\n    if (handlers) {\r\n      handlers.forEach((handler) => {\r\n        try {\r\n          handler(...args)\r\n        } catch (error) {\r\n          console.error(`Error in event handler for \"${String(event)}\":`, error)\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  function clear(): void {\r\n    listeners.clear()\r\n  }\r\n\r\n  return { on, off, emit, clear }\r\n}\r\n\r\n/**\r\n * Create a simple subscription manager for state changes\r\n */\r\nexport function createSubscriptionManager<T>(): {\r\n  subscribe: (callback: (value: T) => void) => () => void\r\n  notify: (value: T) => void\r\n  clear: () => void\r\n} {\r\n  const subscribers = new Set<(value: T) => void>()\r\n\r\n  function subscribe(callback: (value: T) => void): () => void {\r\n    subscribers.add(callback)\r\n    return () => {\r\n      subscribers.delete(callback)\r\n    }\r\n  }\r\n\r\n  function notify(value: T): void {\r\n    subscribers.forEach((callback) => {\r\n      try {\r\n        callback(value)\r\n      } catch (error) {\r\n        console.error('Error in subscriber:', error)\r\n      }\r\n    })\r\n  }\r\n\r\n  function clear(): void {\r\n    subscribers.clear()\r\n  }\r\n\r\n  return { subscribe, notify, clear }\r\n}\r\n","/**\r\n * State management for ModalKit\r\n */\r\n\r\nimport type { ModalState, AnimationState, StateManager } from '../types'\r\nimport { createSubscriptionManager } from '../utils/events'\r\n\r\n/**\r\n * Create initial modal state\r\n */\r\nexport function createInitialState(defaultOpen: boolean = false): ModalState {\r\n  return {\r\n    open: defaultOpen,\r\n    animationState: defaultOpen ? 'entered' : 'idle',\r\n    stackOrder: 0,\r\n    isTopMost: false,\r\n    mounted: defaultOpen,\r\n  }\r\n}\r\n\r\n/**\r\n * Create a state manager\r\n */\r\nexport function createStateManager(\r\n  initialState: ModalState\r\n): StateManager<ModalState> {\r\n  let state = { ...initialState }\r\n  const { subscribe, notify } = createSubscriptionManager<ModalState>()\r\n\r\n  function getState(): ModalState {\r\n    return { ...state }\r\n  }\r\n\r\n  function setState(partial: Partial<ModalState>): void {\r\n    const prevState = state\r\n    state = { ...state, ...partial }\r\n\r\n    // Only notify if state actually changed\r\n    if (hasStateChanged(prevState, state)) {\r\n      notify(state)\r\n    }\r\n  }\r\n\r\n  return {\r\n    getState,\r\n    setState,\r\n    subscribe,\r\n  }\r\n}\r\n\r\n/**\r\n * Check if state has changed\r\n */\r\nfunction hasStateChanged(prev: ModalState, next: ModalState): boolean {\r\n  return (\r\n    prev.open !== next.open ||\r\n    prev.animationState !== next.animationState ||\r\n    prev.stackOrder !== next.stackOrder ||\r\n    prev.isTopMost !== next.isTopMost ||\r\n    prev.mounted !== next.mounted\r\n  )\r\n}\r\n\r\n/**\r\n * Derive mounted state from open and animation state\r\n */\r\nexport function shouldBeMounted(\r\n  open: boolean,\r\n  animationState: AnimationState\r\n): boolean {\r\n  // Mounted when open or during exit animation\r\n  return open || animationState === 'exiting' || animationState === 'exited'\r\n}\r\n\r\n/**\r\n * Get the next animation state based on current state and action\r\n */\r\nexport function getNextAnimationState(\r\n  currentState: AnimationState,\r\n  action: 'open' | 'close',\r\n  animated: boolean\r\n): AnimationState {\r\n  if (!animated) {\r\n    return action === 'open' ? 'entered' : 'idle'\r\n  }\r\n\r\n  if (action === 'open') {\r\n    return 'entering'\r\n  }\r\n\r\n  // Close action\r\n  if (currentState === 'entered' || currentState === 'entering') {\r\n    return 'exiting'\r\n  }\r\n\r\n  return 'idle'\r\n}\r\n","/**\r\n * Modal stack management for ModalKit\r\n */\r\n\r\nimport type { Modal, ModalStack, ModalInternal, StackEvent } from '../types'\r\nimport { createEventEmitter } from '../utils/events'\r\n\r\n/**\r\n * Stack event types\r\n */\r\ninterface StackEvents extends Record<string, unknown[]> {\r\n  push: [Modal]\r\n  pop: [Modal]\r\n  change: [Modal[]]\r\n}\r\n\r\n/**\r\n * Base z-index for modals\r\n */\r\nexport const BASE_Z_INDEX = 1000\r\n\r\n/**\r\n * Z-index increment per stacked modal\r\n */\r\nexport const Z_INDEX_INCREMENT = 10\r\n\r\n/**\r\n * Calculate z-index for a modal at given stack position\r\n */\r\nexport function calculateZIndex(stackOrder: number): number {\r\n  return BASE_Z_INDEX + (stackOrder - 1) * Z_INDEX_INCREMENT\r\n}\r\n\r\n/**\r\n * Create the modal stack manager\r\n */\r\nfunction createModalStack(): ModalStack & {\r\n  push: (modal: ModalInternal) => void\r\n  remove: (modal: ModalInternal) => void\r\n} {\r\n  const stack: ModalInternal[] = []\r\n  const events = createEventEmitter<StackEvents>()\r\n\r\n  function updateStackState(): void {\r\n    stack.forEach((modal, index) => {\r\n      const order = index + 1\r\n      const isTopMost = index === stack.length - 1\r\n      modal._setStackOrder(order)\r\n      modal._setIsTopMost(isTopMost)\r\n    })\r\n  }\r\n\r\n  function push(modal: ModalInternal): void {\r\n    // Check if modal is already in stack\r\n    const existingIndex = stack.indexOf(modal)\r\n    if (existingIndex !== -1) {\r\n      return\r\n    }\r\n\r\n    stack.push(modal)\r\n    updateStackState()\r\n    events.emit('push', modal)\r\n    events.emit('change', [...stack])\r\n  }\r\n\r\n  function remove(modal: ModalInternal): void {\r\n    const index = stack.indexOf(modal)\r\n    if (index === -1) return\r\n\r\n    stack.splice(index, 1)\r\n    updateStackState()\r\n    events.emit('pop', modal)\r\n    events.emit('change', [...stack])\r\n  }\r\n\r\n  function count(): number {\r\n    return stack.length\r\n  }\r\n\r\n  function isEmpty(): boolean {\r\n    return stack.length === 0\r\n  }\r\n\r\n  function getAll(): Modal[] {\r\n    return [...stack]\r\n  }\r\n\r\n  function getTopMost(): Modal | null {\r\n    return stack[stack.length - 1] ?? null\r\n  }\r\n\r\n  function getByOrder(order: number): Modal | null {\r\n    return stack[order - 1] ?? null\r\n  }\r\n\r\n  function closeAll(): void {\r\n    // Close from top to bottom\r\n    const modalsToClose = [...stack].reverse()\r\n    modalsToClose.forEach((modal) => modal.close())\r\n  }\r\n\r\n  function closeTopMost(): void {\r\n    const topMost = getTopMost()\r\n    if (topMost) {\r\n      topMost.close()\r\n    }\r\n  }\r\n\r\n  function on<K extends StackEvent>(\r\n    event: K,\r\n    handler: K extends 'change'\r\n      ? (modals: Modal[]) => void\r\n      : (modal: Modal) => void\r\n  ): () => void {\r\n    return events.on(event, handler as (...args: StackEvents[K]) => void)\r\n  }\r\n\r\n  function off<K extends StackEvent>(\r\n    event: K,\r\n    handler: K extends 'change'\r\n      ? (modals: Modal[]) => void\r\n      : (modal: Modal) => void\r\n  ): void {\r\n    events.off(event, handler as (...args: StackEvents[K]) => void)\r\n  }\r\n\r\n  return {\r\n    count,\r\n    isEmpty,\r\n    getAll,\r\n    getTopMost,\r\n    getByOrder,\r\n    closeAll,\r\n    closeTopMost,\r\n    on,\r\n    off,\r\n    push,\r\n    remove,\r\n  }\r\n}\r\n\r\n/**\r\n * Global modal stack singleton\r\n */\r\nexport const modalStack = createModalStack()\r\n\r\n/**\r\n * Internal stack methods for modal instances\r\n * @internal\r\n */\r\nexport const stackInternal = {\r\n  push: modalStack.push,\r\n  remove: modalStack.remove,\r\n}\r\n","/**\r\n * Focus utility functions for ModalKit\r\n */\r\n\r\n/**\r\n * Selector for focusable elements\r\n */\r\nexport const FOCUSABLE_SELECTOR = [\r\n  'a[href]',\r\n  'area[href]',\r\n  'button:not([disabled])',\r\n  'input:not([disabled])',\r\n  'select:not([disabled])',\r\n  'textarea:not([disabled])',\r\n  '[tabindex]:not([tabindex=\"-1\"])',\r\n  '[contenteditable=\"true\"]',\r\n  'audio[controls]',\r\n  'video[controls]',\r\n  'details > summary:first-of-type',\r\n].join(',')\r\n\r\n/**\r\n * Check if an element is visible\r\n */\r\nfunction isVisible(element: HTMLElement): boolean {\r\n  // Check if element is hidden\r\n  if (\r\n    element.offsetWidth === 0 &&\r\n    element.offsetHeight === 0 &&\r\n    element.getClientRects().length === 0\r\n  ) {\r\n    return false\r\n  }\r\n\r\n  // Check computed styles\r\n  const style = getComputedStyle(element)\r\n  if (style.visibility === 'hidden' || style.display === 'none') {\r\n    return false\r\n  }\r\n\r\n  return true\r\n}\r\n\r\n/**\r\n * Check if an element is focusable\r\n */\r\nexport function isFocusable(element: Element): boolean {\r\n  if (!(element instanceof HTMLElement)) return false\r\n  if (!element.matches(FOCUSABLE_SELECTOR)) return false\r\n  if (!isVisible(element)) return false\r\n\r\n  return true\r\n}\r\n\r\n/**\r\n * Get all focusable elements within a container\r\n */\r\nexport function getFocusableElements(container: HTMLElement): HTMLElement[] {\r\n  const elements = container.querySelectorAll<HTMLElement>(FOCUSABLE_SELECTOR)\r\n  return Array.from(elements).filter(isFocusable)\r\n}\r\n\r\n/**\r\n * Get the first focusable element in a container\r\n */\r\nexport function getFirstFocusable(container: HTMLElement): HTMLElement | null {\r\n  const focusables = getFocusableElements(container)\r\n  return focusables[0] ?? null\r\n}\r\n\r\n/**\r\n * Get the last focusable element in a container\r\n */\r\nexport function getLastFocusable(container: HTMLElement): HTMLElement | null {\r\n  const focusables = getFocusableElements(container)\r\n  return focusables[focusables.length - 1] ?? null\r\n}\r\n\r\n/**\r\n * Get the currently focused element\r\n */\r\nexport function getActiveElement(doc: Document = document): Element | null {\r\n  let activeElement = doc.activeElement\r\n\r\n  // Handle shadow DOM\r\n  while (activeElement?.shadowRoot?.activeElement) {\r\n    activeElement = activeElement.shadowRoot.activeElement\r\n  }\r\n\r\n  return activeElement\r\n}\r\n\r\n/**\r\n * Focus an element safely\r\n */\r\nexport function focusElement(\r\n  element: HTMLElement | null | undefined,\r\n  options?: FocusOptions\r\n): boolean {\r\n  if (!element) return false\r\n\r\n  try {\r\n    element.focus(options)\r\n    return getActiveElement() === element\r\n  } catch {\r\n    return false\r\n  }\r\n}\r\n\r\n/**\r\n * Storage for saved focus state\r\n */\r\ninterface FocusState {\r\n  element: HTMLElement | null\r\n  scrollX: number\r\n  scrollY: number\r\n}\r\n\r\nlet savedFocus: FocusState | null = null\r\n\r\n/**\r\n * Save the current focus state\r\n */\r\nexport function saveFocus(): void {\r\n  const activeElement = getActiveElement()\r\n  savedFocus = {\r\n    element: activeElement instanceof HTMLElement ? activeElement : null,\r\n    scrollX: window.scrollX,\r\n    scrollY: window.scrollY,\r\n  }\r\n}\r\n\r\n/**\r\n * Restore previously saved focus state\r\n */\r\nexport function restoreFocus(preventScroll: boolean = true): void {\r\n  if (!savedFocus) return\r\n\r\n  const { element, scrollX, scrollY } = savedFocus\r\n\r\n  if (element && document.body.contains(element)) {\r\n    focusElement(element, { preventScroll })\r\n\r\n    // Restore scroll position if needed\r\n    if (preventScroll) {\r\n      window.scrollTo(scrollX, scrollY)\r\n    }\r\n  }\r\n\r\n  savedFocus = null\r\n}\r\n\r\n/**\r\n * Clear saved focus without restoring\r\n */\r\nexport function clearSavedFocus(): void {\r\n  savedFocus = null\r\n}\r\n\r\n/**\r\n * Check if focus is within a container\r\n */\r\nexport function isFocusWithin(container: HTMLElement): boolean {\r\n  const activeElement = getActiveElement()\r\n  if (!activeElement) return false\r\n  return container.contains(activeElement)\r\n}\r\n","/**\r\n * Focus trap implementation for ModalKit\r\n */\r\n\r\nimport type { FocusTrap, FocusTrapConfig } from '../types'\r\nimport {\r\n  getFocusableElements,\r\n  getFirstFocusable,\r\n  focusElement,\r\n  getActiveElement,\r\n  saveFocus,\r\n  restoreFocus,\r\n} from '../utils/focus'\r\n\r\n/**\r\n * Create a focus trap instance\r\n */\r\nexport function createFocusTrap(config: FocusTrapConfig): FocusTrap {\r\n  const {\r\n    container,\r\n    initialFocus,\r\n    fallbackFocus,\r\n    returnFocus,\r\n    escapeDeactivates = true,\r\n    clickOutsideDeactivates = false,\r\n    allowOutsideClick = false,\r\n    onActivate,\r\n    onDeactivate,\r\n  } = config\r\n\r\n  let active = false\r\n  let paused = false\r\n  let focusing = false // Guard against re-entrancy in handleFocusIn\r\n\r\n  // Resolve element from ref\r\n  function resolveElement(\r\n    ref: HTMLElement | (() => HTMLElement | null) | null | undefined\r\n  ): HTMLElement | null {\r\n    if (!ref) return null\r\n    if (typeof ref === 'function') return ref()\r\n    return ref\r\n  }\r\n\r\n  // Handle Tab key navigation\r\n  function handleKeyDown(event: KeyboardEvent): void {\r\n    if (!active || paused) return\r\n    if (event.key !== 'Tab') return\r\n\r\n    const focusables = getFocusableElements(container)\r\n    if (focusables.length === 0) return\r\n\r\n    const firstFocusable = focusables[0]\r\n    const lastFocusable = focusables[focusables.length - 1]\r\n    const activeElement = getActiveElement()\r\n\r\n    // Handle Shift+Tab (backwards)\r\n    if (event.shiftKey) {\r\n      if (activeElement === firstFocusable || !container.contains(activeElement as Node)) {\r\n        event.preventDefault()\r\n        focusElement(lastFocusable)\r\n      }\r\n    } else {\r\n      // Handle Tab (forwards)\r\n      if (activeElement === lastFocusable || !container.contains(activeElement as Node)) {\r\n        event.preventDefault()\r\n        focusElement(firstFocusable)\r\n      }\r\n    }\r\n  }\r\n\r\n  // Handle Escape key\r\n  function handleEscapeKey(event: KeyboardEvent): void {\r\n    if (!active || paused) return\r\n    if (event.key !== 'Escape') return\r\n\r\n    if (escapeDeactivates) {\r\n      event.preventDefault()\r\n      deactivate()\r\n    }\r\n  }\r\n\r\n  // Handle clicks outside the container\r\n  function handleClick(event: MouseEvent): void {\r\n    if (!active || paused) return\r\n\r\n    const target = event.target as Node\r\n    if (!container.contains(target)) {\r\n      // Check if outside click is allowed\r\n      const shouldAllowClick =\r\n        typeof allowOutsideClick === 'function'\r\n          ? allowOutsideClick(event)\r\n          : allowOutsideClick\r\n\r\n      if (!shouldAllowClick) {\r\n        event.preventDefault()\r\n        event.stopPropagation()\r\n      }\r\n\r\n      if (clickOutsideDeactivates) {\r\n        deactivate()\r\n      }\r\n    }\r\n  }\r\n\r\n  // Handle focus leaving the container\r\n  function handleFocusIn(event: FocusEvent): void {\r\n    if (!active || paused || focusing) return\r\n\r\n    const target = event.target as Node\r\n    if (!container.contains(target)) {\r\n      // Focus has left the trap, bring it back\r\n      focusing = true\r\n      event.preventDefault()\r\n      const firstFocusable = getFirstFocusable(container)\r\n      if (firstFocusable) {\r\n        focusElement(firstFocusable)\r\n      } else {\r\n        // Fallback to container itself\r\n        container.focus()\r\n      }\r\n      // Use setTimeout to reset the guard after focus event completes\r\n      setTimeout(() => { focusing = false }, 0)\r\n    }\r\n  }\r\n\r\n  function activate(): void {\r\n    if (active) return\r\n\r\n    // Save current focus for restoration\r\n    saveFocus()\r\n\r\n    active = true\r\n    paused = false\r\n\r\n    // Add event listeners\r\n    document.addEventListener('keydown', handleKeyDown, true)\r\n    document.addEventListener('keydown', handleEscapeKey, true)\r\n    document.addEventListener('click', handleClick, true)\r\n    document.addEventListener('focusin', handleFocusIn, true)\r\n\r\n    // Set initial focus\r\n    const initialElement = resolveElement(initialFocus)\r\n    const fallbackElement = resolveElement(fallbackFocus)\r\n    const firstFocusable = getFirstFocusable(container)\r\n\r\n    const elementToFocus =\r\n      initialElement ??\r\n      fallbackElement ??\r\n      firstFocusable ??\r\n      container\r\n\r\n    // Make container focusable as fallback\r\n    if (!container.hasAttribute('tabindex')) {\r\n      container.setAttribute('tabindex', '-1')\r\n    }\r\n\r\n    focusElement(elementToFocus as HTMLElement, { preventScroll: true })\r\n\r\n    onActivate?.()\r\n  }\r\n\r\n  function deactivate(): void {\r\n    if (!active) return\r\n\r\n    active = false\r\n    paused = false\r\n\r\n    // Remove event listeners\r\n    document.removeEventListener('keydown', handleKeyDown, true)\r\n    document.removeEventListener('keydown', handleEscapeKey, true)\r\n    document.removeEventListener('click', handleClick, true)\r\n    document.removeEventListener('focusin', handleFocusIn, true)\r\n\r\n    // Restore focus\r\n    const returnElement = resolveElement(returnFocus)\r\n    if (returnElement) {\r\n      focusElement(returnElement, { preventScroll: true })\r\n    } else {\r\n      restoreFocus(true)\r\n    }\r\n\r\n    onDeactivate?.()\r\n  }\r\n\r\n  function pause(): void {\r\n    if (!active) return\r\n    paused = true\r\n  }\r\n\r\n  function unpause(): void {\r\n    if (!active) return\r\n    paused = false\r\n  }\r\n\r\n  function isActive(): boolean {\r\n    return active\r\n  }\r\n\r\n  function isPaused(): boolean {\r\n    return paused\r\n  }\r\n\r\n  return {\r\n    activate,\r\n    deactivate,\r\n    pause,\r\n    unpause,\r\n    isActive,\r\n    isPaused,\r\n  }\r\n}\r\n","/**\r\n * DOM utility functions for ModalKit\r\n */\r\n\r\n/**\r\n * Get an element by selector string or return the element itself\r\n */\r\nexport function getElement(\r\n  target: HTMLElement | string | null | undefined\r\n): HTMLElement | null {\r\n  if (!target) return null\r\n  if (typeof target === 'string') {\r\n    return document.querySelector(target)\r\n  }\r\n  return target\r\n}\r\n\r\n/**\r\n * Create a portal container element\r\n */\r\nexport function createPortalContainer(id?: string): HTMLDivElement {\r\n  const container = document.createElement('div')\r\n  if (id) {\r\n    container.id = id\r\n  }\r\n  container.setAttribute('data-modalkit-portal', '')\r\n  return container\r\n}\r\n\r\n/**\r\n * Safely remove an element from the DOM\r\n */\r\nexport function removeElement(element: HTMLElement | null): void {\r\n  if (element && element.parentNode) {\r\n    element.parentNode.removeChild(element)\r\n  }\r\n}\r\n\r\n/**\r\n * Check if an element is in the document\r\n */\r\nexport function isInDocument(element: HTMLElement | null): boolean {\r\n  if (!element) return false\r\n  return document.body.contains(element)\r\n}\r\n\r\n/**\r\n * Get the document's scrollbar width\r\n */\r\nexport function getScrollbarWidth(): number {\r\n  // Create outer element\r\n  const outer = document.createElement('div')\r\n  outer.style.visibility = 'hidden'\r\n  outer.style.overflow = 'scroll'\r\n  document.body.appendChild(outer)\r\n\r\n  // Create inner element\r\n  const inner = document.createElement('div')\r\n  outer.appendChild(inner)\r\n\r\n  // Calculate scrollbar width\r\n  const scrollbarWidth = outer.offsetWidth - inner.offsetWidth\r\n\r\n  // Cleanup\r\n  removeElement(outer)\r\n\r\n  return scrollbarWidth\r\n}\r\n\r\n/**\r\n * Check if the element or its descendants contain another element\r\n */\r\nexport function contains(parent: Element | null, child: Element | null): boolean {\r\n  if (!parent || !child) return false\r\n  return parent === child || parent.contains(child)\r\n}\r\n\r\n/**\r\n * Set multiple styles on an element\r\n */\r\nexport function setStyles(\r\n  element: HTMLElement,\r\n  styles: Partial<CSSStyleDeclaration>\r\n): void {\r\n  Object.assign(element.style, styles)\r\n}\r\n\r\n/**\r\n * Get the owner document of an element\r\n */\r\nexport function getOwnerDocument(element: Element | null): Document {\r\n  return element?.ownerDocument ?? document\r\n}\r\n\r\n/**\r\n * Check if we're in a browser environment\r\n */\r\nexport function isBrowser(): boolean {\r\n  return typeof window !== 'undefined' && typeof document !== 'undefined'\r\n}\r\n","/**\r\n * Scroll lock implementation for ModalKit\r\n */\r\n\r\nimport type { ScrollLock } from '../types'\r\nimport { getScrollbarWidth } from '../utils/dom'\r\n\r\n// Reference counting for multiple modals\r\nlet lockCount = 0\r\n\r\n// Store original body styles\r\nlet originalStyles: {\r\n  overflow: string\r\n  paddingRight: string\r\n} | null = null\r\n\r\n/**\r\n * Check if iOS Safari\r\n * @internal\r\n */\r\n/* c8 ignore start */\r\nfunction isIOS(): boolean {\r\n  return (\r\n    typeof navigator !== 'undefined' &&\r\n    /iPad|iPhone|iPod/.test(navigator.userAgent)\r\n  )\r\n}\r\n\r\n/**\r\n * Get current scroll position\r\n * @internal\r\n */\r\nfunction getScrollPosition(): { x: number; y: number } {\r\n  return {\r\n    x: window.pageXOffset ?? document.documentElement.scrollLeft,\r\n    y: window.pageYOffset ?? document.documentElement.scrollTop,\r\n  }\r\n}\r\n/* c8 ignore stop */\r\n\r\n// Store scroll position for iOS fix\r\nlet scrollPosition: { x: number; y: number } | null = null\r\n\r\n/**\r\n * Lock body scroll\r\n */\r\nfunction lock(): void {\r\n  lockCount++\r\n\r\n  // Only apply lock on first call\r\n  if (lockCount > 1) return\r\n\r\n  const scrollbarWidth = getScrollbarWidth()\r\n  const hasScrollbar = window.innerWidth > document.documentElement.clientWidth\r\n\r\n  // Save original styles\r\n  originalStyles = {\r\n    overflow: document.body.style.overflow,\r\n    paddingRight: document.body.style.paddingRight,\r\n  }\r\n\r\n  // Apply lock styles\r\n  document.body.style.overflow = 'hidden'\r\n\r\n  // Add padding to prevent layout shift from scrollbar disappearing\r\n  if (hasScrollbar && scrollbarWidth > 0) {\r\n    const currentPadding = parseInt(\r\n      getComputedStyle(document.body).paddingRight,\r\n      10\r\n    ) || 0\r\n    document.body.style.paddingRight = `${currentPadding + scrollbarWidth}px`\r\n  }\r\n\r\n  // iOS Safari fix\r\n  /* c8 ignore start */\r\n  if (isIOS()) {\r\n    scrollPosition = getScrollPosition()\r\n    document.body.style.position = 'fixed'\r\n    document.body.style.top = `-${scrollPosition.y}px`\r\n    document.body.style.left = `-${scrollPosition.x}px`\r\n    document.body.style.width = '100%'\r\n  }\r\n  /* c8 ignore stop */\r\n}\r\n\r\n/**\r\n * Unlock body scroll\r\n */\r\n/* c8 ignore start */\r\nfunction unlock(): void {\r\n  if (lockCount === 0) return\r\n\r\n  lockCount--\r\n\r\n  // Only remove lock on last call\r\n  if (lockCount > 0) return\r\n\r\n  // Restore original styles\r\n  if (originalStyles) {\r\n    document.body.style.overflow = originalStyles.overflow\r\n    document.body.style.paddingRight = originalStyles.paddingRight\r\n    originalStyles = null\r\n  }\r\n\r\n  // iOS Safari fix - restore scroll position\r\n  if (isIOS() && scrollPosition) {\r\n    document.body.style.position = ''\r\n    document.body.style.top = ''\r\n    document.body.style.left = ''\r\n    document.body.style.width = ''\r\n    window.scrollTo(scrollPosition.x, scrollPosition.y)\r\n    scrollPosition = null\r\n  }\r\n}\r\n/* c8 ignore stop */\r\n\r\n/**\r\n * Check if scroll is locked\r\n */\r\nfunction isLocked(): boolean {\r\n  return lockCount > 0\r\n}\r\n\r\n/**\r\n * Force reset scroll lock (useful for testing)\r\n * @internal\r\n */\r\nexport function resetScrollLock(): void {\r\n  if (originalStyles) {\r\n    document.body.style.overflow = originalStyles.overflow\r\n    document.body.style.paddingRight = originalStyles.paddingRight\r\n    originalStyles = null\r\n  }\r\n\r\n  /* c8 ignore start */\r\n  if (isIOS()) {\r\n    document.body.style.position = ''\r\n    document.body.style.top = ''\r\n    document.body.style.left = ''\r\n    document.body.style.width = ''\r\n  }\r\n  /* c8 ignore stop */\r\n\r\n  lockCount = 0\r\n  scrollPosition = null\r\n}\r\n\r\n/**\r\n * Scroll lock singleton\r\n */\r\nexport const scrollLock: ScrollLock = {\r\n  lock,\r\n  unlock,\r\n  isLocked,\r\n}\r\n","/**\r\n * Animation controller for ModalKit\r\n */\r\n\r\nimport type { AnimationState, AnimationType, AnimationController } from '../types'\r\n\r\n/**\r\n * Configuration for animation controller\r\n */\r\nexport interface AnimationControllerConfig {\r\n  /** Animation duration in ms */\r\n  duration: number\r\n  /** Called when animation state changes */\r\n  onStateChange?: (state: AnimationState) => void\r\n  /** Called when animation starts */\r\n  onAnimationStart?: (type: AnimationType) => void\r\n  /** Called when animation ends */\r\n  onAnimationEnd?: (type: AnimationType) => void\r\n}\r\n\r\n/**\r\n * Create an animation controller\r\n */\r\nexport function createAnimationController(\r\n  config: AnimationControllerConfig\r\n): AnimationController {\r\n  const { duration, onStateChange, onAnimationStart, onAnimationEnd } = config\r\n\r\n  let state: AnimationState = 'idle'\r\n  let timerId: ReturnType<typeof setTimeout> | null = null\r\n\r\n  function clearTimer(): void {\r\n    if (timerId !== null) {\r\n      clearTimeout(timerId)\r\n      timerId = null\r\n    }\r\n  }\r\n\r\n  function setState(newState: AnimationState): void {\r\n    if (state !== newState) {\r\n      state = newState\r\n      onStateChange?.(state)\r\n    }\r\n  }\r\n\r\n  function startEnter(): void {\r\n    clearTimer()\r\n    setState('entering')\r\n    onAnimationStart?.('enter')\r\n\r\n    timerId = setTimeout(() => {\r\n      setState('entered')\r\n      onAnimationEnd?.('enter')\r\n      timerId = null\r\n    }, duration)\r\n  }\r\n\r\n  function startExit(): void {\r\n    clearTimer()\r\n    setState('exiting')\r\n    onAnimationStart?.('exit')\r\n\r\n    timerId = setTimeout(() => {\r\n      setState('exited')\r\n      onAnimationEnd?.('exit')\r\n\r\n      // Transition to idle after exited\r\n      timerId = setTimeout(() => {\r\n        setState('idle')\r\n        timerId = null\r\n      }, 0)\r\n    }, duration)\r\n  }\r\n\r\n  function skipTo(targetState: 'entered' | 'exited'): void {\r\n    clearTimer()\r\n\r\n    if (targetState === 'entered') {\r\n      setState('entered')\r\n    } else {\r\n      setState('exited')\r\n      // Transition to idle\r\n      timerId = setTimeout(() => {\r\n        setState('idle')\r\n        timerId = null\r\n      }, 0)\r\n    }\r\n  }\r\n\r\n  function getState(): AnimationState {\r\n    return state\r\n  }\r\n\r\n  function isAnimating(): boolean {\r\n    return state === 'entering' || state === 'exiting'\r\n  }\r\n\r\n  function destroy(): void {\r\n    clearTimer()\r\n    state = 'idle'\r\n  }\r\n\r\n  return {\r\n    startEnter,\r\n    startExit,\r\n    skipTo,\r\n    getState,\r\n    isAnimating,\r\n    destroy,\r\n  }\r\n}\r\n\r\n/**\r\n * Create a no-op animation controller (for when animations are disabled)\r\n */\r\nexport function createNoopAnimationController(): AnimationController {\r\n  let state: AnimationState = 'idle'\r\n\r\n  return {\r\n    startEnter() {\r\n      state = 'entered'\r\n    },\r\n    startExit() {\r\n      state = 'idle'\r\n    },\r\n    skipTo(targetState: 'entered' | 'exited') {\r\n      state = targetState === 'entered' ? 'entered' : 'idle'\r\n    },\r\n    getState() {\r\n      return state\r\n    },\r\n    isAnimating() {\r\n      return false\r\n    },\r\n    destroy() {\r\n      state = 'idle'\r\n    },\r\n  }\r\n}\r\n","/**\r\n * Keyboard handling for ModalKit\r\n */\r\n\r\n/**\r\n * Check if event is Escape key\r\n */\r\nexport function isEscapeKey(event: KeyboardEvent): boolean {\r\n  return event.key === 'Escape' || event.key === 'Esc' || event.keyCode === 27\r\n}\r\n\r\n/**\r\n * Check if event is Tab key\r\n */\r\nexport function isTabKey(event: KeyboardEvent): boolean {\r\n  return event.key === 'Tab' || event.keyCode === 9\r\n}\r\n\r\n/**\r\n * Check if event is Enter key\r\n */\r\nexport function isEnterKey(event: KeyboardEvent): boolean {\r\n  return event.key === 'Enter' || event.keyCode === 13\r\n}\r\n\r\n/**\r\n * Check if event is Space key\r\n */\r\nexport function isSpaceKey(event: KeyboardEvent): boolean {\r\n  return event.key === ' ' || event.key === 'Spacebar' || event.keyCode === 32\r\n}\r\n\r\n/**\r\n * Configuration for keyboard handler\r\n */\r\nexport interface KeyboardHandlerConfig {\r\n  /** Close modal on Escape */\r\n  closeOnEscape: boolean\r\n  /** Callback when Escape is pressed */\r\n  onEscapeKeyDown?: (event: KeyboardEvent) => void\r\n  /** Close callback */\r\n  onClose: () => void\r\n  /** Whether this is the top-most modal */\r\n  isTopMost: () => boolean\r\n}\r\n\r\n/**\r\n * Create a keyboard event handler for modals\r\n */\r\nexport function createKeyboardHandler(\r\n  config: KeyboardHandlerConfig\r\n): (event: KeyboardEvent) => void {\r\n  const { closeOnEscape, onEscapeKeyDown, onClose, isTopMost } = config\r\n\r\n  return function handleKeyDown(event: KeyboardEvent): void {\r\n    // Only handle events for top-most modal\r\n    if (!isTopMost()) return\r\n\r\n    if (isEscapeKey(event)) {\r\n      // Call user callback first\r\n      onEscapeKeyDown?.(event)\r\n\r\n      // Close if enabled and event not prevented\r\n      if (closeOnEscape && !event.defaultPrevented) {\r\n        event.preventDefault()\r\n        event.stopPropagation()\r\n        onClose()\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Prevent default and stop propagation\r\n */\r\nexport function stopEvent(event: Event): void {\r\n  event.preventDefault()\r\n  event.stopPropagation()\r\n}\r\n","/**\r\n * Portal utilities for ModalKit\r\n */\r\n\r\nimport { getElement, createPortalContainer, removeElement } from '../utils/dom'\r\n\r\n// Default portal container ID\r\nconst DEFAULT_PORTAL_ID = 'modalkit-portal-root'\r\n\r\n/**\r\n * Get or create the default portal container\r\n */\r\nexport function getPortalContainer(\r\n  target?: HTMLElement | string | null\r\n): HTMLElement {\r\n  // If a specific target is provided, use it\r\n  if (target) {\r\n    const element = getElement(target)\r\n    if (element) return element\r\n  }\r\n\r\n  // Try to find existing default container\r\n  let container = document.getElementById(DEFAULT_PORTAL_ID)\r\n\r\n  // Create new container if doesn't exist\r\n  if (!container) {\r\n    container = createPortalContainer(DEFAULT_PORTAL_ID)\r\n    document.body.appendChild(container)\r\n  }\r\n\r\n  return container\r\n}\r\n\r\n/**\r\n * Create a new portal element\r\n */\r\nexport function createPortal(id?: string): HTMLDivElement {\r\n  return createPortalContainer(id)\r\n}\r\n\r\n/**\r\n * Append a portal element to a target\r\n */\r\nexport function appendPortal(\r\n  portal: HTMLElement,\r\n  target?: HTMLElement | string | null\r\n): void {\r\n  const container = getPortalContainer(target)\r\n  container.appendChild(portal)\r\n}\r\n\r\n/**\r\n * Remove a portal element from the DOM\r\n */\r\nexport function removePortal(portal: HTMLElement | null): void {\r\n  removeElement(portal)\r\n}\r\n\r\n/**\r\n * Clean up all modalkit portals from the DOM\r\n */\r\nexport function cleanupPortals(): void {\r\n  const portals = document.querySelectorAll('[data-modalkit-portal]')\r\n  portals.forEach((portal) => portal.remove())\r\n\r\n  // Also remove the default container if empty\r\n  const defaultContainer = document.getElementById(DEFAULT_PORTAL_ID)\r\n  if (defaultContainer && defaultContainer.children.length === 0) {\r\n    defaultContainer.remove()\r\n  }\r\n}\r\n","/**\r\n * ID generation utilities for ModalKit\r\n */\r\n\r\nlet counter = 0\r\n\r\n/**\r\n * Generate a unique ID with optional prefix\r\n */\r\nexport function generateId(prefix: string = 'modalkit'): string {\r\n  counter++\r\n  return `${prefix}-${counter}`\r\n}\r\n\r\n/**\r\n * Create a namespaced ID generator\r\n */\r\nexport function createIdGenerator(namespace: string): () => string {\r\n  let localCounter = 0\r\n\r\n  return function generateNamespacedId(): string {\r\n    localCounter++\r\n    return `${namespace}-${localCounter}`\r\n  }\r\n}\r\n\r\n/**\r\n * Reset the global counter (useful for testing)\r\n */\r\nexport function resetIdCounter(): void {\r\n  counter = 0\r\n}\r\n\r\n/**\r\n * Create modal-specific IDs\r\n */\r\nexport function createModalIds(baseId: string): {\r\n  modalId: string\r\n  titleId: string\r\n  descriptionId: string\r\n} {\r\n  return {\r\n    modalId: baseId,\r\n    titleId: `${baseId}-title`,\r\n    descriptionId: `${baseId}-description`,\r\n  }\r\n}\r\n","/**\r\n * Main modal factory for ModalKit\r\n */\r\n\r\nimport type {\r\n  Modal,\r\n  ModalConfig,\r\n  ModalState,\r\n  ModalInternal,\r\n  AnimationState,\r\n  PortalProps,\r\n  OverlayProps,\r\n  ContainerProps,\r\n  ContentProps,\r\n  TitleProps,\r\n  DescriptionProps,\r\n  CloseButtonProps,\r\n  TriggerProps,\r\n  FocusTrap,\r\n} from '../types'\r\n\r\nimport { mergeConfig, DEFAULT_CONFIG } from './config'\r\nimport { createInitialState, createStateManager, shouldBeMounted } from './state'\r\nimport { stackInternal, calculateZIndex } from './stack'\r\nimport { createFocusTrap } from '../features/focus-trap'\r\nimport { scrollLock } from '../features/scroll-lock'\r\nimport {\r\n  createAnimationController,\r\n  createNoopAnimationController,\r\n} from '../features/animation'\r\nimport { createKeyboardHandler } from '../features/keyboard'\r\nimport { getPortalContainer } from '../features/portal'\r\nimport { generateId, createModalIds } from '../utils/id'\r\nimport { contains as domContains } from '../utils/dom'\r\nimport {\r\n  saveFocus,\r\n  restoreFocus,\r\n  focusElement,\r\n  getFirstFocusable,\r\n  getLastFocusable,\r\n} from '../utils/focus'\r\n\r\n/**\r\n * Create a new modal instance\r\n */\r\nexport function createModal(userConfig?: ModalConfig): Modal {\r\n  // Merge config with defaults\r\n  const config = mergeConfig(userConfig)\r\n\r\n  // Generate IDs\r\n  const baseId = config.id ?? generateId('modal')\r\n  const ids = createModalIds(baseId)\r\n\r\n  // Initialize state\r\n  const initialOpen = config.open ?? config.defaultOpen ?? false\r\n  const stateManager = createStateManager(createInitialState(initialOpen))\r\n\r\n  // Animation controller\r\n  const animationController = config.animated\r\n    ? createAnimationController({\r\n        duration: config.animationDuration ?? DEFAULT_CONFIG.animationDuration,\r\n        onStateChange: (animationState) => {\r\n          stateManager.setState({\r\n            animationState,\r\n            mounted: shouldBeMounted(stateManager.getState().open, animationState),\r\n          })\r\n        },\r\n        onAnimationStart: config.onAnimationStart,\r\n        onAnimationEnd: config.onAnimationEnd,\r\n      })\r\n    : createNoopAnimationController()\r\n\r\n  // Focus trap (created lazily)\r\n  let focusTrap: FocusTrap | null = null\r\n  let contentElement: HTMLElement | null = null\r\n  let overlayElement: HTMLElement | null = null\r\n  let containerElement: HTMLElement | null = null\r\n\r\n  // Keyboard handler\r\n  const handleKeyDown = createKeyboardHandler({\r\n    closeOnEscape: config.closeOnEscape ?? DEFAULT_CONFIG.closeOnEscape,\r\n    onEscapeKeyDown: config.onEscapeKeyDown,\r\n    onClose: () => close(),\r\n    isTopMost: () => stateManager.getState().isTopMost,\r\n  })\r\n\r\n  // ============ INTERNAL METHODS ============\r\n\r\n  function resolveElement(\r\n    ref: HTMLElement | (() => HTMLElement | null) | null | undefined\r\n  ): HTMLElement | null {\r\n    if (!ref) return null\r\n    if (typeof ref === 'function') return ref()\r\n    return ref\r\n  }\r\n\r\n  function setupFocusTrap(): void {\r\n    if (!contentElement || focusTrap) return\r\n    if (!config.trapFocus) return\r\n\r\n    focusTrap = createFocusTrap({\r\n      container: contentElement,\r\n      initialFocus: resolveElement(config.initialFocusRef),\r\n      returnFocus: resolveElement(config.finalFocusRef),\r\n      escapeDeactivates: false, // We handle escape ourselves\r\n      clickOutsideDeactivates: false,\r\n    })\r\n  }\r\n\r\n  function teardownFocusTrap(): void {\r\n    if (focusTrap) {\r\n      focusTrap.deactivate()\r\n      focusTrap = null\r\n    }\r\n  }\r\n\r\n  function activateFocusTrap(): void {\r\n    // Create focus trap if needed\r\n    if (!focusTrap && config.trapFocus && contentElement) {\r\n      setupFocusTrap()\r\n    }\r\n\r\n    // Activate if exists and not active\r\n    if (focusTrap && !focusTrap.isActive()) {\r\n      focusTrap.activate()\r\n    }\r\n  }\r\n\r\n  function handleOpen(): void {\r\n    const state = stateManager.getState()\r\n    if (state.open) return\r\n\r\n    // Save focus before opening\r\n    if (config.restoreFocus) {\r\n      saveFocus()\r\n    }\r\n\r\n    // Update state\r\n    stateManager.setState({ open: true, mounted: true })\r\n\r\n    // Start animation\r\n    if (config.animated) {\r\n      animationController.startEnter()\r\n    } else {\r\n      stateManager.setState({ animationState: 'entered' })\r\n    }\r\n\r\n    // Add to stack\r\n    stackInternal.push(modal as ModalInternal)\r\n\r\n    // Lock scroll\r\n    if (config.preventScroll) {\r\n      scrollLock.lock()\r\n    }\r\n\r\n    // Callbacks\r\n    config.onOpen?.()\r\n    config.onOpenChange?.(true)\r\n\r\n    // Focus trap will be activated when content is mounted\r\n    // (via ref callback in getContentProps)\r\n  }\r\n\r\n  function handleClose(): void {\r\n    const state = stateManager.getState()\r\n    if (!state.open) return\r\n\r\n    // Update state\r\n    stateManager.setState({ open: false })\r\n\r\n    // Start animation\r\n    if (config.animated) {\r\n      animationController.startExit()\r\n    } else {\r\n      stateManager.setState({ animationState: 'idle', mounted: false })\r\n    }\r\n\r\n    // Remove from stack\r\n    stackInternal.remove(modal as ModalInternal)\r\n\r\n    // Deactivate focus trap\r\n    teardownFocusTrap()\r\n\r\n    // Unlock scroll\r\n    if (config.preventScroll) {\r\n      scrollLock.unlock()\r\n    }\r\n\r\n    // Restore focus\r\n    if (config.restoreFocus) {\r\n      const finalFocus = resolveElement(config.finalFocusRef)\r\n      if (finalFocus) {\r\n        focusElement(finalFocus)\r\n      } else {\r\n        restoreFocus()\r\n      }\r\n    }\r\n\r\n    // Callbacks\r\n    config.onClose?.()\r\n    config.onOpenChange?.(false)\r\n  }\r\n\r\n  function handleOverlayClick(e: MouseEvent): void {\r\n    // Only close if clicking directly on overlay/container, not content\r\n    const target = e.target as HTMLElement\r\n    const isOverlay = target === overlayElement || target === containerElement\r\n\r\n    if (!isOverlay) return\r\n\r\n    config.onOverlayClick?.(e)\r\n\r\n    if (config.closeOnOverlayClick && !e.defaultPrevented) {\r\n      close()\r\n    }\r\n  }\r\n\r\n  // ============ PUBLIC API ============\r\n\r\n  function isOpen(): boolean {\r\n    return stateManager.getState().open\r\n  }\r\n\r\n  function isMounted(): boolean {\r\n    return stateManager.getState().mounted\r\n  }\r\n\r\n  function getState(): ModalState {\r\n    return stateManager.getState()\r\n  }\r\n\r\n  function subscribe(callback: (state: ModalState) => void): () => void {\r\n    return stateManager.subscribe(callback)\r\n  }\r\n\r\n  function open(): void {\r\n    handleOpen()\r\n  }\r\n\r\n  function close(): void {\r\n    handleClose()\r\n  }\r\n\r\n  function toggle(): void {\r\n    if (isOpen()) {\r\n      close()\r\n    } else {\r\n      open()\r\n    }\r\n  }\r\n\r\n  function getStackOrder(): number {\r\n    return stateManager.getState().stackOrder\r\n  }\r\n\r\n  function isTopMost(): boolean {\r\n    return stateManager.getState().isTopMost\r\n  }\r\n\r\n  function isAnimating(): boolean {\r\n    return animationController.isAnimating()\r\n  }\r\n\r\n  function getAnimationState(): AnimationState {\r\n    return stateManager.getState().animationState\r\n  }\r\n\r\n  function focusFirst(): void {\r\n    if (!contentElement) return\r\n    const first = getFirstFocusable(contentElement)\r\n    if (first) focusElement(first)\r\n  }\r\n\r\n  function focusLast(): void {\r\n    if (!contentElement) return\r\n    const last = getLastFocusable(contentElement)\r\n    if (last) focusElement(last)\r\n  }\r\n\r\n  function contains(element: Element | null): boolean {\r\n    return domContains(contentElement, element)\r\n  }\r\n\r\n  function getPortalTarget(): HTMLElement {\r\n    return getPortalContainer(config.portalTarget)\r\n  }\r\n\r\n  // ============ PROPS GETTERS ============\r\n\r\n  function getPortalProps(): PortalProps {\r\n    return {\r\n      'data-modalkit-portal': '',\r\n      'data-state': getAnimationState(),\r\n    }\r\n  }\r\n\r\n  function getOverlayProps(): OverlayProps {\r\n    const state = getState()\r\n    const zIndex = calculateZIndex(state.stackOrder)\r\n\r\n    return {\r\n      ref: (el) => {\r\n        overlayElement = el\r\n      },\r\n      'data-modalkit-overlay': '',\r\n      'data-state': state.animationState,\r\n      style: {\r\n        position: 'fixed',\r\n        inset: '0',\r\n        zIndex,\r\n      },\r\n      onClick: handleOverlayClick,\r\n    }\r\n  }\r\n\r\n  function getContainerProps(): ContainerProps {\r\n    const state = getState()\r\n    const zIndex = calculateZIndex(state.stackOrder) + 1\r\n    const scrollBehavior = config.scrollBehavior ?? DEFAULT_CONFIG.scrollBehavior\r\n\r\n    return {\r\n      ref: (el) => {\r\n        containerElement = el\r\n      },\r\n      'data-modalkit-container': '',\r\n      'data-state': state.animationState,\r\n      style: {\r\n        position: 'fixed',\r\n        inset: '0',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        zIndex,\r\n        overflow: scrollBehavior === 'inside' ? 'auto' : 'hidden',\r\n      },\r\n      onClick: handleOverlayClick,\r\n    }\r\n  }\r\n\r\n  function getContentProps(): ContentProps {\r\n    const state = getState()\r\n\r\n    const props: ContentProps = {\r\n      ref: (el) => {\r\n        const wasNull = contentElement === null\r\n        contentElement = el\r\n\r\n        // Setup and activate focus trap when content is mounted\r\n        if (el && wasNull && state.open) {\r\n          setupFocusTrap()\r\n          if (config.autoFocus) {\r\n            // Delay to ensure element is in DOM\r\n            requestAnimationFrame(() => {\r\n              activateFocusTrap()\r\n            })\r\n          }\r\n        }\r\n      },\r\n      role: config.role ?? DEFAULT_CONFIG.role,\r\n      'aria-modal': true,\r\n      'data-modalkit-content': '',\r\n      'data-state': state.animationState,\r\n      tabIndex: -1,\r\n      onKeyDown: handleKeyDown,\r\n    }\r\n\r\n    // Add aria attributes\r\n    if (config.ariaLabel) {\r\n      props['aria-label'] = config.ariaLabel\r\n    } else if (config.ariaLabelledBy) {\r\n      props['aria-labelledby'] = config.ariaLabelledBy\r\n    } else {\r\n      // Default to title ID\r\n      props['aria-labelledby'] = ids.titleId\r\n    }\r\n\r\n    if (config.ariaDescribedBy) {\r\n      props['aria-describedby'] = config.ariaDescribedBy\r\n    } else {\r\n      props['aria-describedby'] = ids.descriptionId\r\n    }\r\n\r\n    return props\r\n  }\r\n\r\n  function getTitleProps(customId?: string): TitleProps {\r\n    return {\r\n      id: customId ?? ids.titleId,\r\n      'data-modalkit-title': '',\r\n    }\r\n  }\r\n\r\n  function getDescriptionProps(customId?: string): DescriptionProps {\r\n    return {\r\n      id: customId ?? ids.descriptionId,\r\n      'data-modalkit-description': '',\r\n    }\r\n  }\r\n\r\n  function getCloseButtonProps(): CloseButtonProps {\r\n    return {\r\n      type: 'button',\r\n      'aria-label': 'Close',\r\n      'data-modalkit-close': '',\r\n      onClick: () => close(),\r\n    }\r\n  }\r\n\r\n  function getTriggerProps(): TriggerProps {\r\n    return {\r\n      type: 'button',\r\n      'aria-haspopup': 'dialog',\r\n      'aria-expanded': isOpen(),\r\n      'data-modalkit-trigger': '',\r\n      onClick: () => open(),\r\n    }\r\n  }\r\n\r\n  function getConfig(): ModalConfig {\r\n    return { ...config }\r\n  }\r\n\r\n  function setConfig(newConfig: Partial<ModalConfig>): void {\r\n    Object.assign(config, newConfig)\r\n  }\r\n\r\n  function destroy(): void {\r\n    if (isOpen()) {\r\n      close()\r\n    }\r\n    teardownFocusTrap()\r\n    animationController.destroy()\r\n    contentElement = null\r\n    overlayElement = null\r\n    containerElement = null\r\n  }\r\n\r\n  // ============ INTERNAL INTERFACE ============\r\n\r\n  const modal: ModalInternal = {\r\n    // Public API\r\n    isOpen,\r\n    isMounted,\r\n    getState,\r\n    subscribe,\r\n    open,\r\n    close,\r\n    toggle,\r\n    getStackOrder,\r\n    isTopMost,\r\n    isAnimating,\r\n    getAnimationState,\r\n    focusFirst,\r\n    focusLast,\r\n    contains,\r\n    getPortalTarget,\r\n    getPortalProps,\r\n    getOverlayProps,\r\n    getContainerProps,\r\n    getContentProps,\r\n    getTitleProps,\r\n    getDescriptionProps,\r\n    getCloseButtonProps,\r\n    getTriggerProps,\r\n    getConfig,\r\n    setConfig,\r\n    destroy,\r\n\r\n    // Internal API\r\n    _id: baseId,\r\n    _getTitleId: () => ids.titleId,\r\n    _getDescriptionId: () => ids.descriptionId,\r\n    _setStackOrder: (order) => stateManager.setState({ stackOrder: order }),\r\n    _setIsTopMost: (isTop) => stateManager.setState({ isTopMost: isTop }),\r\n    _getContentElement: () => contentElement,\r\n    _handleOverlayClick: handleOverlayClick,\r\n    _handleKeyDown: handleKeyDown,\r\n  }\r\n\r\n  // Open if defaultOpen is true\r\n  if (initialOpen) {\r\n    stackInternal.push(modal)\r\n  }\r\n\r\n  return modal\r\n}\r\n","/**\r\n * React context for ModalKit\r\n */\r\n\r\nimport React, {\r\n  createContext,\r\n  useContext,\r\n  useState,\r\n  useCallback,\r\n  useMemo,\r\n  type ReactNode,\r\n} from 'react'\r\nimport { createModal } from '../../core/modal'\r\nimport type { ModalConfig, Modal } from '../../types'\r\n\r\n/**\r\n * Modal instance wrapper for imperative API\r\n */\r\ninterface ManagedModal {\r\n  id: string\r\n  modal: Modal\r\n  content: ReactNode | ((props: { close: () => void }) => ReactNode)\r\n  config: ModalConfig\r\n}\r\n\r\n/**\r\n * Context value interface\r\n */\r\nexport interface ModalContextValue {\r\n  // Registry\r\n  modals: Map<string, ManagedModal>\r\n\r\n  // Imperative methods\r\n  openModal: (config: {\r\n    id?: string\r\n    content: ReactNode | ((props: { close: () => void }) => ReactNode)\r\n    title?: string\r\n    size?: 'sm' | 'md' | 'lg' | 'xl' | 'full'\r\n  } & Partial<ModalConfig>) => string\r\n\r\n  closeModal: (id: string) => void\r\n  closeAll: () => void\r\n\r\n  // Internal: force re-render\r\n  _forceUpdate: () => void\r\n}\r\n\r\n/**\r\n * Modal context\r\n */\r\nconst ModalContext = createContext<ModalContextValue | null>(null)\r\n\r\n/**\r\n * Hook to access modal context\r\n */\r\nexport function useModalContext(): ModalContextValue {\r\n  const context = useContext(ModalContext)\r\n  if (!context) {\r\n    throw new Error('useModalContext must be used within a ModalProvider')\r\n  }\r\n  return context\r\n}\r\n\r\n/**\r\n * Provider props\r\n */\r\nexport interface ModalProviderProps {\r\n  children: ReactNode\r\n}\r\n\r\n/**\r\n * Generate unique ID\r\n */\r\nlet idCounter = 0\r\nfunction generateModalId(): string {\r\n  idCounter++\r\n  return `managed-modal-${idCounter}`\r\n}\r\n\r\n/**\r\n * Modal provider component\r\n */\r\nexport function ModalProvider({ children }: ModalProviderProps): React.ReactElement {\r\n  const [modals] = useState(() => new Map<string, ManagedModal>())\r\n  const [, setUpdateCounter] = useState(0)\r\n\r\n  const forceUpdate = useCallback(() => {\r\n    setUpdateCounter((c) => c + 1)\r\n  }, [])\r\n\r\n  const openModal = useCallback(\r\n    (config: {\r\n      id?: string\r\n      content: ReactNode | ((props: { close: () => void }) => ReactNode)\r\n      title?: string\r\n      size?: 'sm' | 'md' | 'lg' | 'xl' | 'full'\r\n    } & Partial<ModalConfig>): string => {\r\n      const id = config.id ?? generateModalId()\r\n      const { content, title, size, ...modalConfig } = config\r\n\r\n      const modal = createModal({\r\n        ...modalConfig,\r\n        onClose: () => {\r\n          modalConfig.onClose?.()\r\n          modals.delete(id)\r\n          forceUpdate()\r\n        },\r\n      })\r\n\r\n      modals.set(id, {\r\n        id,\r\n        modal,\r\n        content,\r\n        config: modalConfig,\r\n      })\r\n\r\n      modal.open()\r\n      forceUpdate()\r\n\r\n      return id\r\n    },\r\n    [modals, forceUpdate]\r\n  )\r\n\r\n  const closeModal = useCallback(\r\n    (id: string) => {\r\n      const managed = modals.get(id)\r\n      if (managed) {\r\n        managed.modal.close()\r\n      }\r\n    },\r\n    [modals]\r\n  )\r\n\r\n  const closeAll = useCallback(() => {\r\n    modals.forEach((managed) => {\r\n      managed.modal.close()\r\n    })\r\n  }, [modals])\r\n\r\n  const value = useMemo(\r\n    (): ModalContextValue => ({\r\n      modals,\r\n      openModal,\r\n      closeModal,\r\n      closeAll,\r\n      _forceUpdate: forceUpdate,\r\n    }),\r\n    [modals, openModal, closeModal, closeAll, forceUpdate]\r\n  )\r\n\r\n  // Render managed modals\r\n  const managedModalElements: ReactNode[] = []\r\n  modals.forEach((managed) => {\r\n    const { id, modal, content } = managed\r\n    const state = modal.getState()\r\n\r\n    if (!state.mounted) return\r\n\r\n    const portalProps = modal.getPortalProps()\r\n    const overlayProps = modal.getOverlayProps()\r\n    const containerProps = modal.getContainerProps()\r\n    const contentProps = modal.getContentProps()\r\n\r\n    const renderedContent =\r\n      typeof content === 'function'\r\n        ? content({ close: () => modal.close() })\r\n        : content\r\n\r\n    managedModalElements.push(\r\n      <div\r\n        key={id}\r\n        data-modalkit-portal={portalProps['data-modalkit-portal']}\r\n        data-state={portalProps['data-state']}\r\n      >\r\n        <div\r\n          ref={overlayProps.ref}\r\n          data-modalkit-overlay=\"\"\r\n          data-state={overlayProps['data-state']}\r\n          style={{\r\n            ...overlayProps.style,\r\n            backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n          }}\r\n          onClick={overlayProps.onClick as unknown as React.MouseEventHandler}\r\n        >\r\n          <div\r\n            ref={containerProps.ref}\r\n            data-modalkit-container=\"\"\r\n            data-state={containerProps['data-state']}\r\n            style={containerProps.style}\r\n            onClick={containerProps.onClick as unknown as React.MouseEventHandler}\r\n          >\r\n            <div\r\n              ref={contentProps.ref}\r\n              role={contentProps.role}\r\n              aria-modal={contentProps['aria-modal']}\r\n              aria-labelledby={contentProps['aria-labelledby']}\r\n              aria-describedby={contentProps['aria-describedby']}\r\n              data-modalkit-content=\"\"\r\n              data-state={contentProps['data-state']}\r\n              tabIndex={contentProps.tabIndex}\r\n              onKeyDown={contentProps.onKeyDown as unknown as React.KeyboardEventHandler}\r\n              style={{\r\n                backgroundColor: 'white',\r\n                borderRadius: '8px',\r\n                padding: '24px',\r\n                maxWidth: '500px',\r\n                width: '100%',\r\n                boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25)',\r\n              }}\r\n            >\r\n              {renderedContent}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  })\r\n\r\n  return (\r\n    <ModalContext.Provider value={value}>\r\n      {children}\r\n      {managedModalElements}\r\n    </ModalContext.Provider>\r\n  )\r\n}\r\n\r\nexport { ModalContext }\r\n","/**\r\n * useModal hook for React\r\n */\r\n\r\nimport { useState, useEffect, useRef, useMemo, useCallback } from 'react'\r\nimport { createModal } from '../../../core/modal'\r\nimport type {\r\n  Modal,\r\n  ModalConfig,\r\n  ModalState,\r\n  AnimationState,\r\n  TriggerProps,\r\n  OverlayProps,\r\n  ContainerProps,\r\n  ContentProps,\r\n  TitleProps,\r\n  DescriptionProps,\r\n  CloseButtonProps,\r\n} from '../../../types'\r\n\r\n/**\r\n * Return type for useModal hook\r\n */\r\nexport interface UseModalReturn {\r\n  // State\r\n  isOpen: boolean\r\n  animationState: AnimationState\r\n  stackOrder: number\r\n  isTopMost: boolean\r\n\r\n  // Actions\r\n  open: () => void\r\n  close: () => void\r\n  toggle: () => void\r\n\r\n  // Focus\r\n  focusFirst: () => void\r\n  focusLast: () => void\r\n\r\n  // Props getters\r\n  getTriggerProps: () => TriggerProps\r\n  getOverlayProps: () => OverlayProps\r\n  getContainerProps: () => ContainerProps\r\n  getContentProps: () => ContentProps\r\n  getTitleProps: (id?: string) => TitleProps\r\n  getDescriptionProps: (id?: string) => DescriptionProps\r\n  getCloseButtonProps: () => CloseButtonProps\r\n\r\n  // Modal instance (for advanced usage)\r\n  modal: Modal\r\n}\r\n\r\n/**\r\n * Hook to create and manage a modal\r\n */\r\nexport function useModal(config?: ModalConfig): UseModalReturn {\r\n  // Create modal instance once\r\n  const modalRef = useRef<Modal | null>(null)\r\n  const configRef = useRef<string>('')\r\n\r\n  if (!modalRef.current) {\r\n    modalRef.current = createModal(config)\r\n  }\r\n\r\n  // Track state\r\n  const [state, setState] = useState<ModalState>(() =>\r\n    modalRef.current!.getState()\r\n  )\r\n\r\n  // Update config when it changes - use string comparison to avoid reference issues\r\n  useEffect(() => {\r\n    const configString = JSON.stringify(config)\r\n    if (configRef.current !== configString && config) {\r\n      configRef.current = configString\r\n      modalRef.current?.setConfig(config)\r\n    }\r\n  }, [config])\r\n\r\n  // Handle controlled mode\r\n  useEffect(() => {\r\n    if (config?.open !== undefined) {\r\n      if (config.open && !modalRef.current?.isOpen()) {\r\n        modalRef.current?.open()\r\n      } else if (!config.open && modalRef.current?.isOpen()) {\r\n        modalRef.current?.close()\r\n      }\r\n    }\r\n  }, [config?.open])\r\n\r\n  // Subscribe to state changes\r\n  useEffect(() => {\r\n    const modal = modalRef.current\r\n    if (!modal) return\r\n\r\n    return modal.subscribe((newState) => {\r\n      setState(newState)\r\n    })\r\n  }, [])\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      modalRef.current?.destroy()\r\n    }\r\n  }, [])\r\n\r\n  // Memoize methods\r\n  const open = useCallback(() => modalRef.current?.open(), [])\r\n  const close = useCallback(() => modalRef.current?.close(), [])\r\n  const toggle = useCallback(() => modalRef.current?.toggle(), [])\r\n  const focusFirst = useCallback(() => modalRef.current?.focusFirst(), [])\r\n  const focusLast = useCallback(() => modalRef.current?.focusLast(), [])\r\n\r\n  // Props getters\r\n  const getTriggerProps = useCallback(\r\n    () => modalRef.current!.getTriggerProps(),\r\n    []\r\n  )\r\n  const getOverlayProps = useCallback(\r\n    () => modalRef.current!.getOverlayProps(),\r\n    []\r\n  )\r\n  const getContainerProps = useCallback(\r\n    () => modalRef.current!.getContainerProps(),\r\n    []\r\n  )\r\n  const getContentProps = useCallback(\r\n    () => modalRef.current!.getContentProps(),\r\n    []\r\n  )\r\n  const getTitleProps = useCallback(\r\n    (id?: string) => modalRef.current!.getTitleProps(id),\r\n    []\r\n  )\r\n  const getDescriptionProps = useCallback(\r\n    (id?: string) => modalRef.current!.getDescriptionProps(id),\r\n    []\r\n  )\r\n  const getCloseButtonProps = useCallback(\r\n    () => modalRef.current!.getCloseButtonProps(),\r\n    []\r\n  )\r\n\r\n  return useMemo(\r\n    () => ({\r\n      isOpen: state.open,\r\n      animationState: state.animationState,\r\n      stackOrder: state.stackOrder,\r\n      isTopMost: state.isTopMost,\r\n      open,\r\n      close,\r\n      toggle,\r\n      focusFirst,\r\n      focusLast,\r\n      getTriggerProps,\r\n      getOverlayProps,\r\n      getContainerProps,\r\n      getContentProps,\r\n      getTitleProps,\r\n      getDescriptionProps,\r\n      getCloseButtonProps,\r\n      modal: modalRef.current!,\r\n    }),\r\n    [\r\n      state,\r\n      open,\r\n      close,\r\n      toggle,\r\n      focusFirst,\r\n      focusLast,\r\n      getTriggerProps,\r\n      getOverlayProps,\r\n      getContainerProps,\r\n      getContentProps,\r\n      getTitleProps,\r\n      getDescriptionProps,\r\n      getCloseButtonProps,\r\n    ]\r\n  )\r\n}\r\n","/**\r\n * Base utilities for dialog implementations\r\n */\r\n\r\nimport { createModal } from '../core/modal'\r\nimport type { ModalConfig } from '../types'\r\n\r\n/**\r\n * Dialog variant types\r\n */\r\nexport type DialogVariant =\r\n  | 'default'\r\n  | 'primary'\r\n  | 'danger'\r\n  | 'warning'\r\n  | 'success'\r\n  | 'error'\r\n  | 'info'\r\n\r\n/**\r\n * Create dialog container elements\r\n */\r\nexport function createDialogElements(modal: ReturnType<typeof createModal>): {\r\n  portal: HTMLDivElement\r\n  overlay: HTMLDivElement\r\n  container: HTMLDivElement\r\n  content: HTMLDivElement\r\n} {\r\n  const portal = document.createElement('div')\r\n  const portalProps = modal.getPortalProps()\r\n  portal.setAttribute('data-modalkit-portal', portalProps['data-modalkit-portal'])\r\n  portal.setAttribute('data-state', portalProps['data-state'])\r\n\r\n  const overlay = document.createElement('div')\r\n  const overlayProps = modal.getOverlayProps()\r\n  overlay.setAttribute('data-modalkit-overlay', '')\r\n  overlay.setAttribute('data-state', overlayProps['data-state'])\r\n  Object.assign(overlay.style, overlayProps.style)\r\n  overlay.style.backgroundColor = 'rgba(0, 0, 0, 0.5)'\r\n  overlayProps.ref(overlay)\r\n\r\n  const container = document.createElement('div')\r\n  const containerProps = modal.getContainerProps()\r\n  container.setAttribute('data-modalkit-container', '')\r\n  container.setAttribute('data-state', containerProps['data-state'])\r\n  Object.assign(container.style, containerProps.style)\r\n  containerProps.ref(container)\r\n\r\n  const content = document.createElement('div')\r\n  const contentProps = modal.getContentProps()\r\n  content.setAttribute('role', contentProps.role)\r\n  content.setAttribute('aria-modal', 'true')\r\n  if (contentProps['aria-labelledby']) {\r\n    content.setAttribute('aria-labelledby', contentProps['aria-labelledby'])\r\n  }\r\n  if (contentProps['aria-describedby']) {\r\n    content.setAttribute('aria-describedby', contentProps['aria-describedby'])\r\n  }\r\n  content.setAttribute('data-modalkit-content', '')\r\n  content.setAttribute('data-state', contentProps['data-state'])\r\n  content.setAttribute('tabindex', '-1')\r\n  content.style.backgroundColor = 'white'\r\n  content.style.borderRadius = '8px'\r\n  content.style.padding = '24px'\r\n  content.style.maxWidth = '400px'\r\n  content.style.width = '100%'\r\n  content.style.boxShadow = '0 25px 50px -12px rgba(0, 0, 0, 0.25)'\r\n  contentProps.ref(content)\r\n\r\n  // Add keyboard handler\r\n  content.addEventListener('keydown', (e) => {\r\n    contentProps.onKeyDown(e)\r\n  })\r\n\r\n  // Assemble\r\n  container.appendChild(content)\r\n  overlay.appendChild(container)\r\n  portal.appendChild(overlay)\r\n\r\n  return { portal, overlay, container, content }\r\n}\r\n\r\n/**\r\n * Create a dialog modal with common configuration\r\n */\r\nexport function createDialogModal(\r\n  customConfig?: Partial<ModalConfig>\r\n): ReturnType<typeof createModal> {\r\n  return createModal({\r\n    closeOnOverlayClick: false,\r\n    closeOnEscape: true,\r\n    trapFocus: true,\r\n    preventScroll: true,\r\n    role: 'alertdialog',\r\n    animated: false,\r\n    ...customConfig,\r\n  })\r\n}\r\n\r\n/**\r\n * Apply styles for a button\r\n */\r\nexport function styleButton(\r\n  button: HTMLButtonElement,\r\n  variant: DialogVariant = 'default'\r\n): void {\r\n  button.style.padding = '8px 16px'\r\n  button.style.borderRadius = '6px'\r\n  button.style.border = 'none'\r\n  button.style.cursor = 'pointer'\r\n  button.style.fontWeight = '500'\r\n  button.style.fontSize = '14px'\r\n  button.style.transition = 'background-color 0.2s'\r\n\r\n  switch (variant) {\r\n    case 'primary':\r\n      button.style.backgroundColor = '#3b82f6'\r\n      button.style.color = 'white'\r\n      break\r\n    case 'danger':\r\n    case 'error':\r\n      button.style.backgroundColor = '#ef4444'\r\n      button.style.color = 'white'\r\n      break\r\n    case 'warning':\r\n      button.style.backgroundColor = '#f59e0b'\r\n      button.style.color = 'white'\r\n      break\r\n    case 'success':\r\n      button.style.backgroundColor = '#10b981'\r\n      button.style.color = 'white'\r\n      break\r\n    case 'info':\r\n      button.style.backgroundColor = '#3b82f6'\r\n      button.style.color = 'white'\r\n      break\r\n    default:\r\n      button.style.backgroundColor = '#e5e7eb'\r\n      button.style.color = '#374151'\r\n  }\r\n}\r\n\r\n/**\r\n * Create dialog title element\r\n */\r\nexport function createTitleElement(\r\n  title: string,\r\n  modal: ReturnType<typeof createModal>\r\n): HTMLHeadingElement {\r\n  const titleProps = modal.getTitleProps()\r\n  const titleEl = document.createElement('h2')\r\n  titleEl.id = titleProps.id\r\n  titleEl.setAttribute('data-modalkit-title', '')\r\n  titleEl.textContent = title\r\n  titleEl.style.margin = '0 0 8px 0'\r\n  titleEl.style.fontSize = '18px'\r\n  titleEl.style.fontWeight = '600'\r\n  titleEl.style.color = '#111827'\r\n  return titleEl\r\n}\r\n\r\n/**\r\n * Create dialog message element\r\n */\r\nexport function createMessageElement(\r\n  message: string,\r\n  modal: ReturnType<typeof createModal>\r\n): HTMLParagraphElement {\r\n  const descProps = modal.getDescriptionProps()\r\n  const messageEl = document.createElement('p')\r\n  messageEl.id = descProps.id\r\n  messageEl.setAttribute('data-modalkit-description', '')\r\n  messageEl.textContent = message\r\n  messageEl.style.margin = '0 0 24px 0'\r\n  messageEl.style.fontSize = '14px'\r\n  messageEl.style.color = '#6b7280'\r\n  messageEl.style.lineHeight = '1.5'\r\n  return messageEl\r\n}\r\n\r\n/**\r\n * Create button container\r\n */\r\nexport function createButtonContainer(): HTMLDivElement {\r\n  const container = document.createElement('div')\r\n  container.style.display = 'flex'\r\n  container.style.justifyContent = 'flex-end'\r\n  container.style.gap = '8px'\r\n  return container\r\n}\r\n","/**\r\n * Confirm dialog implementation\r\n */\r\n\r\nimport type { ConfirmOptions, ConfirmOptionsAdvanced, ConfirmButton } from '../types'\r\nimport {\r\n  createDialogModal,\r\n  createDialogElements,\r\n  createTitleElement,\r\n  createMessageElement,\r\n  createButtonContainer,\r\n  styleButton,\r\n} from './base'\r\n\r\n/**\r\n * Default confirm options\r\n */\r\nconst DEFAULT_OPTIONS: Required<Omit<ConfirmOptions, 'title'>> = {\r\n  message: '',\r\n  confirmText: 'Confirm',\r\n  cancelText: 'Cancel',\r\n  variant: 'default',\r\n  closeOnOverlayClick: false,\r\n  closeOnEscape: true,\r\n}\r\n\r\n/**\r\n * Show a confirm dialog\r\n */\r\nexport function confirm(message: string): Promise<boolean>\r\nexport function confirm(options: ConfirmOptions): Promise<boolean>\r\nexport function confirm(options: ConfirmOptionsAdvanced): Promise<string | boolean>\r\nexport function confirm(\r\n  messageOrOptions: string | ConfirmOptions | ConfirmOptionsAdvanced\r\n): Promise<boolean | string> {\r\n  return new Promise((resolve) => {\r\n    // Normalize options\r\n    const options: ConfirmOptionsAdvanced =\r\n      typeof messageOrOptions === 'string'\r\n        ? { message: messageOrOptions }\r\n        : messageOrOptions\r\n\r\n    const {\r\n      title,\r\n      message,\r\n      confirmText = DEFAULT_OPTIONS.confirmText,\r\n      cancelText = DEFAULT_OPTIONS.cancelText,\r\n      variant = DEFAULT_OPTIONS.variant,\r\n      closeOnOverlayClick = DEFAULT_OPTIONS.closeOnOverlayClick,\r\n      closeOnEscape = DEFAULT_OPTIONS.closeOnEscape,\r\n      buttons,\r\n    } = options\r\n\r\n    // Track if resolved\r\n    let resolved = false\r\n\r\n    // Create modal\r\n    const modal = createDialogModal({\r\n      closeOnOverlayClick,\r\n      closeOnEscape,\r\n      onClose: () => {\r\n        if (!resolved) {\r\n          resolved = true\r\n          resolve(false)\r\n        }\r\n        cleanup()\r\n      },\r\n    })\r\n\r\n    // Create elements\r\n    const { portal, content } = createDialogElements(modal)\r\n\r\n    // Add title if provided\r\n    if (title) {\r\n      content.appendChild(createTitleElement(title, modal))\r\n    }\r\n\r\n    // Add message\r\n    content.appendChild(createMessageElement(message, modal))\r\n\r\n    // Create button container\r\n    const buttonContainer = createButtonContainer()\r\n\r\n    // Determine buttons to show\r\n    const buttonsToRender: ConfirmButton[] = buttons ?? [\r\n      { text: cancelText, value: false, variant: 'default' },\r\n      { text: confirmText, value: true, variant: variant === 'default' ? 'primary' : variant, autoFocus: true },\r\n    ]\r\n\r\n    // Create buttons\r\n    let autoFocusButton: HTMLButtonElement | null = null\r\n\r\n    buttonsToRender.forEach((btnConfig) => {\r\n      const button = document.createElement('button')\r\n      button.textContent = btnConfig.text\r\n      button.type = 'button'\r\n      styleButton(button, btnConfig.variant)\r\n\r\n      button.addEventListener('click', () => {\r\n        if (resolved) return // Prevent double resolution\r\n        resolved = true\r\n        modal.close() // Will trigger cleanup via onClose\r\n        resolve(btnConfig.value)\r\n      })\r\n\r\n      if (btnConfig.autoFocus) {\r\n        autoFocusButton = button\r\n      }\r\n\r\n      buttonContainer.appendChild(button)\r\n    })\r\n\r\n    content.appendChild(buttonContainer)\r\n\r\n    // Cleanup function\r\n    function cleanup(): void {\r\n      modal.destroy()\r\n      portal.remove()\r\n    }\r\n\r\n    // Mount and open\r\n    document.body.appendChild(portal)\r\n    modal.open()\r\n\r\n    // Focus the auto-focus button\r\n    if (autoFocusButton) {\r\n      requestAnimationFrame(() => {\r\n        autoFocusButton?.focus()\r\n      })\r\n    }\r\n  })\r\n}\r\n","/**\r\n * useConfirm hook for React\r\n */\r\n\r\nimport { useCallback } from 'react'\r\nimport { confirm as confirmFn } from '../../../dialogs/confirm'\r\nimport type { ConfirmOptions, ConfirmOptionsAdvanced } from '../../../types'\r\n\r\n/**\r\n * Hook to show confirm dialogs\r\n */\r\nexport function useConfirm() {\r\n  return useCallback(\r\n    (\r\n      messageOrOptions: string | ConfirmOptions | ConfirmOptionsAdvanced\r\n    ): Promise<boolean | string> => {\r\n      if (typeof messageOrOptions === 'string') {\r\n        return confirmFn(messageOrOptions)\r\n      }\r\n      if ('buttons' in messageOrOptions && messageOrOptions.buttons) {\r\n        return confirmFn(messageOrOptions as ConfirmOptionsAdvanced)\r\n      }\r\n      return confirmFn(messageOrOptions as ConfirmOptions)\r\n    },\r\n    []\r\n  )\r\n}\r\n","/**\r\n * Alert dialog implementation\r\n */\r\n\r\nimport type { AlertOptions } from '../types'\r\nimport {\r\n  createDialogModal,\r\n  createDialogElements,\r\n  createTitleElement,\r\n  createMessageElement,\r\n  createButtonContainer,\r\n  styleButton,\r\n  type DialogVariant,\r\n} from './base'\r\n\r\n/**\r\n * Default alert options\r\n */\r\nconst DEFAULT_OPTIONS: Required<Omit<AlertOptions, 'title'>> = {\r\n  message: '',\r\n  confirmText: 'OK',\r\n  variant: 'default',\r\n}\r\n\r\n/**\r\n * Map alert variants to button variants\r\n */\r\nfunction getButtonVariant(alertVariant: AlertOptions['variant']): DialogVariant {\r\n  switch (alertVariant) {\r\n    case 'success':\r\n      return 'success'\r\n    case 'warning':\r\n      return 'warning'\r\n    case 'error':\r\n      return 'danger'\r\n    case 'info':\r\n      return 'info'\r\n    default:\r\n      return 'primary'\r\n  }\r\n}\r\n\r\n/**\r\n * Show an alert dialog\r\n */\r\nexport function alert(message: string): Promise<void>\r\nexport function alert(options: AlertOptions): Promise<void>\r\nexport function alert(messageOrOptions: string | AlertOptions): Promise<void> {\r\n  return new Promise((resolve) => {\r\n    // Normalize options\r\n    const options: AlertOptions =\r\n      typeof messageOrOptions === 'string'\r\n        ? { message: messageOrOptions }\r\n        : messageOrOptions\r\n\r\n    const {\r\n      title,\r\n      message,\r\n      confirmText = DEFAULT_OPTIONS.confirmText,\r\n      variant = DEFAULT_OPTIONS.variant,\r\n    } = options\r\n\r\n    // Create modal\r\n    const modal = createDialogModal({\r\n      closeOnOverlayClick: false,\r\n      closeOnEscape: true,\r\n      onClose: () => {\r\n        resolve()\r\n        cleanup()\r\n      },\r\n    })\r\n\r\n    // Create elements\r\n    const { portal, content } = createDialogElements(modal)\r\n\r\n    // Add title if provided\r\n    if (title) {\r\n      content.appendChild(createTitleElement(title, modal))\r\n    }\r\n\r\n    // Add message\r\n    content.appendChild(createMessageElement(message, modal))\r\n\r\n    // Create button container\r\n    const buttonContainer = createButtonContainer()\r\n\r\n    // Create confirm button\r\n    const confirmButton = document.createElement('button')\r\n    confirmButton.textContent = confirmText\r\n    confirmButton.type = 'button'\r\n    styleButton(confirmButton, getButtonVariant(variant))\r\n\r\n    confirmButton.addEventListener('click', () => {\r\n      modal.close()\r\n    })\r\n\r\n    buttonContainer.appendChild(confirmButton)\r\n    content.appendChild(buttonContainer)\r\n\r\n    // Cleanup function\r\n    function cleanup(): void {\r\n      modal.destroy()\r\n      portal.remove()\r\n    }\r\n\r\n    // Mount and open\r\n    document.body.appendChild(portal)\r\n    modal.open()\r\n\r\n    // Focus the confirm button\r\n    requestAnimationFrame(() => {\r\n      confirmButton.focus()\r\n    })\r\n  })\r\n}\r\n","/**\r\n * useAlert hook for React\r\n */\r\n\r\nimport { useCallback } from 'react'\r\nimport { alert as alertFn } from '../../../dialogs/alert'\r\nimport type { AlertOptions } from '../../../types'\r\n\r\n/**\r\n * Hook to show alert dialogs\r\n */\r\nexport function useAlert() {\r\n  return useCallback(\r\n    (messageOrOptions: string | AlertOptions): Promise<void> => {\r\n      if (typeof messageOrOptions === 'string') {\r\n        return alertFn(messageOrOptions)\r\n      }\r\n      return alertFn(messageOrOptions)\r\n    },\r\n    []\r\n  )\r\n}\r\n","/**\r\n * Prompt dialog implementation\r\n */\r\n\r\nimport type { PromptOptions } from '../types'\r\nimport {\r\n  createDialogModal,\r\n  createDialogElements,\r\n  createTitleElement,\r\n  createMessageElement,\r\n  createButtonContainer,\r\n  styleButton,\r\n} from './base'\r\n\r\n/**\r\n * Default prompt options\r\n */\r\nconst DEFAULT_OPTIONS: Required<\r\n  Omit<PromptOptions, 'title' | 'message' | 'validate'>\r\n> = {\r\n  placeholder: '',\r\n  defaultValue: '',\r\n  confirmText: 'OK',\r\n  cancelText: 'Cancel',\r\n  type: 'text',\r\n  required: false,\r\n  minLength: 0,\r\n  maxLength: Infinity,\r\n}\r\n\r\n/**\r\n * Show a prompt dialog\r\n */\r\nexport function prompt(message: string): Promise<string | null>\r\nexport function prompt(options: PromptOptions): Promise<string | null>\r\nexport function prompt(\r\n  messageOrOptions: string | PromptOptions\r\n): Promise<string | null> {\r\n  return new Promise((resolve) => {\r\n    // Normalize options\r\n    const options: PromptOptions =\r\n      typeof messageOrOptions === 'string'\r\n        ? { message: messageOrOptions }\r\n        : messageOrOptions\r\n\r\n    const {\r\n      title,\r\n      message,\r\n      placeholder = DEFAULT_OPTIONS.placeholder,\r\n      defaultValue = DEFAULT_OPTIONS.defaultValue,\r\n      confirmText = DEFAULT_OPTIONS.confirmText,\r\n      cancelText = DEFAULT_OPTIONS.cancelText,\r\n      type = DEFAULT_OPTIONS.type,\r\n      validate,\r\n      required = DEFAULT_OPTIONS.required,\r\n      minLength = DEFAULT_OPTIONS.minLength,\r\n      maxLength = DEFAULT_OPTIONS.maxLength,\r\n    } = options\r\n\r\n    // Track if resolved\r\n    let resolved = false\r\n\r\n    // Create modal\r\n    const modal = createDialogModal({\r\n      closeOnOverlayClick: false,\r\n      closeOnEscape: true,\r\n      onClose: () => {\r\n        if (!resolved) {\r\n          resolved = true\r\n          resolve(null)\r\n        }\r\n        cleanup()\r\n      },\r\n    })\r\n\r\n    // Create elements\r\n    const { portal, content } = createDialogElements(modal)\r\n\r\n    // Add title if provided\r\n    if (title) {\r\n      content.appendChild(createTitleElement(title, modal))\r\n    }\r\n\r\n    // Add message if provided\r\n    if (message) {\r\n      content.appendChild(createMessageElement(message, modal))\r\n    }\r\n\r\n    // Create input container\r\n    const inputContainer = document.createElement('div')\r\n    inputContainer.style.marginBottom = '16px'\r\n\r\n    // Create input\r\n    const input = document.createElement('input')\r\n    input.type = type\r\n    input.value = defaultValue\r\n    if (placeholder) input.placeholder = placeholder\r\n    if (required) input.required = true\r\n    if (minLength > 0) input.minLength = minLength\r\n    if (maxLength < Infinity) input.maxLength = maxLength\r\n\r\n    input.style.width = '100%'\r\n    input.style.padding = '8px 12px'\r\n    input.style.border = '1px solid #d1d5db'\r\n    input.style.borderRadius = '6px'\r\n    input.style.fontSize = '14px'\r\n    input.style.outline = 'none'\r\n    input.style.boxSizing = 'border-box'\r\n\r\n    input.addEventListener('focus', () => {\r\n      input.style.borderColor = '#3b82f6'\r\n      input.style.boxShadow = '0 0 0 3px rgba(59, 130, 246, 0.1)'\r\n    })\r\n\r\n    input.addEventListener('blur', () => {\r\n      input.style.borderColor = '#d1d5db'\r\n      input.style.boxShadow = 'none'\r\n    })\r\n\r\n    // Create error message element\r\n    const errorEl = document.createElement('p')\r\n    errorEl.style.color = '#ef4444'\r\n    errorEl.style.fontSize = '12px'\r\n    errorEl.style.marginTop = '4px'\r\n    errorEl.style.marginBottom = '0'\r\n    errorEl.style.display = 'none'\r\n\r\n    inputContainer.appendChild(input)\r\n    inputContainer.appendChild(errorEl)\r\n    content.appendChild(inputContainer)\r\n\r\n    // Validation function\r\n    function validateInput(): boolean | string {\r\n      const value = input.value\r\n\r\n      // Required check\r\n      if (required && !value.trim()) {\r\n        return 'This field is required'\r\n      }\r\n\r\n      // Min length check\r\n      if (minLength > 0 && value.length < minLength) {\r\n        return `Minimum ${minLength} characters required`\r\n      }\r\n\r\n      // Max length check\r\n      if (maxLength < Infinity && value.length > maxLength) {\r\n        return `Maximum ${maxLength} characters allowed`\r\n      }\r\n\r\n      // Custom validation\r\n      if (validate) {\r\n        return validate(value)\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    function showError(message: string): void {\r\n      errorEl.textContent = message\r\n      errorEl.style.display = 'block'\r\n      input.style.borderColor = '#ef4444'\r\n    }\r\n\r\n    function clearError(): void {\r\n      errorEl.style.display = 'none'\r\n      input.style.borderColor = '#d1d5db'\r\n    }\r\n\r\n    function handleSubmit(): void {\r\n      if (resolved) return // Prevent double resolution\r\n      clearError()\r\n      const validationResult = validateInput()\r\n\r\n      if (validationResult !== true) {\r\n        const errorMessage =\r\n          typeof validationResult === 'string'\r\n            ? validationResult\r\n            : 'Invalid input'\r\n        showError(errorMessage)\r\n        input.focus()\r\n        return\r\n      }\r\n\r\n      resolved = true\r\n      modal.close() // Will trigger cleanup via onClose\r\n      resolve(input.value)\r\n    }\r\n\r\n    // Handle Enter key\r\n    input.addEventListener('keydown', (e) => {\r\n      if (e.key === 'Enter') {\r\n        e.preventDefault()\r\n        handleSubmit()\r\n      }\r\n    })\r\n\r\n    // Clear error on input\r\n    input.addEventListener('input', clearError)\r\n\r\n    // Create button container\r\n    const buttonContainer = createButtonContainer()\r\n\r\n    // Cancel button\r\n    const cancelButton = document.createElement('button')\r\n    cancelButton.textContent = cancelText\r\n    cancelButton.type = 'button'\r\n    styleButton(cancelButton, 'default')\r\n\r\n    cancelButton.addEventListener('click', () => {\r\n      if (resolved) return // Prevent double resolution\r\n      resolved = true\r\n      modal.close() // Will trigger cleanup via onClose\r\n      resolve(null)\r\n    })\r\n\r\n    // Confirm button\r\n    const confirmButton = document.createElement('button')\r\n    confirmButton.textContent = confirmText\r\n    confirmButton.type = 'button'\r\n    styleButton(confirmButton, 'primary')\r\n\r\n    confirmButton.addEventListener('click', handleSubmit)\r\n\r\n    buttonContainer.appendChild(cancelButton)\r\n    buttonContainer.appendChild(confirmButton)\r\n    content.appendChild(buttonContainer)\r\n\r\n    // Cleanup function\r\n    function cleanup(): void {\r\n      modal.destroy()\r\n      portal.remove()\r\n    }\r\n\r\n    // Mount and open\r\n    document.body.appendChild(portal)\r\n    modal.open()\r\n\r\n    // Focus the input\r\n    requestAnimationFrame(() => {\r\n      input.focus()\r\n      // Select default value\r\n      if (defaultValue) {\r\n        input.select()\r\n      }\r\n    })\r\n  })\r\n}\r\n","/**\r\n * usePrompt hook for React\r\n */\r\n\r\nimport { useCallback } from 'react'\r\nimport { prompt as promptFn } from '../../../dialogs/prompt'\r\nimport type { PromptOptions } from '../../../types'\r\n\r\n/**\r\n * Hook to show prompt dialogs\r\n */\r\nexport function usePrompt() {\r\n  return useCallback(\r\n    (messageOrOptions: string | PromptOptions): Promise<string | null> => {\r\n      if (typeof messageOrOptions === 'string') {\r\n        return promptFn(messageOrOptions)\r\n      }\r\n      return promptFn(messageOrOptions)\r\n    },\r\n    []\r\n  )\r\n}\r\n","/**\r\n * Modal compound component for React\r\n */\r\n\r\nimport React, {\r\n  createContext,\r\n  useContext,\r\n  useState,\r\n  useEffect,\r\n  useRef,\r\n  useMemo,\r\n  type ReactNode,\r\n} from 'react'\r\nimport { createModal } from '../../../core/modal'\r\nimport type { Modal as ModalType, ModalConfig, ModalState } from '../../../types'\r\n\r\n/**\r\n * Modal context value\r\n */\r\ninterface ModalContextValue {\r\n  modal: ModalType\r\n  state: ModalState\r\n}\r\n\r\n/**\r\n * Modal context\r\n */\r\nconst ModalComponentContext = createContext<ModalContextValue | null>(null)\r\n\r\n/**\r\n * Hook to access modal context within compound components\r\n */\r\nexport function useModalComponentContext(): ModalContextValue {\r\n  const context = useContext(ModalComponentContext)\r\n  if (!context) {\r\n    throw new Error('Modal compound components must be used within a Modal component')\r\n  }\r\n  return context\r\n}\r\n\r\n/**\r\n * Modal component props\r\n */\r\nexport interface ModalProps extends Omit<ModalConfig, 'open' | 'defaultOpen'> {\r\n  /** Whether the modal is open (controlled) */\r\n  open?: boolean\r\n  /** Initial open state (uncontrolled) */\r\n  defaultOpen?: boolean\r\n  /** Callback when open state changes */\r\n  onOpenChange?: (open: boolean) => void\r\n  /** Children */\r\n  children: ReactNode\r\n}\r\n\r\n/**\r\n * Modal root component\r\n */\r\nexport function Modal({\r\n  open,\r\n  defaultOpen = false,\r\n  onOpenChange,\r\n  children,\r\n  ...config\r\n}: ModalProps): React.ReactElement {\r\n  // Create modal instance\r\n  const modalRef = useRef<ModalType | null>(null)\r\n\r\n  if (!modalRef.current) {\r\n    modalRef.current = createModal({\r\n      ...config,\r\n      defaultOpen: open ?? defaultOpen,\r\n      onOpenChange,\r\n    })\r\n  }\r\n\r\n  // Track state\r\n  const [state, setState] = useState<ModalState>(() =>\r\n    modalRef.current!.getState()\r\n  )\r\n\r\n  // Handle controlled mode\r\n  useEffect(() => {\r\n    const modal = modalRef.current\r\n    if (!modal) return\r\n\r\n    if (open !== undefined) {\r\n      if (open && !modal.isOpen()) {\r\n        modal.open()\r\n      } else if (!open && modal.isOpen()) {\r\n        modal.close()\r\n      }\r\n    }\r\n  }, [open])\r\n\r\n  // Subscribe to state changes\r\n  useEffect(() => {\r\n    const modal = modalRef.current\r\n    if (!modal) return\r\n\r\n    return modal.subscribe((newState) => {\r\n      setState(newState)\r\n    })\r\n  }, [])\r\n\r\n  // Update config - track previous config to avoid unnecessary updates\r\n  const prevConfigRef = useRef<string>('')\r\n\r\n  useEffect(() => {\r\n    const configString = JSON.stringify({ ...config, onOpenChange })\r\n    if (prevConfigRef.current !== configString) {\r\n      prevConfigRef.current = configString\r\n      modalRef.current?.setConfig({\r\n        ...config,\r\n        onOpenChange,\r\n      })\r\n    }\r\n  }, [config, onOpenChange])\r\n\r\n  // Cleanup\r\n  useEffect(() => {\r\n    return () => {\r\n      modalRef.current?.destroy()\r\n    }\r\n  }, [])\r\n\r\n  const value = useMemo(\r\n    () => ({\r\n      modal: modalRef.current!,\r\n      state,\r\n    }),\r\n    [state]\r\n  )\r\n\r\n  return (\r\n    <ModalComponentContext.Provider value={value}>\r\n      {children}\r\n    </ModalComponentContext.Provider>\r\n  )\r\n}\r\n\r\nexport { ModalComponentContext }\r\n","/**\r\n * ModalTrigger component\r\n */\r\n\r\nimport React, { type ReactElement, cloneElement, isValidElement } from 'react'\r\nimport { useModalComponentContext } from './Modal'\r\n\r\n/**\r\n * ModalTrigger props\r\n */\r\nexport interface ModalTriggerProps {\r\n  /** Render as child element instead of button */\r\n  asChild?: boolean\r\n  /** Children */\r\n  children: React.ReactNode\r\n  /** Additional class name */\r\n  className?: string\r\n}\r\n\r\n/**\r\n * Modal trigger button component\r\n */\r\nexport function ModalTrigger({\r\n  asChild = false,\r\n  children,\r\n  className,\r\n}: ModalTriggerProps): ReactElement {\r\n  const { modal } = useModalComponentContext()\r\n  const triggerProps = modal.getTriggerProps()\r\n\r\n  const handleClick = (e: React.MouseEvent) => {\r\n    triggerProps.onClick(e as unknown as MouseEvent)\r\n  }\r\n\r\n  if (asChild && isValidElement(children)) {\r\n    return cloneElement(children as ReactElement<Record<string, unknown>>, {\r\n      ...triggerProps,\r\n      onClick: handleClick,\r\n      className: className\r\n        ? `${(children.props as Record<string, unknown>).className || ''} ${className}`.trim()\r\n        : (children.props as Record<string, unknown>).className,\r\n    })\r\n  }\r\n\r\n  return (\r\n    <button\r\n      type={triggerProps.type}\r\n      aria-haspopup={triggerProps['aria-haspopup']}\r\n      aria-expanded={triggerProps['aria-expanded']}\r\n      data-modalkit-trigger=\"\"\r\n      onClick={handleClick}\r\n      className={className}\r\n    >\r\n      {children}\r\n    </button>\r\n  )\r\n}\r\n","/**\r\n * ModalPortal component\r\n */\r\n\r\nimport { type ReactNode, type ReactElement } from 'react'\r\nimport { createPortal } from 'react-dom'\r\nimport { useModalComponentContext } from './Modal'\r\n\r\n/**\r\n * ModalPortal props\r\n */\r\nexport interface ModalPortalProps {\r\n  /** Container element for portal */\r\n  container?: HTMLElement\r\n  /** Children */\r\n  children: ReactNode\r\n}\r\n\r\n/**\r\n * Modal portal component - renders children in a portal\r\n */\r\nexport function ModalPortal({\r\n  container,\r\n  children,\r\n}: ModalPortalProps): ReactElement | null {\r\n  const { modal, state } = useModalComponentContext()\r\n\r\n  // Don't render if not mounted\r\n  if (!state.mounted) {\r\n    return null\r\n  }\r\n\r\n  const portalTarget = container ?? modal.getPortalTarget()\r\n  const portalProps = modal.getPortalProps()\r\n\r\n  const content = (\r\n    <div\r\n      data-modalkit-portal={portalProps['data-modalkit-portal']}\r\n      data-state={portalProps['data-state']}\r\n    >\r\n      {children}\r\n    </div>\r\n  )\r\n\r\n  return createPortal(content, portalTarget)\r\n}\r\n","/**\r\n * ModalOverlay component\r\n */\r\n\r\nimport React, {\r\n  type ReactNode,\r\n  type ReactElement,\r\n  type CSSProperties,\r\n  forwardRef,\r\n} from 'react'\r\nimport { useModalComponentContext } from './Modal'\r\n\r\n/**\r\n * ModalOverlay props\r\n */\r\nexport interface ModalOverlayProps {\r\n  /** Children */\r\n  children?: ReactNode\r\n  /** Additional class name */\r\n  className?: string\r\n  /** Additional styles */\r\n  style?: CSSProperties\r\n}\r\n\r\n/**\r\n * Modal overlay/backdrop component\r\n */\r\nexport const ModalOverlay = forwardRef<HTMLDivElement, ModalOverlayProps>(\r\n  function ModalOverlay({ children, className, style }, forwardedRef): ReactElement {\r\n    const { modal } = useModalComponentContext()\r\n    const overlayProps = modal.getOverlayProps()\r\n\r\n    const handleClick = (e: React.MouseEvent<HTMLDivElement>) => {\r\n      overlayProps.onClick(e as unknown as MouseEvent)\r\n    }\r\n\r\n    return (\r\n      <div\r\n        ref={(el) => {\r\n          overlayProps.ref(el)\r\n          if (typeof forwardedRef === 'function') {\r\n            forwardedRef(el)\r\n          } else if (forwardedRef) {\r\n            forwardedRef.current = el\r\n          }\r\n        }}\r\n        data-modalkit-overlay=\"\"\r\n        data-state={overlayProps['data-state']}\r\n        onClick={handleClick}\r\n        className={className}\r\n        style={{\r\n          ...overlayProps.style,\r\n          backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n          ...style,\r\n        }}\r\n      >\r\n        {children}\r\n      </div>\r\n    )\r\n  }\r\n)\r\n","/**\r\n * ModalContainer component\r\n */\r\n\r\nimport React, {\r\n  type ReactNode,\r\n  type ReactElement,\r\n  type CSSProperties,\r\n  forwardRef,\r\n} from 'react'\r\nimport { useModalComponentContext } from './Modal'\r\n\r\n/**\r\n * Position options\r\n */\r\nexport type ModalPosition = 'center' | 'top'\r\n\r\n/**\r\n * ModalContainer props\r\n */\r\nexport interface ModalContainerProps {\r\n  /** Position of modal content */\r\n  position?: ModalPosition\r\n  /** Children */\r\n  children: ReactNode\r\n  /** Additional class name */\r\n  className?: string\r\n  /** Additional styles */\r\n  style?: CSSProperties\r\n}\r\n\r\n/**\r\n * Modal container component - handles positioning\r\n */\r\nexport const ModalContainer = forwardRef<HTMLDivElement, ModalContainerProps>(\r\n  function ModalContainer(\r\n    { position = 'center', children, className, style },\r\n    forwardedRef\r\n  ): ReactElement {\r\n    const { modal } = useModalComponentContext()\r\n    const containerProps = modal.getContainerProps()\r\n\r\n    const handleClick = (e: React.MouseEvent<HTMLDivElement>) => {\r\n      containerProps.onClick(e as unknown as MouseEvent)\r\n    }\r\n\r\n    // Adjust alignment based on position\r\n    const alignItems = position === 'top' ? 'flex-start' : 'center'\r\n    const paddingTop = position === 'top' ? '10vh' : undefined\r\n\r\n    return (\r\n      <div\r\n        ref={(el) => {\r\n          containerProps.ref(el)\r\n          if (typeof forwardedRef === 'function') {\r\n            forwardedRef(el)\r\n          } else if (forwardedRef) {\r\n            forwardedRef.current = el\r\n          }\r\n        }}\r\n        data-modalkit-container=\"\"\r\n        data-state={containerProps['data-state']}\r\n        onClick={handleClick}\r\n        className={className}\r\n        style={{\r\n          ...containerProps.style,\r\n          alignItems,\r\n          paddingTop,\r\n          ...style,\r\n        }}\r\n      >\r\n        {children}\r\n      </div>\r\n    )\r\n  }\r\n)\r\n","/**\r\n * ModalContent component\r\n */\r\n\r\nimport React, {\r\n  type ReactNode,\r\n  type ReactElement,\r\n  type CSSProperties,\r\n  forwardRef,\r\n} from 'react'\r\nimport { useModalComponentContext } from './Modal'\r\n\r\n/**\r\n * Size options\r\n */\r\nexport type ModalSize = 'sm' | 'md' | 'lg' | 'xl' | 'full'\r\n\r\n/**\r\n * Size to max-width mapping\r\n */\r\nconst SIZE_MAP: Record<ModalSize, string> = {\r\n  sm: '400px',\r\n  md: '500px',\r\n  lg: '600px',\r\n  xl: '800px',\r\n  full: '100%',\r\n}\r\n\r\n/**\r\n * ModalContent props\r\n */\r\nexport interface ModalContentProps {\r\n  /** Size of the modal */\r\n  size?: ModalSize\r\n  /** ARIA role override */\r\n  role?: 'dialog' | 'alertdialog'\r\n  /** Custom aria-label */\r\n  'aria-label'?: string\r\n  /** Children */\r\n  children: ReactNode\r\n  /** Additional class name */\r\n  className?: string\r\n  /** Additional styles */\r\n  style?: CSSProperties\r\n}\r\n\r\n/**\r\n * Modal content component - the actual modal box\r\n */\r\nexport const ModalContent = forwardRef<HTMLDivElement, ModalContentProps>(\r\n  function ModalContent(\r\n    { size = 'md', role, 'aria-label': ariaLabel, children, className, style },\r\n    forwardedRef\r\n  ): ReactElement {\r\n    const { modal } = useModalComponentContext()\r\n    const contentProps = modal.getContentProps()\r\n\r\n    const handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\r\n      contentProps.onKeyDown(e as unknown as KeyboardEvent)\r\n    }\r\n\r\n    return (\r\n      <div\r\n        ref={(el) => {\r\n          contentProps.ref(el)\r\n          if (typeof forwardedRef === 'function') {\r\n            forwardedRef(el)\r\n          } else if (forwardedRef) {\r\n            forwardedRef.current = el\r\n          }\r\n        }}\r\n        role={role ?? contentProps.role}\r\n        aria-modal={contentProps['aria-modal']}\r\n        aria-label={ariaLabel ?? contentProps['aria-label']}\r\n        aria-labelledby={ariaLabel ? undefined : contentProps['aria-labelledby']}\r\n        aria-describedby={contentProps['aria-describedby']}\r\n        data-modalkit-content=\"\"\r\n        data-state={contentProps['data-state']}\r\n        tabIndex={contentProps.tabIndex}\r\n        onKeyDown={handleKeyDown}\r\n        className={className}\r\n        style={{\r\n          backgroundColor: 'white',\r\n          borderRadius: '8px',\r\n          maxWidth: SIZE_MAP[size],\r\n          width: size === 'full' ? '100vw' : '100%',\r\n          height: size === 'full' ? '100vh' : 'auto',\r\n          maxHeight: size === 'full' ? '100vh' : '90vh',\r\n          overflow: 'auto',\r\n          boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25)',\r\n          ...style,\r\n        }}\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {children}\r\n      </div>\r\n    )\r\n  }\r\n)\r\n","/**\r\n * ModalHeader component\r\n */\r\n\r\nimport { type ReactNode, type ReactElement, type CSSProperties } from 'react'\r\n\r\n/**\r\n * ModalHeader props\r\n */\r\nexport interface ModalHeaderProps {\r\n  /** Children */\r\n  children: ReactNode\r\n  /** Additional class name */\r\n  className?: string\r\n  /** Additional styles */\r\n  style?: CSSProperties\r\n}\r\n\r\n/**\r\n * Modal header component - contains title and close button\r\n */\r\nexport function ModalHeader({\r\n  children,\r\n  className,\r\n  style,\r\n}: ModalHeaderProps): ReactElement {\r\n  return (\r\n    <div\r\n      className={className}\r\n      style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'space-between',\r\n        padding: '16px 24px',\r\n        borderBottom: '1px solid #e5e7eb',\r\n        ...style,\r\n      }}\r\n    >\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * ModalTitle component\r\n */\r\n\r\nimport { type ReactNode, type ReactElement, type CSSProperties } from 'react'\r\nimport { useModalComponentContext } from './Modal'\r\n\r\n/**\r\n * ModalTitle props\r\n */\r\nexport interface ModalTitleProps {\r\n  /** Custom ID */\r\n  id?: string\r\n  /** Children */\r\n  children: ReactNode\r\n  /** Additional class name */\r\n  className?: string\r\n  /** Additional styles */\r\n  style?: CSSProperties\r\n}\r\n\r\n/**\r\n * Modal title component\r\n */\r\nexport function ModalTitle({\r\n  id,\r\n  children,\r\n  className,\r\n  style,\r\n}: ModalTitleProps): ReactElement {\r\n  const { modal } = useModalComponentContext()\r\n  const titleProps = modal.getTitleProps(id)\r\n\r\n  return (\r\n    <h2\r\n      id={titleProps.id}\r\n      data-modalkit-title=\"\"\r\n      className={className}\r\n      style={{\r\n        margin: 0,\r\n        fontSize: '18px',\r\n        fontWeight: 600,\r\n        color: '#111827',\r\n        ...style,\r\n      }}\r\n    >\r\n      {children}\r\n    </h2>\r\n  )\r\n}\r\n","/**\r\n * ModalDescription component\r\n */\r\n\r\nimport { type ReactNode, type ReactElement, type CSSProperties } from 'react'\r\nimport { useModalComponentContext } from './Modal'\r\n\r\n/**\r\n * ModalDescription props\r\n */\r\nexport interface ModalDescriptionProps {\r\n  /** Custom ID */\r\n  id?: string\r\n  /** Children */\r\n  children: ReactNode\r\n  /** Additional class name */\r\n  className?: string\r\n  /** Additional styles */\r\n  style?: CSSProperties\r\n}\r\n\r\n/**\r\n * Modal description component\r\n */\r\nexport function ModalDescription({\r\n  id,\r\n  children,\r\n  className,\r\n  style,\r\n}: ModalDescriptionProps): ReactElement {\r\n  const { modal } = useModalComponentContext()\r\n  const descProps = modal.getDescriptionProps(id)\r\n\r\n  return (\r\n    <p\r\n      id={descProps.id}\r\n      data-modalkit-description=\"\"\r\n      className={className}\r\n      style={{\r\n        margin: 0,\r\n        fontSize: '14px',\r\n        color: '#6b7280',\r\n        lineHeight: 1.5,\r\n        ...style,\r\n      }}\r\n    >\r\n      {children}\r\n    </p>\r\n  )\r\n}\r\n","/**\r\n * ModalBody component\r\n */\r\n\r\nimport { type ReactNode, type ReactElement, type CSSProperties } from 'react'\r\n\r\n/**\r\n * ModalBody props\r\n */\r\nexport interface ModalBodyProps {\r\n  /** Children */\r\n  children: ReactNode\r\n  /** Additional class name */\r\n  className?: string\r\n  /** Additional styles */\r\n  style?: CSSProperties\r\n}\r\n\r\n/**\r\n * Modal body component - main content area\r\n */\r\nexport function ModalBody({\r\n  children,\r\n  className,\r\n  style,\r\n}: ModalBodyProps): ReactElement {\r\n  return (\r\n    <div\r\n      className={className}\r\n      style={{\r\n        padding: '24px',\r\n        ...style,\r\n      }}\r\n    >\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * ModalFooter component\r\n */\r\n\r\nimport { type ReactNode, type ReactElement, type CSSProperties } from 'react'\r\n\r\n/**\r\n * ModalFooter props\r\n */\r\nexport interface ModalFooterProps {\r\n  /** Children */\r\n  children: ReactNode\r\n  /** Additional class name */\r\n  className?: string\r\n  /** Additional styles */\r\n  style?: CSSProperties\r\n}\r\n\r\n/**\r\n * Modal footer component - contains action buttons\r\n */\r\nexport function ModalFooter({\r\n  children,\r\n  className,\r\n  style,\r\n}: ModalFooterProps): ReactElement {\r\n  return (\r\n    <div\r\n      className={className}\r\n      style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'flex-end',\r\n        gap: '8px',\r\n        padding: '16px 24px',\r\n        borderTop: '1px solid #e5e7eb',\r\n        ...style,\r\n      }}\r\n    >\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n","/**\r\n * ModalClose component\r\n */\r\n\r\nimport React, {\r\n  type ReactElement,\r\n  type CSSProperties,\r\n  cloneElement,\r\n  isValidElement,\r\n} from 'react'\r\nimport { useModalComponentContext } from './Modal'\r\n\r\n/**\r\n * ModalClose props\r\n */\r\nexport interface ModalCloseProps {\r\n  /** Render as child element instead of button */\r\n  asChild?: boolean\r\n  /** Custom aria-label */\r\n  'aria-label'?: string\r\n  /** Children */\r\n  children?: React.ReactNode\r\n  /** Additional class name */\r\n  className?: string\r\n  /** Additional styles */\r\n  style?: CSSProperties\r\n}\r\n\r\n/**\r\n * Modal close button component\r\n */\r\nexport function ModalClose({\r\n  asChild = false,\r\n  'aria-label': ariaLabel,\r\n  children,\r\n  className,\r\n  style,\r\n}: ModalCloseProps): ReactElement {\r\n  const { modal } = useModalComponentContext()\r\n  const closeProps = modal.getCloseButtonProps()\r\n\r\n  const handleClick = (e: React.MouseEvent) => {\r\n    closeProps.onClick(e as unknown as MouseEvent)\r\n  }\r\n\r\n  if (asChild && isValidElement(children)) {\r\n    return cloneElement(children as ReactElement<Record<string, unknown>>, {\r\n      ...closeProps,\r\n      'aria-label': ariaLabel ?? closeProps['aria-label'],\r\n      onClick: handleClick,\r\n      className: className\r\n        ? `${(children.props as Record<string, unknown>).className || ''} ${className}`.trim()\r\n        : (children.props as Record<string, unknown>).className,\r\n    })\r\n  }\r\n\r\n  return (\r\n    <button\r\n      type={closeProps.type}\r\n      aria-label={ariaLabel ?? closeProps['aria-label']}\r\n      data-modalkit-close=\"\"\r\n      onClick={handleClick}\r\n      className={className}\r\n      style={{\r\n        background: 'none',\r\n        border: 'none',\r\n        padding: '4px',\r\n        cursor: 'pointer',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        color: '#6b7280',\r\n        borderRadius: '4px',\r\n        ...style,\r\n      }}\r\n    >\r\n      {children ?? (\r\n        <svg\r\n          width=\"20\"\r\n          height=\"20\"\r\n          viewBox=\"0 0 20 20\"\r\n          fill=\"none\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <path\r\n            d=\"M15 5L5 15M5 5L15 15\"\r\n            stroke=\"currentColor\"\r\n            strokeWidth=\"2\"\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n          />\r\n        </svg>\r\n      )}\r\n    </button>\r\n  )\r\n}\r\n","/**\r\n * ConfirmDialog component\r\n */\r\n\r\nimport { type ReactElement, type CSSProperties } from 'react'\r\nimport { Modal } from './Modal'\r\nimport { ModalPortal } from './ModalPortal'\r\nimport { ModalOverlay } from './ModalOverlay'\r\nimport { ModalContainer } from './ModalContainer'\r\nimport { ModalContent } from './ModalContent'\r\nimport { ModalHeader } from './ModalHeader'\r\nimport { ModalTitle } from './ModalTitle'\r\nimport { ModalBody } from './ModalBody'\r\nimport { ModalDescription } from './ModalDescription'\r\nimport { ModalFooter } from './ModalFooter'\r\n\r\n/**\r\n * Variant types\r\n */\r\nexport type ConfirmDialogVariant = 'default' | 'danger' | 'warning'\r\n\r\n/**\r\n * ConfirmDialog props\r\n */\r\nexport interface ConfirmDialogProps {\r\n  /** Whether the dialog is open */\r\n  open: boolean\r\n  /** Callback when open state changes */\r\n  onOpenChange: (open: boolean) => void\r\n  /** Dialog title */\r\n  title?: string\r\n  /** Dialog description/message */\r\n  description: string\r\n  /** Confirm button text */\r\n  confirmText?: string\r\n  /** Cancel button text */\r\n  cancelText?: string\r\n  /** Visual variant */\r\n  variant?: ConfirmDialogVariant\r\n  /** Called when confirm is clicked */\r\n  onConfirm: () => void\r\n  /** Called when cancel is clicked */\r\n  onCancel?: () => void\r\n  /** Additional class name for content */\r\n  className?: string\r\n  /** Additional styles for content */\r\n  style?: CSSProperties\r\n}\r\n\r\n/**\r\n * Variant to button style mapping\r\n */\r\nconst VARIANT_STYLES: Record<ConfirmDialogVariant, CSSProperties> = {\r\n  default: {\r\n    backgroundColor: '#3b82f6',\r\n    color: 'white',\r\n  },\r\n  danger: {\r\n    backgroundColor: '#ef4444',\r\n    color: 'white',\r\n  },\r\n  warning: {\r\n    backgroundColor: '#f59e0b',\r\n    color: 'white',\r\n  },\r\n}\r\n\r\n/**\r\n * Pre-built confirm dialog component\r\n */\r\nexport function ConfirmDialog({\r\n  open,\r\n  onOpenChange,\r\n  title,\r\n  description,\r\n  confirmText = 'Confirm',\r\n  cancelText = 'Cancel',\r\n  variant = 'default',\r\n  onConfirm,\r\n  onCancel,\r\n  className,\r\n  style,\r\n}: ConfirmDialogProps): ReactElement {\r\n  const handleConfirm = () => {\r\n    onConfirm()\r\n    onOpenChange(false)\r\n  }\r\n\r\n  const handleCancel = () => {\r\n    onCancel?.()\r\n    onOpenChange(false)\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      open={open}\r\n      onOpenChange={onOpenChange}\r\n      closeOnOverlayClick={false}\r\n      closeOnEscape={true}\r\n      role=\"alertdialog\"\r\n    >\r\n      <ModalPortal>\r\n        <ModalOverlay>\r\n          <ModalContainer>\r\n            <ModalContent size=\"sm\" className={className} style={style}>\r\n              {title && (\r\n                <ModalHeader style={{ borderBottom: 'none', paddingBottom: 0 }}>\r\n                  <ModalTitle>{title}</ModalTitle>\r\n                </ModalHeader>\r\n              )}\r\n              <ModalBody style={{ paddingTop: title ? '8px' : undefined }}>\r\n                <ModalDescription>{description}</ModalDescription>\r\n              </ModalBody>\r\n              <ModalFooter style={{ borderTop: 'none' }}>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleCancel}\r\n                  style={{\r\n                    padding: '8px 16px',\r\n                    borderRadius: '6px',\r\n                    border: 'none',\r\n                    cursor: 'pointer',\r\n                    fontWeight: 500,\r\n                    fontSize: '14px',\r\n                    backgroundColor: '#e5e7eb',\r\n                    color: '#374151',\r\n                  }}\r\n                >\r\n                  {cancelText}\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleConfirm}\r\n                  style={{\r\n                    padding: '8px 16px',\r\n                    borderRadius: '6px',\r\n                    border: 'none',\r\n                    cursor: 'pointer',\r\n                    fontWeight: 500,\r\n                    fontSize: '14px',\r\n                    ...VARIANT_STYLES[variant],\r\n                  }}\r\n                >\r\n                  {confirmText}\r\n                </button>\r\n              </ModalFooter>\r\n            </ModalContent>\r\n          </ModalContainer>\r\n        </ModalOverlay>\r\n      </ModalPortal>\r\n    </Modal>\r\n  )\r\n}\r\n","/**\r\n * AlertDialog component\r\n */\r\n\r\nimport { type ReactElement, type CSSProperties } from 'react'\r\nimport { Modal } from './Modal'\r\nimport { ModalPortal } from './ModalPortal'\r\nimport { ModalOverlay } from './ModalOverlay'\r\nimport { ModalContainer } from './ModalContainer'\r\nimport { ModalContent } from './ModalContent'\r\nimport { ModalHeader } from './ModalHeader'\r\nimport { ModalTitle } from './ModalTitle'\r\nimport { ModalBody } from './ModalBody'\r\nimport { ModalDescription } from './ModalDescription'\r\nimport { ModalFooter } from './ModalFooter'\r\n\r\n/**\r\n * Variant types\r\n */\r\nexport type AlertDialogVariant = 'default' | 'success' | 'warning' | 'error' | 'info'\r\n\r\n/**\r\n * AlertDialog props\r\n */\r\nexport interface AlertDialogProps {\r\n  /** Whether the dialog is open */\r\n  open: boolean\r\n  /** Callback when open state changes */\r\n  onOpenChange: (open: boolean) => void\r\n  /** Dialog title */\r\n  title?: string\r\n  /** Dialog description/message */\r\n  description: string\r\n  /** Confirm button text */\r\n  confirmText?: string\r\n  /** Visual variant */\r\n  variant?: AlertDialogVariant\r\n  /** Called when confirm is clicked */\r\n  onConfirm: () => void\r\n  /** Additional class name for content */\r\n  className?: string\r\n  /** Additional styles for content */\r\n  style?: CSSProperties\r\n}\r\n\r\n/**\r\n * Variant to button style mapping\r\n */\r\nconst VARIANT_STYLES: Record<AlertDialogVariant, CSSProperties> = {\r\n  default: {\r\n    backgroundColor: '#3b82f6',\r\n    color: 'white',\r\n  },\r\n  success: {\r\n    backgroundColor: '#10b981',\r\n    color: 'white',\r\n  },\r\n  warning: {\r\n    backgroundColor: '#f59e0b',\r\n    color: 'white',\r\n  },\r\n  error: {\r\n    backgroundColor: '#ef4444',\r\n    color: 'white',\r\n  },\r\n  info: {\r\n    backgroundColor: '#3b82f6',\r\n    color: 'white',\r\n  },\r\n}\r\n\r\n/**\r\n * Pre-built alert dialog component\r\n */\r\nexport function AlertDialog({\r\n  open,\r\n  onOpenChange,\r\n  title,\r\n  description,\r\n  confirmText = 'OK',\r\n  variant = 'default',\r\n  onConfirm,\r\n  className,\r\n  style,\r\n}: AlertDialogProps): ReactElement {\r\n  const handleConfirm = () => {\r\n    onConfirm()\r\n    onOpenChange(false)\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      open={open}\r\n      onOpenChange={onOpenChange}\r\n      closeOnOverlayClick={false}\r\n      closeOnEscape={true}\r\n      role=\"alertdialog\"\r\n    >\r\n      <ModalPortal>\r\n        <ModalOverlay>\r\n          <ModalContainer>\r\n            <ModalContent size=\"sm\" className={className} style={style}>\r\n              {title && (\r\n                <ModalHeader style={{ borderBottom: 'none', paddingBottom: 0 }}>\r\n                  <ModalTitle>{title}</ModalTitle>\r\n                </ModalHeader>\r\n              )}\r\n              <ModalBody style={{ paddingTop: title ? '8px' : undefined }}>\r\n                <ModalDescription>{description}</ModalDescription>\r\n              </ModalBody>\r\n              <ModalFooter style={{ borderTop: 'none' }}>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleConfirm}\r\n                  style={{\r\n                    padding: '8px 16px',\r\n                    borderRadius: '6px',\r\n                    border: 'none',\r\n                    cursor: 'pointer',\r\n                    fontWeight: 500,\r\n                    fontSize: '14px',\r\n                    ...VARIANT_STYLES[variant],\r\n                  }}\r\n                >\r\n                  {confirmText}\r\n                </button>\r\n              </ModalFooter>\r\n            </ModalContent>\r\n          </ModalContainer>\r\n        </ModalOverlay>\r\n      </ModalPortal>\r\n    </Modal>\r\n  )\r\n}\r\n","/**\r\n * PromptDialog component\r\n */\r\n\r\nimport React, {\r\n  useState,\r\n  useRef,\r\n  useEffect,\r\n  type ReactElement,\r\n  type CSSProperties,\r\n} from 'react'\r\nimport { Modal } from './Modal'\r\nimport { ModalPortal } from './ModalPortal'\r\nimport { ModalOverlay } from './ModalOverlay'\r\nimport { ModalContainer } from './ModalContainer'\r\nimport { ModalContent } from './ModalContent'\r\nimport { ModalHeader } from './ModalHeader'\r\nimport { ModalTitle } from './ModalTitle'\r\nimport { ModalBody } from './ModalBody'\r\nimport { ModalDescription } from './ModalDescription'\r\nimport { ModalFooter } from './ModalFooter'\r\n\r\n/**\r\n * PromptDialog props\r\n */\r\nexport interface PromptDialogProps {\r\n  /** Whether the dialog is open */\r\n  open: boolean\r\n  /** Callback when open state changes */\r\n  onOpenChange: (open: boolean) => void\r\n  /** Dialog title */\r\n  title?: string\r\n  /** Dialog description/message */\r\n  description?: string\r\n  /** Input placeholder */\r\n  placeholder?: string\r\n  /** Default input value */\r\n  defaultValue?: string\r\n  /** Confirm button text */\r\n  confirmText?: string\r\n  /** Cancel button text */\r\n  cancelText?: string\r\n  /** Input type */\r\n  type?: 'text' | 'password' | 'email' | 'number' | 'tel' | 'url'\r\n  /** Validation function */\r\n  validate?: (value: string) => boolean | string\r\n  /** Whether input is required */\r\n  required?: boolean\r\n  /** Minimum input length */\r\n  minLength?: number\r\n  /** Maximum input length */\r\n  maxLength?: number\r\n  /** Called when confirm is clicked with the input value */\r\n  onConfirm: (value: string) => void\r\n  /** Called when cancel is clicked */\r\n  onCancel?: () => void\r\n  /** Additional class name for content */\r\n  className?: string\r\n  /** Additional styles for content */\r\n  style?: CSSProperties\r\n}\r\n\r\n/**\r\n * Pre-built prompt dialog component\r\n */\r\nexport function PromptDialog({\r\n  open,\r\n  onOpenChange,\r\n  title,\r\n  description,\r\n  placeholder,\r\n  defaultValue = '',\r\n  confirmText = 'OK',\r\n  cancelText = 'Cancel',\r\n  type = 'text',\r\n  validate,\r\n  required = false,\r\n  minLength = 0,\r\n  maxLength,\r\n  onConfirm,\r\n  onCancel,\r\n  className,\r\n  style,\r\n}: PromptDialogProps): ReactElement {\r\n  const [value, setValue] = useState(defaultValue)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const inputRef = useRef<HTMLInputElement>(null)\r\n\r\n  // Reset value when dialog opens\r\n  useEffect(() => {\r\n    if (open) {\r\n      setValue(defaultValue)\r\n      setError(null)\r\n    }\r\n  }, [open, defaultValue])\r\n\r\n  // Focus input when dialog opens\r\n  useEffect(() => {\r\n    if (open && inputRef.current) {\r\n      inputRef.current.focus()\r\n      if (defaultValue) {\r\n        inputRef.current.select()\r\n      }\r\n    }\r\n  }, [open, defaultValue])\r\n\r\n  const validateInput = (): boolean => {\r\n    // Required check\r\n    if (required && !value.trim()) {\r\n      setError('This field is required')\r\n      return false\r\n    }\r\n\r\n    // Min length check\r\n    if (minLength > 0 && value.length < minLength) {\r\n      setError(`Minimum ${minLength} characters required`)\r\n      return false\r\n    }\r\n\r\n    // Max length check\r\n    if (maxLength && value.length > maxLength) {\r\n      setError(`Maximum ${maxLength} characters allowed`)\r\n      return false\r\n    }\r\n\r\n    // Custom validation\r\n    if (validate) {\r\n      const result = validate(value)\r\n      if (result !== true) {\r\n        setError(typeof result === 'string' ? result : 'Invalid input')\r\n        return false\r\n      }\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  const handleConfirm = () => {\r\n    if (validateInput()) {\r\n      onConfirm(value)\r\n      onOpenChange(false)\r\n    }\r\n  }\r\n\r\n  const handleCancel = () => {\r\n    onCancel?.()\r\n    onOpenChange(false)\r\n  }\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter') {\r\n      e.preventDefault()\r\n      handleConfirm()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      open={open}\r\n      onOpenChange={onOpenChange}\r\n      closeOnOverlayClick={false}\r\n      closeOnEscape={true}\r\n      role=\"alertdialog\"\r\n    >\r\n      <ModalPortal>\r\n        <ModalOverlay>\r\n          <ModalContainer>\r\n            <ModalContent size=\"sm\" className={className} style={style}>\r\n              {title && (\r\n                <ModalHeader style={{ borderBottom: 'none', paddingBottom: 0 }}>\r\n                  <ModalTitle>{title}</ModalTitle>\r\n                </ModalHeader>\r\n              )}\r\n              <ModalBody style={{ paddingTop: title ? '8px' : undefined }}>\r\n                {description && (\r\n                  <ModalDescription style={{ marginBottom: '16px' }}>\r\n                    {description}\r\n                  </ModalDescription>\r\n                )}\r\n                <div>\r\n                  <input\r\n                    ref={inputRef}\r\n                    type={type}\r\n                    value={value}\r\n                    onChange={(e) => {\r\n                      setValue(e.target.value)\r\n                      setError(null)\r\n                    }}\r\n                    onKeyDown={handleKeyDown}\r\n                    placeholder={placeholder}\r\n                    required={required}\r\n                    minLength={minLength}\r\n                    maxLength={maxLength}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '8px 12px',\r\n                      border: `1px solid ${error ? '#ef4444' : '#d1d5db'}`,\r\n                      borderRadius: '6px',\r\n                      fontSize: '14px',\r\n                      outline: 'none',\r\n                      boxSizing: 'border-box',\r\n                    }}\r\n                  />\r\n                  {error && (\r\n                    <p\r\n                      style={{\r\n                        color: '#ef4444',\r\n                        fontSize: '12px',\r\n                        marginTop: '4px',\r\n                        marginBottom: 0,\r\n                      }}\r\n                    >\r\n                      {error}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              </ModalBody>\r\n              <ModalFooter style={{ borderTop: 'none' }}>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleCancel}\r\n                  style={{\r\n                    padding: '8px 16px',\r\n                    borderRadius: '6px',\r\n                    border: 'none',\r\n                    cursor: 'pointer',\r\n                    fontWeight: 500,\r\n                    fontSize: '14px',\r\n                    backgroundColor: '#e5e7eb',\r\n                    color: '#374151',\r\n                  }}\r\n                >\r\n                  {cancelText}\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleConfirm}\r\n                  style={{\r\n                    padding: '8px 16px',\r\n                    borderRadius: '6px',\r\n                    border: 'none',\r\n                    cursor: 'pointer',\r\n                    fontWeight: 500,\r\n                    fontSize: '14px',\r\n                    backgroundColor: '#3b82f6',\r\n                    color: 'white',\r\n                  }}\r\n                >\r\n                  {confirmText}\r\n                </button>\r\n              </ModalFooter>\r\n            </ModalContent>\r\n          </ModalContainer>\r\n        </ModalOverlay>\r\n      </ModalPortal>\r\n    </Modal>\r\n  )\r\n}\r\n","/**\r\n * Imperative modals API for React\r\n *\r\n * Note: This requires the ModalProvider to be mounted in the app.\r\n * For standalone usage without React context, use the core\r\n * confirm(), alert(), prompt() functions from '@oxog/modalkit'.\r\n */\r\n\r\nimport { confirm as coreConfirm } from '../../../dialogs/confirm'\r\nimport { alert as coreAlert } from '../../../dialogs/alert'\r\nimport { prompt as corePrompt } from '../../../dialogs/prompt'\r\nimport type {\r\n  ConfirmOptions,\r\n  ConfirmOptionsAdvanced,\r\n  AlertOptions,\r\n  PromptOptions,\r\n} from '../../../types'\r\n\r\n/**\r\n * Show a confirm dialog\r\n */\r\nfunction confirm(message: string): Promise<boolean>\r\nfunction confirm(options: ConfirmOptions): Promise<boolean>\r\nfunction confirm(options: ConfirmOptionsAdvanced): Promise<string | boolean>\r\nfunction confirm(\r\n  messageOrOptions: string | ConfirmOptions | ConfirmOptionsAdvanced\r\n): Promise<boolean | string> {\r\n  if (typeof messageOrOptions === 'string') {\r\n    return coreConfirm(messageOrOptions)\r\n  }\r\n  if ('buttons' in messageOrOptions && messageOrOptions.buttons) {\r\n    return coreConfirm(messageOrOptions as ConfirmOptionsAdvanced)\r\n  }\r\n  return coreConfirm(messageOrOptions as ConfirmOptions)\r\n}\r\n\r\n/**\r\n * Show an alert dialog\r\n */\r\nfunction alert(message: string): Promise<void>\r\nfunction alert(options: AlertOptions): Promise<void>\r\nfunction alert(messageOrOptions: string | AlertOptions): Promise<void> {\r\n  if (typeof messageOrOptions === 'string') {\r\n    return coreAlert(messageOrOptions)\r\n  }\r\n  return coreAlert(messageOrOptions)\r\n}\r\n\r\n/**\r\n * Show a prompt dialog\r\n */\r\nfunction prompt(message: string): Promise<string | null>\r\nfunction prompt(options: PromptOptions): Promise<string | null>\r\nfunction prompt(messageOrOptions: string | PromptOptions): Promise<string | null> {\r\n  if (typeof messageOrOptions === 'string') {\r\n    return corePrompt(messageOrOptions)\r\n  }\r\n  return corePrompt(messageOrOptions)\r\n}\r\n\r\n/**\r\n * Imperative modals API\r\n *\r\n * These functions use the core implementation and work without React context.\r\n * They render dialogs directly to the DOM.\r\n */\r\nexport const modals = {\r\n  confirm,\r\n  alert,\r\n  prompt,\r\n}\r\n"]}