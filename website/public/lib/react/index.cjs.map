{"version":3,"sources":["../../src/core/config.ts","../../src/utils/events.ts","../../src/core/state.ts","../../src/core/stack.ts","../../src/utils/focus.ts","../../src/features/focus-trap.ts","../../src/utils/dom.ts","../../src/features/scroll-lock.ts","../../src/features/animation.ts","../../src/features/keyboard.ts","../../src/features/portal.ts","../../src/utils/id.ts","../../src/core/modal.ts","../../src/adapters/react/context.tsx","../../src/adapters/react/hooks/useModal.ts","../../src/dialogs/base.ts","../../src/dialogs/confirm.ts","../../src/adapters/react/hooks/useConfirm.ts","../../src/dialogs/alert.ts","../../src/adapters/react/hooks/useAlert.ts","../../src/dialogs/prompt.ts","../../src/adapters/react/hooks/usePrompt.ts","../../src/adapters/react/components/Modal.tsx","../../src/adapters/react/components/ModalTrigger.tsx","../../src/adapters/react/components/ModalPortal.tsx","../../src/adapters/react/components/ModalOverlay.tsx","../../src/adapters/react/components/ModalContainer.tsx","../../src/adapters/react/components/ModalContent.tsx","../../src/adapters/react/components/ModalHeader.tsx","../../src/adapters/react/components/ModalTitle.tsx","../../src/adapters/react/components/ModalDescription.tsx","../../src/adapters/react/components/ModalBody.tsx","../../src/adapters/react/components/ModalFooter.tsx","../../src/adapters/react/components/ModalClose.tsx","../../src/adapters/react/components/ConfirmDialog.tsx","../../src/adapters/react/components/AlertDialog.tsx","../../src/adapters/react/components/PromptDialog.tsx","../../src/adapters/react/imperative/modals.ts"],"names":["DEFAULT_CONFIG","mergeConfig","config","createEventEmitter","listeners","on","event","handler","off","handlers","emit","args","error","clear","createSubscriptionManager","subscribers","subscribe","callback","notify","value","createInitialState","defaultOpen","createStateManager","initialState","state","getState","setState","partial","prevState","hasStateChanged","prev","next","shouldBeMounted","open","animationState","BASE_Z_INDEX","Z_INDEX_INCREMENT","calculateZIndex","stackOrder","createModalStack","stack","events","updateStackState","modal","index","order","isTopMost","push","remove","count","isEmpty","getAll","getTopMost","getByOrder","closeAll","closeTopMost","topMost","modalStack","stackInternal","FOCUSABLE_SELECTOR","isVisible","element","style","isFocusable","getFocusableElements","container","elements","getFirstFocusable","getLastFocusable","focusables","getActiveElement","doc","activeElement","focusElement","options","savedFocus","saveFocus","restoreFocus","preventScroll","scrollX","scrollY","createFocusTrap","initialFocus","fallbackFocus","returnFocus","escapeDeactivates","clickOutsideDeactivates","allowOutsideClick","onActivate","onDeactivate","active","paused","resolveElement","ref","handleKeyDown","firstFocusable","lastFocusable","handleEscapeKey","deactivate","handleClick","target","handleFocusIn","activate","initialElement","fallbackElement","elementToFocus","returnElement","pause","unpause","isActive","isPaused","getElement","createPortalContainer","id","removeElement","getScrollbarWidth","outer","inner","scrollbarWidth","contains","parent","child","lockCount","originalStyles","isIOS","getScrollPosition","scrollPosition","lock","hasScrollbar","currentPadding","unlock","isLocked","scrollLock","createAnimationController","duration","onStateChange","onAnimationStart","onAnimationEnd","timerId","clearTimer","newState","startEnter","startExit","skipTo","targetState","isAnimating","destroy","createNoopAnimationController","isEscapeKey","createKeyboardHandler","closeOnEscape","onEscapeKeyDown","onClose","DEFAULT_PORTAL_ID","getPortalContainer","counter","generateId","prefix","createModalIds","baseId","createModal","userConfig","ids","initialOpen","stateManager","animationController","focusTrap","contentElement","overlayElement","containerElement","close","setupFocusTrap","teardownFocusTrap","activateFocusTrap","handleOpen","handleClose","finalFocus","handleOverlayClick","e","isOpen","isMounted","toggle","getStackOrder","getAnimationState","focusFirst","first","focusLast","last","getPortalTarget","getPortalProps","getOverlayProps","zIndex","el","getContainerProps","scrollBehavior","getContentProps","props","wasNull","getTitleProps","customId","getDescriptionProps","getCloseButtonProps","getTriggerProps","getConfig","setConfig","newConfig","isTop","ModalContext","createContext","useModalContext","context","useContext","idCounter","generateModalId","ModalProvider","children","modals","useState","setUpdateCounter","forceUpdate","useCallback","c","openModal","content","title","size","modalConfig","closeModal","managed","useMemo","managedModalElements","portalProps","overlayProps","containerProps","contentProps","renderedContent","jsx","jsxs","useModal","modalRef","useRef","configRef","useEffect","createDialogElements","portal","overlay","createDialogModal","customConfig","styleButton","button","variant","createTitleElement","titleProps","titleEl","createMessageElement","message","descProps","messageEl","createButtonContainer","DEFAULT_OPTIONS","confirm","messageOrOptions","resolve","confirmText","cancelText","closeOnOverlayClick","buttons","resolved","cleanup","buttonContainer","buttonsToRender","autoFocusButton","btnConfig","useConfirm","getButtonVariant","alertVariant","alert","confirmButton","useAlert","prompt","placeholder","defaultValue","type","validate","required","minLength","maxLength","inputContainer","input","errorEl","validateInput","showError","clearError","handleSubmit","validationResult","cancelButton","usePrompt","ModalComponentContext","useModalComponentContext","Modal","onOpenChange","ModalTrigger","asChild","className","triggerProps","isValidElement","cloneElement","ModalPortal","portalTarget","createPortal","ModalOverlay","forwardRef","forwardedRef","ModalContainer","position","alignItems","paddingTop","SIZE_MAP","ModalContent","role","ariaLabel","ModalHeader","ModalTitle","ModalDescription","ModalBody","ModalFooter","ModalClose","closeProps","VARIANT_STYLES","ConfirmDialog","description","onConfirm","onCancel","AlertDialog","PromptDialog","setValue","setError","inputRef","result","handleConfirm"],"mappings":"8GASO,IAAMA,CAAAA,CAmBT,CACF,YAAa,KAAA,CACb,mBAAA,CAAqB,KACrB,aAAA,CAAe,IAAA,CACf,aAAA,CAAe,IAAA,CACf,cAAA,CAAgB,QAAA,CAChB,UAAW,IAAA,CACX,SAAA,CAAW,KACX,YAAA,CAAc,IAAA,CACd,UAAW,IAAA,CACX,kBAAA,CAAoB,KAAA,CACpB,QAAA,CAAU,KAAA,CACV,iBAAA,CAAmB,IACnB,aAAA,CAAe,KAAA,CACf,IAAA,CAAM,QACR,CAAA,CAKO,SAASC,GAAYC,CAAAA,CAAmC,CAC7D,OAAKA,CAAAA,CAEE,CACL,GAAGF,EACH,GAAGE,CACL,EALoB,CAAE,GAAGF,CAAe,CAM1C,CC9CO,SAASG,EAAAA,EAEK,CACnB,IAAMC,EAAY,IAAI,GAAA,CAEtB,SAASC,CAAAA,CACPC,CAAAA,CACAC,EACY,CACZ,OAAKH,CAAAA,CAAU,GAAA,CAAIE,CAAK,CAAA,EACtBF,EAAU,GAAA,CAAIE,CAAAA,CAAO,IAAI,GAAK,CAAA,CAEhCF,EAAU,GAAA,CAAIE,CAAK,CAAA,CAAG,GAAA,CAAIC,CAAO,CAAA,CAG1B,IAAMC,CAAAA,CAAIF,CAAAA,CAAOC,CAAO,CACjC,CAEA,SAASC,EACPF,CAAAA,CACAC,CAAAA,CACM,CACN,IAAME,CAAAA,CAAWL,CAAAA,CAAU,IAAIE,CAAK,CAAA,CAChCG,IACFA,CAAAA,CAAS,MAAA,CAAOF,CAAO,CAAA,CACnBE,CAAAA,CAAS,IAAA,GAAS,CAAA,EACpBL,CAAAA,CAAU,MAAA,CAAOE,CAAK,CAAA,EAG5B,CAEA,SAASI,CAAAA,CAAwBJ,CAAAA,CAAAA,GAAaK,EAAkB,CAC9D,IAAMF,CAAAA,CAAWL,CAAAA,CAAU,GAAA,CAAIE,CAAK,EAChCG,CAAAA,EACFA,CAAAA,CAAS,QAASF,CAAAA,EAAY,CAC5B,GAAI,CACFA,CAAAA,CAAQ,GAAGI,CAAI,EACjB,CAAA,MAASC,EAAO,CACd,OAAA,CAAQ,KAAA,CAAM,CAAA,4BAAA,EAA+B,MAAA,CAAON,CAAK,CAAC,CAAA,EAAA,CAAA,CAAMM,CAAK,EACvE,CACF,CAAC,EAEL,CAEA,SAASC,CAAAA,EAAc,CACrBT,CAAAA,CAAU,KAAA,GACZ,CAEA,OAAO,CAAE,EAAA,CAAAC,CAAAA,CAAI,GAAA,CAAAG,EAAK,IAAA,CAAAE,CAAAA,CAAM,KAAA,CAAAG,CAAM,CAChC,CAKO,SAASC,EAAAA,EAId,CACA,IAAMC,CAAAA,CAAc,IAAI,GAAA,CAExB,SAASC,CAAAA,CAAUC,CAAAA,CAA0C,CAC3D,OAAAF,CAAAA,CAAY,IAAIE,CAAQ,CAAA,CACjB,IAAM,CACXF,CAAAA,CAAY,MAAA,CAAOE,CAAQ,EAC7B,CACF,CAEA,SAASC,CAAAA,CAAOC,CAAAA,CAAgB,CAC9BJ,CAAAA,CAAY,OAAA,CAASE,CAAAA,EAAa,CAChC,GAAI,CACFA,EAASE,CAAK,EAChB,OAASP,CAAAA,CAAO,CACd,QAAQ,KAAA,CAAM,sBAAA,CAAwBA,CAAK,EAC7C,CACF,CAAC,EACH,CAEA,SAASC,GAAc,CACrBE,CAAAA,CAAY,QACd,CAEA,OAAO,CAAE,SAAA,CAAAC,CAAAA,CAAW,OAAAE,CAAAA,CAAQ,KAAA,CAAAL,CAAM,CACpC,CClFO,SAASO,EAAAA,CAAmBC,CAAAA,CAAuB,KAAA,CAAmB,CAC3E,OAAO,CACL,KAAMA,CAAAA,CACN,cAAA,CAAgBA,CAAAA,CAAc,SAAA,CAAY,MAAA,CAC1C,UAAA,CAAY,EACZ,SAAA,CAAW,KAAA,CACX,OAAA,CAASA,CACX,CACF,CAKO,SAASC,EAAAA,CACdC,CAAAA,CAC0B,CAC1B,IAAIC,CAAAA,CAAQ,CAAE,GAAGD,CAAa,CAAA,CACxB,CAAE,SAAA,CAAAP,CAAAA,CAAW,OAAAE,CAAO,CAAA,CAAIJ,EAAAA,EAAsC,CAEpE,SAASW,CAAAA,EAAuB,CAC9B,OAAO,CAAE,GAAGD,CAAM,CACpB,CAEA,SAASE,CAAAA,CAASC,CAAAA,CAAoC,CACpD,IAAMC,CAAAA,CAAYJ,EAClBA,CAAAA,CAAQ,CAAE,GAAGA,CAAAA,CAAO,GAAGG,CAAQ,EAG3BE,EAAAA,CAAgBD,CAAAA,CAAWJ,CAAK,CAAA,EAClCN,CAAAA,CAAOM,CAAK,EAEhB,CAEA,OAAO,CACL,QAAA,CAAAC,CAAAA,CACA,QAAA,CAAAC,EACA,SAAA,CAAAV,CACF,CACF,CAKA,SAASa,GAAgBC,CAAAA,CAAkBC,CAAAA,CAA2B,CACpE,OACED,CAAAA,CAAK,IAAA,GAASC,EAAK,IAAA,EACnBD,CAAAA,CAAK,iBAAmBC,CAAAA,CAAK,cAAA,EAC7BD,EAAK,UAAA,GAAeC,CAAAA,CAAK,UAAA,EACzBD,CAAAA,CAAK,SAAA,GAAcC,CAAAA,CAAK,WACxBD,CAAAA,CAAK,OAAA,GAAYC,EAAK,OAE1B,CAKO,SAASC,EAAAA,CACdC,CAAAA,CACAC,CAAAA,CACS,CAET,OAAOD,CAAAA,EAAQC,IAAmB,SAAA,EAAaA,CAAAA,GAAmB,QACpE,CCrDO,IAAMC,EAAAA,CAAe,IAKfC,EAAAA,CAAoB,EAAA,CAK1B,SAASC,EAAAA,CAAgBC,CAAAA,CAA4B,CAC1D,OAAOH,EAAAA,CAAAA,CAAgBG,CAAAA,CAAa,GAAKF,EAC3C,CAKA,SAASG,EAAAA,EAGP,CACA,IAAMC,CAAAA,CAAyB,EAAC,CAC1BC,EAAStC,EAAAA,EAAgC,CAE/C,SAASuC,CAAAA,EAAyB,CAChCF,CAAAA,CAAM,QAAQ,CAACG,CAAAA,CAAOC,CAAAA,GAAU,CAC9B,IAAMC,CAAAA,CAAQD,EAAQ,CAAA,CAChBE,CAAAA,CAAYF,IAAUJ,CAAAA,CAAM,MAAA,CAAS,EAC3CG,CAAAA,CAAM,cAAA,CAAeE,CAAK,CAAA,CAC1BF,CAAAA,CAAM,aAAA,CAAcG,CAAS,EAC/B,CAAC,EACH,CAEA,SAASC,CAAAA,CAAKJ,EAA4B,CAElBH,CAAAA,CAAM,OAAA,CAAQG,CAAK,CAAA,GACnB,EAAA,GAItBH,EAAM,IAAA,CAAKG,CAAK,EAChBD,CAAAA,EAAiB,CACjBD,EAAO,IAAA,CAAK,MAAA,CAAQE,CAAK,CAAA,CACzBF,CAAAA,CAAO,IAAA,CAAK,SAAU,CAAC,GAAGD,CAAK,CAAC,CAAA,EAClC,CAEA,SAASQ,CAAAA,CAAOL,CAAAA,CAA4B,CAC1C,IAAMC,CAAAA,CAAQJ,EAAM,OAAA,CAAQG,CAAK,EAC7BC,CAAAA,GAAU,EAAA,GAEdJ,EAAM,MAAA,CAAOI,CAAAA,CAAO,CAAC,CAAA,CACrBF,CAAAA,EAAiB,CACjBD,EAAO,IAAA,CAAK,KAAA,CAAOE,CAAK,CAAA,CACxBF,CAAAA,CAAO,IAAA,CAAK,SAAU,CAAC,GAAGD,CAAK,CAAC,CAAA,EAClC,CAEA,SAASS,CAAAA,EAAgB,CACvB,OAAOT,CAAAA,CAAM,MACf,CAEA,SAASU,CAAAA,EAAmB,CAC1B,OAAOV,CAAAA,CAAM,MAAA,GAAW,CAC1B,CAEA,SAASW,GAAkB,CACzB,OAAO,CAAC,GAAGX,CAAK,CAClB,CAEA,SAASY,CAAAA,EAA2B,CAClC,OAAOZ,CAAAA,CAAMA,EAAM,MAAA,CAAS,CAAC,GAAK,IACpC,CAEA,SAASa,CAAAA,CAAWR,CAAAA,CAA6B,CAC/C,OAAOL,CAAAA,CAAMK,CAAAA,CAAQ,CAAC,CAAA,EAAK,IAC7B,CAEA,SAASS,CAAAA,EAAiB,CAEF,CAAC,GAAGd,CAAK,CAAA,CAAE,SAAQ,CAC3B,OAAA,CAASG,GAAUA,CAAAA,CAAM,KAAA,EAAO,EAChD,CAEA,SAASY,CAAAA,EAAqB,CAC5B,IAAMC,EAAUJ,CAAAA,EAAW,CACvBI,GACFA,CAAAA,CAAQ,KAAA,GAEZ,CAEA,SAASnD,CAAAA,CACPC,CAAAA,CACAC,CAAAA,CAGY,CACZ,OAAOkC,CAAAA,CAAO,EAAA,CAAGnC,EAAOC,CAA4C,CACtE,CAEA,SAASC,CAAAA,CACPF,CAAAA,CACAC,CAAAA,CAGM,CACNkC,CAAAA,CAAO,IAAInC,CAAAA,CAAOC,CAA4C,EAChE,CAEA,OAAO,CACL,MAAA0C,CAAAA,CACA,OAAA,CAAAC,CAAAA,CACA,MAAA,CAAAC,CAAAA,CACA,UAAA,CAAAC,EACA,UAAA,CAAAC,CAAAA,CACA,SAAAC,CAAAA,CACA,YAAA,CAAAC,EACA,EAAA,CAAAlD,CAAAA,CACA,GAAA,CAAAG,CAAAA,CACA,IAAA,CAAAuC,CAAAA,CACA,OAAAC,CACF,CACF,CAKO,IAAMS,EAAAA,CAAalB,EAAAA,GAMbmB,EAAAA,CAAgB,CAC3B,IAAA,CAAMD,EAAAA,CAAW,IAAA,CACjB,MAAA,CAAQA,GAAW,MACrB,CAAA,CClJO,IAAME,EAAAA,CAAqB,CAChC,UACA,YAAA,CACA,wBAAA,CACA,uBAAA,CACA,wBAAA,CACA,0BAAA,CACA,iCAAA,CACA,2BACA,iBAAA,CACA,iBAAA,CACA,iCACF,CAAA,CAAE,IAAA,CAAK,GAAG,EAKV,SAASC,EAAAA,CAAUC,CAAAA,CAA+B,CAEhD,GACEA,CAAAA,CAAQ,cAAgB,CAAA,EACxBA,CAAAA,CAAQ,eAAiB,CAAA,EACzBA,CAAAA,CAAQ,gBAAe,CAAE,MAAA,GAAW,CAAA,CAEpC,OAAO,MAAA,CAIT,IAAMC,EAAQ,gBAAA,CAAiBD,CAAO,EACtC,OAAI,EAAAC,EAAM,UAAA,GAAe,QAAA,EAAYA,CAAAA,CAAM,OAAA,GAAY,MAAA,CAKzD,CAKO,SAASC,EAAAA,CAAYF,CAAAA,CAA2B,CAGrD,OAFI,EAAA,EAAEA,aAAmB,WAAA,CAAA,EACrB,CAACA,CAAAA,CAAQ,OAAA,CAAQF,EAAkB,CAAA,EACnC,CAACC,EAAAA,CAAUC,CAAO,CAAA,CAGxB,CAKO,SAASG,EAAAA,CAAqBC,EAAuC,CAC1E,IAAMC,CAAAA,CAAWD,CAAAA,CAAU,gBAAA,CAA8BN,EAAkB,EAC3E,OAAO,KAAA,CAAM,KAAKO,CAAQ,CAAA,CAAE,OAAOH,EAAW,CAChD,CAKO,SAASI,EAAAA,CAAkBF,CAAAA,CAA4C,CAE5E,OADmBD,EAAAA,CAAqBC,CAAS,CAAA,CAC/B,CAAC,CAAA,EAAK,IAC1B,CAKO,SAASG,EAAAA,CAAiBH,CAAAA,CAA4C,CAC3E,IAAMI,EAAaL,EAAAA,CAAqBC,CAAS,EACjD,OAAOI,CAAAA,CAAWA,EAAW,MAAA,CAAS,CAAC,CAAA,EAAK,IAC9C,CAKO,SAASC,GAAiBC,CAAAA,CAAgB,QAAA,CAA0B,CACzE,IAAIC,CAAAA,CAAgBD,CAAAA,CAAI,cAGxB,KAAOC,CAAAA,EAAe,UAAA,EAAY,aAAA,EAChCA,CAAAA,CAAgBA,CAAAA,CAAc,WAAW,aAAA,CAG3C,OAAOA,CACT,CAKO,SAASC,EACdZ,CAAAA,CACAa,CAAAA,CACS,CACT,GAAI,CAACb,CAAAA,CAAS,OAAO,MAAA,CAErB,GAAI,CACF,OAAAA,CAAAA,CAAQ,MAAMa,CAAO,CAAA,CACdJ,EAAAA,EAAiB,GAAMT,CAChC,CAAA,KAAQ,CACN,OAAO,MACT,CACF,CAWA,IAAIc,GAAgC,IAAA,CAK7B,SAASC,EAAAA,EAAkB,CAChC,IAAMJ,CAAAA,CAAgBF,IAAiB,CACvCK,EAAAA,CAAa,CACX,OAAA,CAASH,CAAAA,YAAyB,WAAA,CAAcA,EAAgB,IAAA,CAChE,OAAA,CAAS,MAAA,CAAO,OAAA,CAChB,OAAA,CAAS,MAAA,CAAO,OAClB,EACF,CAKO,SAASK,EAAAA,CAAaC,CAAAA,CAAyB,KAAY,CAChE,GAAI,CAACH,EAAAA,CAAY,OAEjB,GAAM,CAAE,OAAA,CAAAd,CAAAA,CAAS,OAAA,CAAAkB,CAAAA,CAAS,OAAA,CAAAC,CAAQ,EAAIL,EAAAA,CAElCd,CAAAA,EAAW,QAAA,CAAS,IAAA,CAAK,QAAA,CAASA,CAAO,IAC3CY,CAAAA,CAAaZ,CAAAA,CAAS,CAAE,aAAA,CAAAiB,CAAc,CAAC,CAAA,CAGnCA,CAAAA,EACF,MAAA,CAAO,QAAA,CAASC,CAAAA,CAASC,CAAO,GAIpCL,EAAAA,CAAa,KACf,CCrIO,SAASM,EAAAA,CAAgB/E,CAAAA,CAAoC,CAClE,GAAM,CACJ,SAAA,CAAA+D,CAAAA,CACA,YAAA,CAAAiB,CAAAA,CACA,cAAAC,CAAAA,CACA,WAAA,CAAAC,EACA,iBAAA,CAAAC,CAAAA,CAAoB,KACpB,uBAAA,CAAAC,CAAAA,CAA0B,KAAA,CAC1B,iBAAA,CAAAC,CAAAA,CAAoB,KAAA,CACpB,WAAAC,CAAAA,CACA,YAAA,CAAAC,CACF,CAAA,CAAIvF,CAAAA,CAEAwF,EAAS,KAAA,CACTC,CAAAA,CAAS,KAAA,CAGb,SAASC,CAAAA,CACPC,CAAAA,CACoB,CACpB,OAAKA,CAAAA,CACD,OAAOA,CAAAA,EAAQ,UAAA,CAAmBA,GAAI,CACnCA,CAAAA,CAFU,IAGnB,CAGA,SAASC,CAAAA,CAAcxF,EAA4B,CAEjD,GADI,CAACoF,CAAAA,EAAUC,CAAAA,EACXrF,CAAAA,CAAM,MAAQ,KAAA,CAAO,OAEzB,IAAM+D,CAAAA,CAAaL,EAAAA,CAAqBC,CAAS,EACjD,GAAII,CAAAA,CAAW,SAAW,CAAA,CAAG,OAE7B,IAAM0B,CAAAA,CAAiB1B,CAAAA,CAAW,CAAC,CAAA,CAC7B2B,CAAAA,CAAgB3B,CAAAA,CAAWA,EAAW,MAAA,CAAS,CAAC,EAChDG,CAAAA,CAAgBF,EAAAA,GAGlBhE,CAAAA,CAAM,QAAA,CAAA,CACJkE,CAAAA,GAAkBuB,CAAAA,EAAkB,CAAC9B,CAAAA,CAAU,SAASO,CAAqB,CAAA,IAC/ElE,EAAM,cAAA,EAAe,CACrBmE,EAAauB,CAAa,CAAA,CAAA,CAAA,CAIxBxB,CAAAA,GAAkBwB,CAAAA,EAAiB,CAAC/B,CAAAA,CAAU,SAASO,CAAqB,CAAA,IAC9ElE,CAAAA,CAAM,cAAA,EAAe,CACrBmE,CAAAA,CAAasB,CAAc,CAAA,EAGjC,CAGA,SAASE,CAAAA,CAAgB3F,CAAAA,CAA4B,CAC/C,CAACoF,CAAAA,EAAUC,CAAAA,EACXrF,EAAM,GAAA,GAAQ,QAAA,EAEd+E,IACF/E,CAAAA,CAAM,cAAA,EAAe,CACrB4F,CAAAA,EAAW,EAEf,CAGA,SAASC,CAAAA,CAAY7F,CAAAA,CAAyB,CAC5C,GAAI,CAACoF,GAAUC,CAAAA,CAAQ,OAEvB,IAAMS,CAAAA,CAAS9F,CAAAA,CAAM,MAAA,CAChB2D,EAAU,QAAA,CAASmC,CAAM,KAG1B,OAAOb,CAAAA,EAAsB,WACzBA,CAAAA,CAAkBjF,CAAK,CAAA,CACvBiF,CAAAA,IAGJjF,CAAAA,CAAM,cAAA,GACNA,CAAAA,CAAM,eAAA,EAAgB,CAAA,CAGpBgF,CAAAA,EACFY,CAAAA,EAAW,EAGjB,CAGA,SAASG,CAAAA,CAAc/F,CAAAA,CAAyB,CAC9C,GAAI,CAACoF,GAAUC,CAAAA,CAAQ,OAEvB,IAAMS,CAAAA,CAAS9F,CAAAA,CAAM,OACrB,GAAI,CAAC2D,CAAAA,CAAU,QAAA,CAASmC,CAAM,CAAA,CAAG,CAE/B9F,CAAAA,CAAM,cAAA,EAAe,CACrB,IAAMyF,CAAAA,CAAiB5B,EAAAA,CAAkBF,CAAS,CAAA,CAC9C8B,CAAAA,CACFtB,CAAAA,CAAasB,CAAc,CAAA,CAG3B9B,CAAAA,CAAU,QAEd,CACF,CAEA,SAASqC,CAAAA,EAAiB,CACxB,GAAIZ,CAAAA,CAAQ,OAGZd,EAAAA,EAAU,CAEVc,CAAAA,CAAS,KACTC,CAAAA,CAAS,KAAA,CAGT,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAWG,CAAAA,CAAe,IAAI,CAAA,CACxD,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAWG,CAAAA,CAAiB,IAAI,EAC1D,QAAA,CAAS,gBAAA,CAAiB,QAASE,CAAAA,CAAa,IAAI,EACpD,QAAA,CAAS,gBAAA,CAAiB,SAAA,CAAWE,CAAAA,CAAe,IAAI,CAAA,CAGxD,IAAME,CAAAA,CAAiBX,CAAAA,CAAeV,CAAY,CAAA,CAC5CsB,CAAAA,CAAkBZ,EAAeT,CAAa,CAAA,CAC9CY,CAAAA,CAAiB5B,EAAAA,CAAkBF,CAAS,CAAA,CAE5CwC,EACJF,CAAAA,EACAC,CAAAA,EACAT,GACA9B,CAAAA,CAGGA,CAAAA,CAAU,aAAa,UAAU,CAAA,EACpCA,CAAAA,CAAU,YAAA,CAAa,UAAA,CAAY,IAAI,EAGzCQ,CAAAA,CAAagC,CAAAA,CAA+B,CAAE,aAAA,CAAe,IAAK,CAAC,EAEnEjB,CAAAA,KACF,CAEA,SAASU,CAAAA,EAAmB,CAC1B,GAAI,CAACR,CAAAA,CAAQ,OAEbA,CAAAA,CAAS,KAAA,CACTC,EAAS,KAAA,CAGT,QAAA,CAAS,mBAAA,CAAoB,SAAA,CAAWG,CAAAA,CAAe,IAAI,EAC3D,QAAA,CAAS,mBAAA,CAAoB,SAAA,CAAWG,CAAAA,CAAiB,IAAI,CAAA,CAC7D,SAAS,mBAAA,CAAoB,OAAA,CAASE,CAAAA,CAAa,IAAI,CAAA,CACvD,QAAA,CAAS,oBAAoB,SAAA,CAAWE,CAAAA,CAAe,IAAI,CAAA,CAG3D,IAAMK,EAAgBd,CAAAA,CAAeR,CAAW,CAAA,CAC5CsB,CAAAA,CACFjC,CAAAA,CAAaiC,CAAAA,CAAe,CAAE,aAAA,CAAe,IAAK,CAAC,CAAA,CAEnD7B,EAAAA,CAAa,IAAI,EAGnBY,CAAAA,KACF,CAEA,SAASkB,CAAAA,EAAc,CAChBjB,IACLC,CAAAA,CAAS,IAAA,EACX,CAEA,SAASiB,CAAAA,EAAgB,CAClBlB,CAAAA,GACLC,CAAAA,CAAS,KAAA,EACX,CAEA,SAASkB,CAAAA,EAAoB,CAC3B,OAAOnB,CACT,CAEA,SAASoB,CAAAA,EAAoB,CAC3B,OAAOnB,CACT,CAEA,OAAO,CACL,QAAA,CAAAW,EACA,UAAA,CAAAJ,CAAAA,CACA,MAAAS,CAAAA,CACA,OAAA,CAAAC,EACA,QAAA,CAAAC,CAAAA,CACA,QAAA,CAAAC,CACF,CACF,CCvMO,SAASC,EAAAA,CACdX,CAAAA,CACoB,CACpB,OAAKA,CAAAA,CACD,OAAOA,GAAW,QAAA,CACb,QAAA,CAAS,aAAA,CAAcA,CAAM,CAAA,CAE/BA,CAAAA,CAJa,IAKtB,CAKO,SAASY,GAAsBC,CAAAA,CAA6B,CACjE,IAAMhD,CAAAA,CAAY,QAAA,CAAS,aAAA,CAAc,KAAK,CAAA,CAC9C,QACEA,CAAAA,CAAU,EAAA,CAAKgD,CAAAA,CAAAA,CAEjBhD,CAAAA,CAAU,YAAA,CAAa,sBAAA,CAAwB,EAAE,CAAA,CAC1CA,CACT,CAKO,SAASiD,EAAAA,CAAcrD,CAAAA,CAAmC,CAC3DA,CAAAA,EAAWA,CAAAA,CAAQ,YACrBA,CAAAA,CAAQ,UAAA,CAAW,YAAYA,CAAO,EAE1C,CAaO,SAASsD,EAAAA,EAA4B,CAE1C,IAAMC,CAAAA,CAAQ,QAAA,CAAS,aAAA,CAAc,KAAK,CAAA,CAC1CA,CAAAA,CAAM,MAAM,UAAA,CAAa,QAAA,CACzBA,CAAAA,CAAM,KAAA,CAAM,QAAA,CAAW,QAAA,CACvB,SAAS,IAAA,CAAK,WAAA,CAAYA,CAAK,CAAA,CAG/B,IAAMC,EAAQ,QAAA,CAAS,aAAA,CAAc,KAAK,CAAA,CAC1CD,CAAAA,CAAM,WAAA,CAAYC,CAAK,CAAA,CAGvB,IAAMC,EAAiBF,CAAAA,CAAM,WAAA,CAAcC,EAAM,WAAA,CAGjD,OAAAH,EAAAA,CAAcE,CAAK,CAAA,CAEZE,CACT,CAKO,SAASC,EAAAA,CAASC,EAAwBC,CAAAA,CAAgC,CAC/E,OAAI,CAACD,CAAAA,EAAU,CAACC,CAAAA,CAAc,KAAA,CACvBD,CAAAA,GAAWC,GAASD,CAAAA,CAAO,QAAA,CAASC,CAAK,CAClD,CCnEA,IAAIC,GAAY,CAAA,CAGZC,EAAAA,CAGO,IAAA,CAOX,SAASC,EAAAA,EAAiB,CACxB,OACE,OAAO,SAAA,CAAc,KACrB,kBAAA,CAAmB,IAAA,CAAK,UAAU,SAAS,CAE/C,CAMA,SAASC,EAAAA,EAA8C,CACrD,OAAO,CACL,CAAA,CAAG,OAAO,WAAA,EAAe,QAAA,CAAS,gBAAgB,UAAA,CAClD,CAAA,CAAG,MAAA,CAAO,WAAA,EAAe,QAAA,CAAS,eAAA,CAAgB,SACpD,CACF,CAIA,IAAIC,CAAAA,CAAkD,IAAA,CAKtD,SAASC,EAAAA,EAAa,CAIpB,GAHAL,EAAAA,EAAAA,CAGIA,EAAAA,CAAY,CAAA,CAAG,OAEnB,IAAMJ,CAAAA,CAAiBH,EAAAA,EAAkB,CACnCa,CAAAA,CAAe,MAAA,CAAO,WAAa,QAAA,CAAS,eAAA,CAAgB,WAAA,CAYlE,GATAL,EAAAA,CAAiB,CACf,SAAU,QAAA,CAAS,IAAA,CAAK,MAAM,QAAA,CAC9B,YAAA,CAAc,SAAS,IAAA,CAAK,KAAA,CAAM,YACpC,CAAA,CAGA,QAAA,CAAS,IAAA,CAAK,MAAM,QAAA,CAAW,QAAA,CAG3BK,GAAgBV,CAAAA,CAAiB,CAAA,CAAG,CACtC,IAAMW,CAAAA,CAAiB,QAAA,CACrB,gBAAA,CAAiB,QAAA,CAAS,IAAI,EAAE,YAAA,CAChC,EACF,GAAK,CAAA,CACL,QAAA,CAAS,KAAK,KAAA,CAAM,YAAA,CAAe,CAAA,EAAGA,CAAAA,CAAiBX,CAAc,CAAA,EAAA,EACvE,CAIIM,EAAAA,EAAM,GACRE,CAAAA,CAAiBD,EAAAA,EAAkB,CACnC,QAAA,CAAS,KAAK,KAAA,CAAM,QAAA,CAAW,OAAA,CAC/B,QAAA,CAAS,IAAA,CAAK,KAAA,CAAM,IAAM,CAAA,CAAA,EAAIC,CAAAA,CAAe,CAAC,CAAA,EAAA,CAAA,CAC9C,QAAA,CAAS,KAAK,KAAA,CAAM,IAAA,CAAO,CAAA,CAAA,EAAIA,CAAAA,CAAe,CAAC,CAAA,EAAA,CAAA,CAC/C,SAAS,IAAA,CAAK,KAAA,CAAM,KAAA,CAAQ,MAAA,EAGhC,CAMA,SAASI,IAAe,CAClBR,EAAAA,GAAc,CAAA,GAElBA,EAAAA,EAAAA,CAGI,EAAAA,EAAAA,CAAY,KAGZC,EAAAA,GACF,QAAA,CAAS,KAAK,KAAA,CAAM,QAAA,CAAWA,GAAe,QAAA,CAC9C,QAAA,CAAS,IAAA,CAAK,KAAA,CAAM,YAAA,CAAeA,EAAAA,CAAe,aAClDA,EAAAA,CAAiB,IAAA,CAAA,CAIfC,EAAAA,EAAM,EAAKE,CAAAA,GACb,QAAA,CAAS,KAAK,KAAA,CAAM,QAAA,CAAW,EAAA,CAC/B,QAAA,CAAS,IAAA,CAAK,KAAA,CAAM,IAAM,EAAA,CAC1B,QAAA,CAAS,KAAK,KAAA,CAAM,IAAA,CAAO,GAC3B,QAAA,CAAS,IAAA,CAAK,KAAA,CAAM,KAAA,CAAQ,EAAA,CAC5B,MAAA,CAAO,SAASA,CAAAA,CAAe,CAAA,CAAGA,EAAe,CAAC,CAAA,CAClDA,EAAiB,IAAA,CAAA,CAAA,EAErB,CAMA,SAASK,EAAAA,EAAoB,CAC3B,OAAOT,GAAY,CACrB,CA6BO,IAAMU,EAAAA,CAAyB,CACpC,KAAAL,EAAAA,CACA,MAAA,CAAAG,EAAAA,CACA,QAAA,CAAAC,EACF,CAAA,CCnIO,SAASE,EAAAA,CACdnI,CAAAA,CACqB,CACrB,GAAM,CAAE,QAAA,CAAAoI,EAAU,aAAA,CAAAC,CAAAA,CAAe,gBAAA,CAAAC,CAAAA,CAAkB,cAAA,CAAAC,CAAe,EAAIvI,CAAAA,CAElEsB,CAAAA,CAAwB,OACxBkH,CAAAA,CAAgD,IAAA,CAEpD,SAASC,CAAAA,EAAmB,CACtBD,CAAAA,GAAY,IAAA,GACd,YAAA,CAAaA,CAAO,EACpBA,CAAAA,CAAU,IAAA,EAEd,CAEA,SAAShH,CAAAA,CAASkH,CAAAA,CAAgC,CAC5CpH,CAAAA,GAAUoH,CAAAA,GACZpH,CAAAA,CAAQoH,CAAAA,CACRL,CAAAA,GAAgB/G,CAAK,GAEzB,CAEA,SAASqH,GAAmB,CAC1BF,CAAAA,GACAjH,CAAAA,CAAS,UAAU,CAAA,CACnB8G,CAAAA,GAAmB,OAAO,CAAA,CAE1BE,EAAU,UAAA,CAAW,IAAM,CACzBhH,CAAAA,CAAS,SAAS,CAAA,CAClB+G,IAAiB,OAAO,CAAA,CACxBC,CAAAA,CAAU,KACZ,CAAA,CAAGJ,CAAQ,EACb,CAEA,SAASQ,GAAkB,CACzBH,CAAAA,GACAjH,CAAAA,CAAS,SAAS,CAAA,CAClB8G,CAAAA,GAAmB,MAAM,CAAA,CAEzBE,EAAU,UAAA,CAAW,IAAM,CACzBhH,CAAAA,CAAS,QAAQ,EACjB+G,CAAAA,GAAiB,MAAM,CAAA,CAGvBC,CAAAA,CAAU,UAAA,CAAW,IAAM,CACzBhH,CAAAA,CAAS,MAAM,EACfgH,CAAAA,CAAU,KACZ,EAAG,CAAC,EACN,CAAA,CAAGJ,CAAQ,EACb,CAEA,SAASS,CAAAA,CAAOC,CAAAA,CAAyC,CACvDL,CAAAA,EAAW,CAEPK,CAAAA,GAAgB,UAClBtH,CAAAA,CAAS,SAAS,CAAA,EAElBA,CAAAA,CAAS,QAAQ,CAAA,CAEjBgH,EAAU,UAAA,CAAW,IAAM,CACzBhH,CAAAA,CAAS,MAAM,EACfgH,CAAAA,CAAU,KACZ,CAAA,CAAG,CAAC,CAAA,EAER,CAEA,SAASjH,CAAAA,EAA2B,CAClC,OAAOD,CACT,CAEA,SAASyH,GAAuB,CAC9B,OAAOzH,CAAAA,GAAU,UAAA,EAAcA,CAAAA,GAAU,SAC3C,CAEA,SAAS0H,CAAAA,EAAgB,CACvBP,CAAAA,EAAW,CACXnH,EAAQ,OACV,CAEA,OAAO,CACL,UAAA,CAAAqH,CAAAA,CACA,UAAAC,CAAAA,CACA,MAAA,CAAAC,CAAAA,CACA,QAAA,CAAAtH,CAAAA,CACA,WAAA,CAAAwH,EACA,OAAA,CAAAC,CACF,CACF,CAKO,SAASC,EAAAA,EAAqD,CACnE,IAAI3H,CAAAA,CAAwB,OAE5B,OAAO,CACL,YAAa,CACXA,CAAAA,CAAQ,UACV,CAAA,CACA,SAAA,EAAY,CACVA,EAAQ,OACV,CAAA,CACA,OAAOwH,CAAAA,CAAmC,CACxCxH,EAAQwH,CAAAA,GAAgB,SAAA,CAAY,SAAA,CAAY,OAClD,CAAA,CACA,QAAA,EAAW,CACT,OAAOxH,CACT,EACA,WAAA,EAAc,CACZ,OAAO,MACT,CAAA,CACA,OAAA,EAAU,CACRA,CAAAA,CAAQ,OACV,CACF,CACF,CCnIO,SAAS4H,EAAAA,CAAY9I,CAAAA,CAA+B,CACzD,OAAOA,CAAAA,CAAM,GAAA,GAAQ,QAAA,EAAYA,CAAAA,CAAM,GAAA,GAAQ,KAAA,EAASA,EAAM,OAAA,GAAY,EAC5E,CAwCO,SAAS+I,EAAAA,CACdnJ,EACgC,CAChC,GAAM,CAAE,aAAA,CAAAoJ,CAAAA,CAAe,eAAA,CAAAC,EAAiB,OAAA,CAAAC,CAAAA,CAAS,UAAA1G,CAAU,CAAA,CAAI5C,EAE/D,OAAO,SAAuBI,CAAAA,CAA4B,CAEnDwC,CAAAA,EAAU,EAEXsG,GAAY9I,CAAK,CAAA,GAEnBiJ,IAAkBjJ,CAAK,CAAA,CAGnBgJ,GAAiB,CAAChJ,CAAAA,CAAM,gBAAA,GAC1BA,CAAAA,CAAM,cAAA,EAAe,CACrBA,EAAM,eAAA,EAAgB,CACtBkJ,CAAAA,EAAQ,CAAA,EAGd,CACF,CC/DA,IAAMC,EAAAA,CAAoB,sBAAA,CAKnB,SAASC,EAAAA,CACdtD,CAAAA,CACa,CAEb,GAAIA,CAAAA,CAAQ,CACV,IAAMvC,CAAAA,CAAUkD,EAAAA,CAAWX,CAAM,CAAA,CACjC,GAAIvC,CAAAA,CAAS,OAAOA,CACtB,CAGA,IAAII,CAAAA,CAAY,QAAA,CAAS,eAAewF,EAAiB,CAAA,CAGzD,OAAKxF,CAAAA,GACHA,CAAAA,CAAY+C,EAAAA,CAAsByC,EAAiB,CAAA,CACnD,QAAA,CAAS,KAAK,WAAA,CAAYxF,CAAS,GAG9BA,CACT,CC3BA,IAAI0F,EAAAA,CAAU,CAAA,CAKP,SAASC,EAAAA,CAAWC,CAAAA,CAAiB,UAAA,CAAoB,CAC9D,OAAAF,EAAAA,EAAAA,CACO,CAAA,EAAGE,CAAM,CAAA,CAAA,EAAIF,EAAO,EAC7B,CAwBO,SAASG,EAAAA,CAAeC,CAAAA,CAI7B,CACA,OAAO,CACL,OAAA,CAASA,CAAAA,CACT,QAAS,CAAA,EAAGA,CAAM,SAClB,aAAA,CAAe,CAAA,EAAGA,CAAM,CAAA,YAAA,CAC1B,CACF,CCDO,SAASC,CAAAA,CAAYC,CAAAA,CAAiC,CAE3D,IAAM/J,CAAAA,CAASD,EAAAA,CAAYgK,CAAU,CAAA,CAG/BF,CAAAA,CAAS7J,CAAAA,CAAO,EAAA,EAAM0J,EAAAA,CAAW,OAAO,EACxCM,CAAAA,CAAMJ,EAAAA,CAAeC,CAAM,CAAA,CAG3BI,CAAAA,CAAcjK,EAAO,IAAA,EAAQA,CAAAA,CAAO,WAAA,EAAe,KAAA,CACnDkK,CAAAA,CAAe9I,EAAAA,CAAmBF,GAAmB+I,CAAW,CAAC,CAAA,CAGjEE,CAAAA,CAAsBnK,CAAAA,CAAO,QAAA,CAC/BmI,GAA0B,CACxB,QAAA,CAAUnI,CAAAA,CAAO,iBAAA,EAAqBF,CAAAA,CAAe,iBAAA,CACrD,cAAgBkC,CAAAA,EAAmB,CACjCkI,EAAa,QAAA,CAAS,CACpB,eAAAlI,CAAAA,CACA,OAAA,CAASF,EAAAA,CAAgBoI,CAAAA,CAAa,QAAA,EAAS,CAAE,KAAMlI,CAAc,CACvE,CAAC,EACH,CAAA,CACA,iBAAkBhC,CAAAA,CAAO,gBAAA,CACzB,cAAA,CAAgBA,CAAAA,CAAO,cACzB,CAAC,EACDiJ,EAAAA,EAA8B,CAG9BmB,EAA8B,IAAA,CAC9BC,CAAAA,CAAqC,KACrCC,CAAAA,CAAqC,IAAA,CACrCC,CAAAA,CAAuC,IAAA,CAGrC3E,CAAAA,CAAgBuD,EAAAA,CAAsB,CAC1C,aAAA,CAAenJ,CAAAA,CAAO,aAAA,EAAiBF,CAAAA,CAAe,aAAA,CACtD,eAAA,CAAiBE,EAAO,eAAA,CACxB,OAAA,CAAS,IAAMwK,CAAAA,EAAM,CACrB,SAAA,CAAW,IAAMN,CAAAA,CAAa,QAAA,GAAW,SAC3C,CAAC,EAID,SAASxE,CAAAA,CACPC,CAAAA,CACoB,CACpB,OAAKA,CAAAA,CACD,OAAOA,CAAAA,EAAQ,UAAA,CAAmBA,CAAAA,EAAI,CACnCA,CAAAA,CAFU,IAGnB,CAEA,SAAS8E,CAAAA,EAAuB,CAC1B,CAACJ,CAAAA,EAAkBD,CAAAA,EAClBpK,EAAO,SAAA,GAEZoK,CAAAA,CAAYrF,GAAgB,CAC1B,SAAA,CAAWsF,EACX,YAAA,CAAc3E,CAAAA,CAAe1F,CAAAA,CAAO,eAAe,CAAA,CACnD,WAAA,CAAa0F,EAAe1F,CAAAA,CAAO,aAAa,CAAA,CAChD,iBAAA,CAAmB,KAAA,CACnB,uBAAA,CAAyB,KAC3B,CAAC,CAAA,EACH,CAEA,SAAS0K,CAAAA,EAA0B,CAC7BN,IACFA,CAAAA,CAAU,UAAA,GACVA,CAAAA,CAAY,IAAA,EAEhB,CAEA,SAASO,CAAAA,EAA0B,CAE7B,CAACP,CAAAA,EAAapK,CAAAA,CAAO,WAAaqK,CAAAA,EACpCI,CAAAA,GAIEL,CAAAA,EAAa,CAACA,EAAU,QAAA,EAAS,EACnCA,CAAAA,CAAU,QAAA,GAEd,CAEA,SAASQ,CAAAA,EAAmB,CACZV,EAAa,QAAA,EAAS,CAC1B,OAGNlK,CAAAA,CAAO,YAAA,EACT0E,EAAAA,EAAU,CAIZwF,CAAAA,CAAa,QAAA,CAAS,CAAE,IAAA,CAAM,IAAA,CAAM,OAAA,CAAS,IAAK,CAAC,CAAA,CAG/ClK,EAAO,QAAA,CACTmK,CAAAA,CAAoB,UAAA,EAAW,CAE/BD,CAAAA,CAAa,QAAA,CAAS,CAAE,cAAA,CAAgB,SAAU,CAAC,CAAA,CAIrD1G,EAAAA,CAAc,KAAKf,EAAsB,CAAA,CAGrCzC,CAAAA,CAAO,aAAA,EACTkI,EAAAA,CAAW,IAAA,GAIblI,CAAAA,CAAO,MAAA,IAAS,CAChBA,CAAAA,CAAO,YAAA,GAAe,IAAI,GAI5B,CAEA,SAAS6K,CAAAA,EAAoB,CAE3B,GADcX,CAAAA,CAAa,UAAS,CACzB,IAAA,CAwBX,IArBAA,CAAAA,CAAa,QAAA,CAAS,CAAE,IAAA,CAAM,KAAM,CAAC,CAAA,CAGjClK,CAAAA,CAAO,QAAA,CACTmK,EAAoB,SAAA,EAAU,CAE9BD,CAAAA,CAAa,QAAA,CAAS,CAAE,cAAA,CAAgB,OAAQ,OAAA,CAAS,KAAM,CAAC,CAAA,CAIlE1G,EAAAA,CAAc,MAAA,CAAOf,EAAsB,CAAA,CAG3CiI,CAAAA,GAGI1K,CAAAA,CAAO,aAAA,EACTkI,GAAW,MAAA,EAAO,CAIhBlI,CAAAA,CAAO,YAAA,CAAc,CACvB,IAAM8K,EAAapF,CAAAA,CAAe1F,CAAAA,CAAO,aAAa,CAAA,CAClD8K,CAAAA,CACFvG,EAAauG,CAAU,CAAA,CAEvBnG,EAAAA,GAEJ,CAGA3E,CAAAA,CAAO,WAAU,CACjBA,CAAAA,CAAO,eAAe,KAAK,EAAA,CAC7B,CAEA,SAAS+K,CAAAA,CAAmBC,CAAAA,CAAqB,CAE/C,IAAM9E,CAAAA,CAAS8E,EAAE,MAAA,CAAA,CACC9E,CAAAA,GAAWoE,CAAAA,EAAkBpE,CAAAA,GAAWqE,CAAAA,IAI1DvK,CAAAA,CAAO,iBAAiBgL,CAAC,CAAA,CAErBhL,CAAAA,CAAO,mBAAA,EAAuB,CAACgL,CAAAA,CAAE,kBACnCR,CAAAA,EAAM,EAEV,CAIA,SAASS,CAAAA,EAAkB,CACzB,OAAOf,CAAAA,CAAa,QAAA,EAAS,CAAE,IACjC,CAEA,SAASgB,CAAAA,EAAqB,CAC5B,OAAOhB,CAAAA,CAAa,QAAA,GAAW,OACjC,CAEA,SAAS3I,CAAAA,EAAuB,CAC9B,OAAO2I,EAAa,QAAA,EACtB,CAEA,SAASpJ,CAAAA,CAAUC,EAAmD,CACpE,OAAOmJ,CAAAA,CAAa,SAAA,CAAUnJ,CAAQ,CACxC,CAEA,SAASgB,CAAAA,EAAa,CACpB6I,CAAAA,GACF,CAEA,SAASJ,CAAAA,EAAc,CACrBK,CAAAA,GACF,CAEA,SAASM,GAAe,CAClBF,CAAAA,GACFT,CAAAA,EAAM,CAENzI,IAEJ,CAEA,SAASqJ,CAAAA,EAAwB,CAC/B,OAAOlB,EAAa,QAAA,EAAS,CAAE,UACjC,CAEA,SAAStH,GAAqB,CAC5B,OAAOsH,CAAAA,CAAa,QAAA,EAAS,CAAE,SACjC,CAEA,SAASnB,EAAAA,EAAuB,CAC9B,OAAOoB,CAAAA,CAAoB,aAC7B,CAEA,SAASkB,CAAAA,EAAoC,CAC3C,OAAOnB,EAAa,QAAA,EAAS,CAAE,cACjC,CAEA,SAASoB,EAAAA,EAAmB,CAC1B,GAAI,CAACjB,CAAAA,CAAgB,OACrB,IAAMkB,CAAAA,CAAQtH,GAAkBoG,CAAc,CAAA,CAC1CkB,GAAOhH,CAAAA,CAAagH,CAAK,EAC/B,CAEA,SAASC,EAAAA,EAAkB,CACzB,GAAI,CAACnB,EAAgB,OACrB,IAAMoB,CAAAA,CAAOvH,EAAAA,CAAiBmG,CAAc,CAAA,CACxCoB,GAAMlH,CAAAA,CAAakH,CAAI,EAC7B,CAEA,SAASpE,EAAAA,CAAS1D,EAAkC,CAClD,OAAO0D,GAAYgD,CAAAA,CAAgB1G,CAAO,CAC5C,CAEA,SAAS+H,EAAAA,EAA+B,CACtC,OAAOlC,EAAAA,CAAmBxJ,EAAO,YAAY,CAC/C,CAIA,SAAS2L,EAAAA,EAA8B,CACrC,OAAO,CACL,sBAAA,CAAwB,EAAA,CACxB,YAAA,CAAcN,CAAAA,EAChB,CACF,CAEA,SAASO,IAAgC,CACvC,IAAMtK,EAAQC,CAAAA,EAAS,CACjBsK,CAAAA,CAAS1J,EAAAA,CAAgBb,CAAAA,CAAM,UAAU,EAE/C,OAAO,CACL,IAAMwK,CAAAA,EAAO,CACXxB,EAAiBwB,EACnB,CAAA,CACA,uBAAA,CAAyB,EAAA,CACzB,YAAA,CAAcxK,CAAAA,CAAM,eACpB,KAAA,CAAO,CACL,SAAU,OAAA,CACV,KAAA,CAAO,IACP,MAAA,CAAAuK,CACF,CAAA,CACA,OAAA,CAASd,CACX,CACF,CAEA,SAASgB,EAAAA,EAAoC,CAC3C,IAAMzK,CAAAA,CAAQC,CAAAA,GACRsK,CAAAA,CAAS1J,EAAAA,CAAgBb,CAAAA,CAAM,UAAU,CAAA,CAAI,CAAA,CAC7C0K,EAAiBhM,CAAAA,CAAO,cAAA,EAAkBF,EAAe,cAAA,CAE/D,OAAO,CACL,GAAA,CAAMgM,EAAAA,EAAO,CACXvB,CAAAA,CAAmBuB,GACrB,CAAA,CACA,0BAA2B,EAAA,CAC3B,YAAA,CAAcxK,CAAAA,CAAM,cAAA,CACpB,KAAA,CAAO,CACL,SAAU,OAAA,CACV,KAAA,CAAO,GAAA,CACP,OAAA,CAAS,MAAA,CACT,UAAA,CAAY,SACZ,cAAA,CAAgB,QAAA,CAChB,OAAAuK,CAAAA,CACA,QAAA,CAAUG,IAAmB,QAAA,CAAW,MAAA,CAAS,QACnD,CAAA,CACA,OAAA,CAASjB,CACX,CACF,CAEA,SAASkB,EAAAA,EAAgC,CACvC,IAAM3K,CAAAA,CAAQC,GAAS,CAEjB2K,CAAAA,CAAsB,CAC1B,GAAA,CAAMJ,CAAAA,EAAO,CACX,IAAMK,EAAAA,CAAU9B,CAAAA,GAAmB,KACnCA,CAAAA,CAAiByB,CAAAA,CAGbA,GAAMK,EAAAA,EAAW7K,CAAAA,CAAM,IAAA,GACzBmJ,CAAAA,EAAe,CACXzK,CAAAA,CAAO,WAET,qBAAA,CAAsB,IAAM,CAC1B2K,CAAAA,GACF,CAAC,CAAA,EAGP,CAAA,CACA,IAAA,CAAM3K,CAAAA,CAAO,IAAA,EAAQF,CAAAA,CAAe,KACpC,YAAA,CAAc,IAAA,CACd,wBAAyB,EAAA,CACzB,YAAA,CAAcwB,EAAM,cAAA,CACpB,QAAA,CAAU,EAAA,CACV,SAAA,CAAWsE,CACb,CAAA,CAGA,OAAI5F,CAAAA,CAAO,SAAA,CACTkM,CAAAA,CAAM,YAAY,CAAA,CAAIlM,CAAAA,CAAO,UACpBA,CAAAA,CAAO,cAAA,CAChBkM,CAAAA,CAAM,iBAAiB,CAAA,CAAIlM,CAAAA,CAAO,eAGlCkM,CAAAA,CAAM,iBAAiB,EAAIlC,CAAAA,CAAI,OAAA,CAG7BhK,EAAO,eAAA,CACTkM,CAAAA,CAAM,kBAAkB,CAAA,CAAIlM,CAAAA,CAAO,eAAA,CAEnCkM,EAAM,kBAAkB,CAAA,CAAIlC,CAAAA,CAAI,aAAA,CAG3BkC,CACT,CAEA,SAASE,EAAAA,CAAcC,CAAAA,CAA+B,CACpD,OAAO,CACL,EAAA,CAAIA,GAAYrC,CAAAA,CAAI,OAAA,CACpB,sBAAuB,EACzB,CACF,CAEA,SAASsC,EAAAA,CAAoBD,CAAAA,CAAqC,CAChE,OAAO,CACL,GAAIA,CAAAA,EAAYrC,CAAAA,CAAI,aAAA,CACpB,2BAAA,CAA6B,EAC/B,CACF,CAEA,SAASuC,EAAAA,EAAwC,CAC/C,OAAO,CACL,IAAA,CAAM,SACN,YAAA,CAAc,OAAA,CACd,sBAAuB,EAAA,CACvB,OAAA,CAAS,IAAM/B,CAAAA,EACjB,CACF,CAEA,SAASgC,EAAAA,EAAgC,CACvC,OAAO,CACL,KAAM,QAAA,CACN,eAAA,CAAiB,SACjB,eAAA,CAAiBvB,CAAAA,EAAO,CACxB,uBAAA,CAAyB,EAAA,CACzB,OAAA,CAAS,IAAMlJ,CAAAA,EACjB,CACF,CAEA,SAAS0K,IAAyB,CAChC,OAAO,CAAE,GAAGzM,CAAO,CACrB,CAEA,SAAS0M,EAAAA,CAAUC,CAAAA,CAAuC,CACxD,MAAA,CAAO,MAAA,CAAO3M,EAAQ2M,CAAS,EACjC,CAEA,SAAS3D,EAAAA,EAAgB,CACnBiC,GAAO,EACTT,CAAAA,GAEFE,CAAAA,EAAkB,CAClBP,EAAoB,OAAA,EAAQ,CAC5BE,CAAAA,CAAiB,IAAA,CACjBC,CAAAA,CAAiB,IAAA,CACjBC,EAAmB,KACrB,CAIA,IAAM9H,EAAAA,CAAuB,CAE3B,OAAAwI,CAAAA,CACA,SAAA,CAAAC,CAAAA,CACA,QAAA,CAAA3J,CAAAA,CACA,SAAA,CAAAT,EACA,IAAA,CAAAiB,CAAAA,CACA,MAAAyI,CAAAA,CACA,MAAA,CAAAW,EACA,aAAA,CAAAC,CAAAA,CACA,SAAA,CAAAxI,CAAAA,CACA,WAAA,CAAAmG,EAAAA,CACA,kBAAAsC,CAAAA,CACA,UAAA,CAAAC,EAAAA,CACA,SAAA,CAAAE,EAAAA,CACA,QAAA,CAAAnE,GACA,eAAA,CAAAqE,EAAAA,CACA,cAAA,CAAAC,EAAAA,CACA,eAAA,CAAAC,EAAAA,CACA,kBAAAG,EAAAA,CACA,eAAA,CAAAE,GACA,aAAA,CAAAG,EAAAA,CACA,oBAAAE,EAAAA,CACA,mBAAA,CAAAC,EAAAA,CACA,eAAA,CAAAC,EAAAA,CACA,SAAA,CAAAC,GACA,SAAA,CAAAC,EAAAA,CACA,QAAA1D,EAAAA,CAGA,GAAA,CAAKa,EACL,WAAA,CAAa,IAAMG,CAAAA,CAAI,OAAA,CACvB,iBAAA,CAAmB,IAAMA,EAAI,aAAA,CAC7B,cAAA,CAAiBrH,GAAUuH,CAAAA,CAAa,QAAA,CAAS,CAAE,UAAA,CAAYvH,CAAM,CAAC,CAAA,CACtE,aAAA,CAAgBiK,CAAAA,EAAU1C,EAAa,QAAA,CAAS,CAAE,SAAA,CAAW0C,CAAM,CAAC,CAAA,CACpE,mBAAoB,IAAMvC,CAAAA,CAC1B,mBAAA,CAAqBU,CAAAA,CACrB,cAAA,CAAgBnF,CAClB,EAGA,OAAIqE,CAAAA,EACFzG,GAAc,IAAA,CAAKf,EAAK,EAGnBA,EACT,CCnbA,IAAMoK,EAAAA,CAAeC,mBAAAA,CAAwC,IAAI,CAAA,CAK1D,SAASC,IAAqC,CACnD,IAAMC,CAAAA,CAAUC,gBAAAA,CAAWJ,EAAY,CAAA,CACvC,GAAI,CAACG,CAAAA,CACH,MAAM,IAAI,KAAA,CAAM,qDAAqD,CAAA,CAEvE,OAAOA,CACT,CAYA,IAAIE,EAAAA,CAAY,EAChB,SAASC,EAAAA,EAA0B,CACjC,OAAAD,EAAAA,EAAAA,CACO,CAAA,cAAA,EAAiBA,EAAS,CAAA,CACnC,CAKO,SAASE,EAAAA,CAAc,CAAE,QAAA,CAAAC,CAAS,CAAA,CAA2C,CAClF,GAAM,CAACC,CAAM,EAAIC,cAAAA,CAAS,IAAM,IAAI,GAA2B,CAAA,CACzD,EAAGC,CAAgB,CAAA,CAAID,eAAS,CAAC,CAAA,CAEjCE,EAAcC,iBAAAA,CAAY,IAAM,CACpCF,CAAAA,CAAkBG,CAAAA,EAAMA,CAAAA,CAAI,CAAC,EAC/B,CAAA,CAAG,EAAE,CAAA,CAECC,EAAYF,iBAAAA,CACf1N,CAAAA,EAKoC,CACnC,IAAM+G,CAAAA,CAAK/G,CAAAA,CAAO,IAAMmN,EAAAA,EAAgB,CAClC,CAAE,OAAA,CAAAU,CAAAA,CAAS,KAAA,CAAAC,EAAO,IAAA,CAAAC,CAAAA,CAAM,GAAGC,CAAY,CAAA,CAAIhO,CAAAA,CAE3CyC,EAAQqH,CAAAA,CAAY,CACxB,GAAGkE,CAAAA,CACH,OAAA,CAAS,IAAM,CACbA,CAAAA,CAAY,OAAA,IAAU,CACtBV,CAAAA,CAAO,MAAA,CAAOvG,CAAE,CAAA,CAChB0G,CAAAA,GACF,CACF,CAAC,CAAA,CAED,OAAAH,CAAAA,CAAO,GAAA,CAAIvG,CAAAA,CAAI,CACb,EAAA,CAAAA,CAAAA,CACA,MAAAtE,CAAAA,CACA,OAAA,CAAAoL,EACA,MAAA,CAAQG,CACV,CAAC,CAAA,CAEDvL,CAAAA,CAAM,IAAA,EAAK,CACXgL,CAAAA,EAAY,CAEL1G,CACT,CAAA,CACA,CAACuG,CAAAA,CAAQG,CAAW,CACtB,CAAA,CAEMQ,EAAaP,iBAAAA,CAChB3G,CAAAA,EAAe,CACd,IAAMmH,CAAAA,CAAUZ,CAAAA,CAAO,IAAIvG,CAAE,CAAA,CACzBmH,GACFA,CAAAA,CAAQ,KAAA,CAAM,QAElB,CAAA,CACA,CAACZ,CAAM,CACT,CAAA,CAEMlK,EAAWsK,iBAAAA,CAAY,IAAM,CACjCJ,CAAAA,CAAO,OAAA,CAASY,GAAY,CAC1BA,CAAAA,CAAQ,KAAA,CAAM,KAAA,GAChB,CAAC,EACH,CAAA,CAAG,CAACZ,CAAM,CAAC,CAAA,CAELrM,EAAQkN,aAAAA,CACZ,KAA0B,CACxB,MAAA,CAAAb,CAAAA,CACA,SAAA,CAAAM,EACA,UAAA,CAAAK,CAAAA,CACA,QAAA,CAAA7K,CAAAA,CACA,YAAA,CAAcqK,CAChB,GACA,CAACH,CAAAA,CAAQM,CAAAA,CAAWK,CAAAA,CAAY7K,CAAAA,CAAUqK,CAAW,CACvD,CAAA,CAGMW,CAAAA,CAAoC,EAAC,CAC3C,OAAAd,EAAO,OAAA,CAASY,CAAAA,EAAY,CAC1B,GAAM,CAAE,EAAA,CAAAnH,EAAI,KAAA,CAAAtE,CAAAA,CAAO,OAAA,CAAAoL,CAAQ,CAAA,CAAIK,CAAAA,CAG/B,GAAI,CAFUzL,CAAAA,CAAM,QAAA,EAAS,CAElB,OAAA,CAAS,OAEpB,IAAM4L,CAAAA,CAAc5L,CAAAA,CAAM,gBAAe,CACnC6L,CAAAA,CAAe7L,EAAM,eAAA,EAAgB,CACrC8L,CAAAA,CAAiB9L,CAAAA,CAAM,iBAAA,EAAkB,CACzC+L,EAAe/L,CAAAA,CAAM,eAAA,EAAgB,CAErCgM,CAAAA,CACJ,OAAOZ,CAAAA,EAAY,WACfA,CAAAA,CAAQ,CAAE,KAAA,CAAO,IAAMpL,CAAAA,CAAM,KAAA,EAAQ,CAAC,CAAA,CACtCoL,EAENO,CAAAA,CAAqB,IAAA,CACnBM,eAAC,KAAA,CAAA,CAEC,sBAAA,CAAsBL,CAAAA,CAAY,sBAAsB,CAAA,CACxD,YAAA,CAAYA,EAAY,YAAY,CAAA,CAEpC,SAAAK,cAAAA,CAAC,KAAA,CAAA,CACC,IAAKJ,CAAAA,CAAa,GAAA,CAClB,uBAAA,CAAsB,EAAA,CACtB,YAAA,CAAYA,CAAAA,CAAa,YAAY,CAAA,CACrC,KAAA,CAAO,CACL,GAAGA,CAAAA,CAAa,MAChB,eAAA,CAAiB,oBACnB,CAAA,CACA,OAAA,CAASA,CAAAA,CAAa,OAAA,CAEtB,SAAAI,cAAAA,CAAC,KAAA,CAAA,CACC,GAAA,CAAKH,CAAAA,CAAe,GAAA,CACpB,yBAAA,CAAwB,GACxB,YAAA,CAAYA,CAAAA,CAAe,YAAY,CAAA,CACvC,KAAA,CAAOA,CAAAA,CAAe,MACtB,OAAA,CAASA,CAAAA,CAAe,QAExB,QAAA,CAAAG,cAAAA,CAAC,OACC,GAAA,CAAKF,CAAAA,CAAa,GAAA,CAClB,IAAA,CAAMA,CAAAA,CAAa,IAAA,CACnB,aAAYA,CAAAA,CAAa,YAAY,CAAA,CACrC,iBAAA,CAAiBA,CAAAA,CAAa,iBAAiB,EAC/C,kBAAA,CAAkBA,CAAAA,CAAa,kBAAkB,CAAA,CACjD,uBAAA,CAAsB,EAAA,CACtB,aAAYA,CAAAA,CAAa,YAAY,EACrC,QAAA,CAAUA,CAAAA,CAAa,SACvB,SAAA,CAAWA,CAAAA,CAAa,SAAA,CACxB,KAAA,CAAO,CACL,eAAA,CAAiB,QACjB,YAAA,CAAc,KAAA,CACd,OAAA,CAAS,MAAA,CACT,QAAA,CAAU,OAAA,CACV,MAAO,MAAA,CACP,SAAA,CAAW,uCACb,CAAA,CAEC,QAAA,CAAAC,CAAAA,CACH,EACF,CAAA,CACF,CAAA,CAAA,CA3CK1H,CA4CP,CACF,EACF,CAAC,CAAA,CAGC4H,eAAAA,CAAC9B,EAAAA,CAAa,QAAA,CAAb,CAAsB,KAAA,CAAO5L,EAC3B,QAAA,CAAA,CAAAoM,CAAAA,CACAe,GACH,CAEJ,CC1KO,SAASQ,GAAS5O,CAAAA,CAAsC,CAE7D,IAAM6O,CAAAA,CAAWC,YAAAA,CAAqB,IAAI,EACpCC,CAAAA,CAAYD,YAAAA,CAAO9O,CAAM,CAAA,CAE1B6O,CAAAA,CAAS,OAAA,GACZA,EAAS,OAAA,CAAU/E,CAAAA,CAAY9J,CAAM,CAAA,CAAA,CAIvC,GAAM,CAACsB,EAAOE,CAAQ,CAAA,CAAI+L,eAAqB,IAC7CsB,CAAAA,CAAS,QAAS,QAAA,EACpB,CAAA,CAGAG,eAAAA,CAAU,IAAM,CACVD,EAAU,OAAA,GAAY/O,CAAAA,EAAUA,CAAAA,GAClC+O,CAAAA,CAAU,OAAA,CAAU/O,CAAAA,CACpB6O,EAAS,OAAA,EAAS,SAAA,CAAU7O,CAAM,CAAA,EAEtC,CAAA,CAAG,CAACA,CAAM,CAAC,CAAA,CAGXgP,gBAAU,IAAM,CACVhP,GAAQ,IAAA,GAAS,MAAA,GACfA,CAAAA,CAAO,IAAA,EAAQ,CAAC6O,CAAAA,CAAS,SAAS,MAAA,EAAO,CAC3CA,CAAAA,CAAS,OAAA,EAAS,IAAA,EAAK,CACd,CAAC7O,CAAAA,CAAO,IAAA,EAAQ6O,CAAAA,CAAS,OAAA,EAAS,MAAA,EAAO,EAClDA,EAAS,OAAA,EAAS,KAAA,IAGxB,CAAA,CAAG,CAAC7O,GAAQ,IAAI,CAAC,CAAA,CAGjBgP,eAAAA,CAAU,IAAM,CACd,IAAMvM,CAAAA,CAAQoM,CAAAA,CAAS,QACvB,GAAKpM,CAAAA,CAEL,OAAOA,CAAAA,CAAM,SAAA,CAAWiG,CAAAA,EAAa,CACnClH,CAAAA,CAASkH,CAAQ,EACnB,CAAC,CACH,EAAG,EAAE,EAGLsG,eAAAA,CAAU,IACD,IAAM,CACXH,CAAAA,CAAS,OAAA,EAAS,UACpB,CAAA,CACC,EAAE,CAAA,CAGL,IAAM9M,EAAO2L,iBAAAA,CAAY,IAAMmB,CAAAA,CAAS,OAAA,EAAS,IAAA,EAAK,CAAG,EAAE,CAAA,CACrDrE,EAAQkD,iBAAAA,CAAY,IAAMmB,EAAS,OAAA,EAAS,KAAA,EAAM,CAAG,EAAE,CAAA,CACvD1D,EAASuC,iBAAAA,CAAY,IAAMmB,CAAAA,CAAS,OAAA,EAAS,MAAA,EAAO,CAAG,EAAE,CAAA,CACzDvD,CAAAA,CAAaoC,iBAAAA,CAAY,IAAMmB,CAAAA,CAAS,SAAS,UAAA,EAAW,CAAG,EAAE,CAAA,CACjErD,EAAYkC,iBAAAA,CAAY,IAAMmB,CAAAA,CAAS,OAAA,EAAS,SAAA,EAAU,CAAG,EAAE,CAAA,CAG/DrC,CAAAA,CAAkBkB,iBAAAA,CACtB,IAAMmB,CAAAA,CAAS,QAAS,eAAA,EAAgB,CACxC,EACF,CAAA,CACMjD,CAAAA,CAAkB8B,kBACtB,IAAMmB,CAAAA,CAAS,QAAS,eAAA,EAAgB,CACxC,EACF,CAAA,CACM9C,CAAAA,CAAoB2B,iBAAAA,CACxB,IAAMmB,CAAAA,CAAS,QAAS,iBAAA,EAAkB,CAC1C,EACF,CAAA,CACM5C,EAAkByB,iBAAAA,CACtB,IAAMmB,CAAAA,CAAS,OAAA,CAAS,eAAA,EAAgB,CACxC,EACF,CAAA,CACMzC,EAAgBsB,iBAAAA,CACnB3G,CAAAA,EAAgB8H,EAAS,OAAA,CAAS,aAAA,CAAc9H,CAAE,CAAA,CACnD,EACF,EACMuF,CAAAA,CAAsBoB,iBAAAA,CACzB3G,CAAAA,EAAgB8H,CAAAA,CAAS,OAAA,CAAS,mBAAA,CAAoB9H,CAAE,CAAA,CACzD,EACF,CAAA,CACMwF,CAAAA,CAAsBmB,iBAAAA,CAC1B,IAAMmB,CAAAA,CAAS,OAAA,CAAS,qBAAoB,CAC5C,EACF,CAAA,CAEA,OAAOV,aAAAA,CACL,KAAO,CACL,MAAA,CAAQ7M,EAAM,IAAA,CACd,cAAA,CAAgBA,CAAAA,CAAM,cAAA,CACtB,UAAA,CAAYA,CAAAA,CAAM,WAClB,SAAA,CAAWA,CAAAA,CAAM,SAAA,CACjB,IAAA,CAAAS,CAAAA,CACA,KAAA,CAAAyI,EACA,MAAA,CAAAW,CAAAA,CACA,WAAAG,CAAAA,CACA,SAAA,CAAAE,EACA,eAAA,CAAAgB,CAAAA,CACA,eAAA,CAAAZ,CAAAA,CACA,iBAAA,CAAAG,CAAAA,CACA,gBAAAE,CAAAA,CACA,aAAA,CAAAG,CAAAA,CACA,mBAAA,CAAAE,CAAAA,CACA,mBAAA,CAAAC,EACA,KAAA,CAAOsC,CAAAA,CAAS,OAClB,CAAA,CAAA,CACA,CACEvN,CAAAA,CACAS,EACAyI,CAAAA,CACAW,CAAAA,CACAG,EACAE,CAAAA,CACAgB,CAAAA,CACAZ,EACAG,CAAAA,CACAE,CAAAA,CACAG,CAAAA,CACAE,CAAAA,CACAC,CACF,CACF,CACF,CC5JO,SAAS0C,EAAAA,CAAqBxM,CAAAA,CAKnC,CACA,IAAMyM,CAAAA,CAAS,QAAA,CAAS,cAAc,KAAK,CAAA,CACrCb,EAAc5L,CAAAA,CAAM,cAAA,GAC1ByM,CAAAA,CAAO,YAAA,CAAa,sBAAA,CAAwBb,CAAAA,CAAY,sBAAsB,CAAC,EAC/Ea,CAAAA,CAAO,YAAA,CAAa,YAAA,CAAcb,CAAAA,CAAY,YAAY,CAAC,EAE3D,IAAMc,CAAAA,CAAU,QAAA,CAAS,aAAA,CAAc,KAAK,CAAA,CACtCb,EAAe7L,CAAAA,CAAM,eAAA,GAC3B0M,CAAAA,CAAQ,YAAA,CAAa,wBAAyB,EAAE,CAAA,CAChDA,CAAAA,CAAQ,YAAA,CAAa,YAAA,CAAcb,CAAAA,CAAa,YAAY,CAAC,CAAA,CAC7D,OAAO,MAAA,CAAOa,CAAAA,CAAQ,MAAOb,CAAAA,CAAa,KAAK,CAAA,CAC/Ca,CAAAA,CAAQ,KAAA,CAAM,eAAA,CAAkB,qBAChCb,CAAAA,CAAa,GAAA,CAAIa,CAAO,CAAA,CAExB,IAAMpL,EAAY,QAAA,CAAS,aAAA,CAAc,KAAK,CAAA,CACxCwK,CAAAA,CAAiB9L,CAAAA,CAAM,mBAAkB,CAC/CsB,CAAAA,CAAU,YAAA,CAAa,yBAAA,CAA2B,EAAE,CAAA,CACpDA,EAAU,YAAA,CAAa,YAAA,CAAcwK,CAAAA,CAAe,YAAY,CAAC,CAAA,CACjE,OAAO,MAAA,CAAOxK,CAAAA,CAAU,MAAOwK,CAAAA,CAAe,KAAK,EACnDA,CAAAA,CAAe,GAAA,CAAIxK,CAAS,CAAA,CAE5B,IAAM8J,CAAAA,CAAU,SAAS,aAAA,CAAc,KAAK,EACtCW,CAAAA,CAAe/L,CAAAA,CAAM,iBAAgB,CAC3C,OAAAoL,CAAAA,CAAQ,YAAA,CAAa,MAAA,CAAQW,CAAAA,CAAa,IAAI,CAAA,CAC9CX,CAAAA,CAAQ,aAAa,YAAA,CAAc,MAAM,EACrCW,CAAAA,CAAa,iBAAiB,CAAA,EAChCX,CAAAA,CAAQ,YAAA,CAAa,iBAAA,CAAmBW,EAAa,iBAAiB,CAAC,CAAA,CAErEA,CAAAA,CAAa,kBAAkB,CAAA,EACjCX,EAAQ,YAAA,CAAa,kBAAA,CAAoBW,CAAAA,CAAa,kBAAkB,CAAC,CAAA,CAE3EX,EAAQ,YAAA,CAAa,uBAAA,CAAyB,EAAE,CAAA,CAChDA,CAAAA,CAAQ,aAAa,YAAA,CAAcW,CAAAA,CAAa,YAAY,CAAC,CAAA,CAC7DX,CAAAA,CAAQ,aAAa,UAAA,CAAY,IAAI,CAAA,CACrCA,CAAAA,CAAQ,KAAA,CAAM,eAAA,CAAkB,QAChCA,CAAAA,CAAQ,KAAA,CAAM,YAAA,CAAe,KAAA,CAC7BA,CAAAA,CAAQ,KAAA,CAAM,QAAU,MAAA,CACxBA,CAAAA,CAAQ,MAAM,QAAA,CAAW,OAAA,CACzBA,EAAQ,KAAA,CAAM,KAAA,CAAQ,MAAA,CACtBA,CAAAA,CAAQ,KAAA,CAAM,SAAA,CAAY,wCAC1BW,CAAAA,CAAa,GAAA,CAAIX,CAAO,CAAA,CAGxBA,CAAAA,CAAQ,gBAAA,CAAiB,UAAY7C,CAAAA,EAAM,CACzCwD,CAAAA,CAAa,SAAA,CAAUxD,CAAC,EAC1B,CAAC,CAAA,CAGDjH,CAAAA,CAAU,YAAY8J,CAAO,CAAA,CAC7BsB,EAAQ,WAAA,CAAYpL,CAAS,CAAA,CAC7BmL,CAAAA,CAAO,WAAA,CAAYC,CAAO,EAEnB,CAAE,MAAA,CAAAD,EAAQ,OAAA,CAAAC,CAAAA,CAAS,UAAApL,CAAAA,CAAW,OAAA,CAAA8J,CAAQ,CAC/C,CAKO,SAASuB,GACdC,CAAAA,CACgC,CAChC,OAAOvF,CAAAA,CAAY,CACjB,oBAAqB,KAAA,CACrB,aAAA,CAAe,IAAA,CACf,SAAA,CAAW,IAAA,CACX,aAAA,CAAe,KACf,IAAA,CAAM,aAAA,CACN,QAAA,CAAU,KAAA,CACV,GAAGuF,CACL,CAAC,CACH,CAKO,SAASC,CAAAA,CACdC,CAAAA,CACAC,CAAAA,CAAyB,UACnB,CASN,OARAD,EAAO,KAAA,CAAM,OAAA,CAAU,WACvBA,CAAAA,CAAO,KAAA,CAAM,YAAA,CAAe,KAAA,CAC5BA,CAAAA,CAAO,KAAA,CAAM,OAAS,MAAA,CACtBA,CAAAA,CAAO,KAAA,CAAM,MAAA,CAAS,SAAA,CACtBA,CAAAA,CAAO,MAAM,UAAA,CAAa,KAAA,CAC1BA,CAAAA,CAAO,KAAA,CAAM,QAAA,CAAW,MAAA,CACxBA,EAAO,KAAA,CAAM,UAAA,CAAa,wBAElBC,CAAAA,EACN,KAAK,SAAA,CACHD,CAAAA,CAAO,KAAA,CAAM,eAAA,CAAkB,SAAA,CAC/BA,CAAAA,CAAO,MAAM,KAAA,CAAQ,OAAA,CACrB,MACF,KAAK,QAAA,CACL,KAAK,QACHA,CAAAA,CAAO,KAAA,CAAM,eAAA,CAAkB,SAAA,CAC/BA,CAAAA,CAAO,KAAA,CAAM,MAAQ,OAAA,CACrB,MACF,KAAK,SAAA,CACHA,CAAAA,CAAO,MAAM,eAAA,CAAkB,SAAA,CAC/BA,CAAAA,CAAO,KAAA,CAAM,KAAA,CAAQ,OAAA,CACrB,MACF,KAAK,SAAA,CACHA,EAAO,KAAA,CAAM,eAAA,CAAkB,UAC/BA,CAAAA,CAAO,KAAA,CAAM,KAAA,CAAQ,OAAA,CACrB,MACF,KAAK,OACHA,CAAAA,CAAO,KAAA,CAAM,gBAAkB,SAAA,CAC/BA,CAAAA,CAAO,MAAM,KAAA,CAAQ,OAAA,CACrB,MACF,QACEA,CAAAA,CAAO,KAAA,CAAM,gBAAkB,SAAA,CAC/BA,CAAAA,CAAO,KAAA,CAAM,KAAA,CAAQ,UACzB,CACF,CAKO,SAASE,EAAAA,CACd3B,CAAAA,CACArL,CAAAA,CACoB,CACpB,IAAMiN,EAAajN,CAAAA,CAAM,aAAA,GACnBkN,CAAAA,CAAU,QAAA,CAAS,cAAc,IAAI,CAAA,CAC3C,OAAAA,CAAAA,CAAQ,EAAA,CAAKD,CAAAA,CAAW,GACxBC,CAAAA,CAAQ,YAAA,CAAa,qBAAA,CAAuB,EAAE,CAAA,CAC9CA,CAAAA,CAAQ,YAAc7B,CAAAA,CACtB6B,CAAAA,CAAQ,KAAA,CAAM,MAAA,CAAS,WAAA,CACvBA,CAAAA,CAAQ,MAAM,QAAA,CAAW,MAAA,CACzBA,EAAQ,KAAA,CAAM,UAAA,CAAa,MAC3BA,CAAAA,CAAQ,KAAA,CAAM,KAAA,CAAQ,SAAA,CACfA,CACT,CAKO,SAASC,EAAAA,CACdC,CAAAA,CACApN,CAAAA,CACsB,CACtB,IAAMqN,CAAAA,CAAYrN,EAAM,mBAAA,EAAoB,CACtCsN,CAAAA,CAAY,QAAA,CAAS,aAAA,CAAc,GAAG,EAC5C,OAAAA,CAAAA,CAAU,GAAKD,CAAAA,CAAU,EAAA,CACzBC,EAAU,YAAA,CAAa,2BAAA,CAA6B,EAAE,CAAA,CACtDA,CAAAA,CAAU,WAAA,CAAcF,EACxBE,CAAAA,CAAU,KAAA,CAAM,OAAS,YAAA,CACzBA,CAAAA,CAAU,MAAM,QAAA,CAAW,MAAA,CAC3BA,CAAAA,CAAU,KAAA,CAAM,KAAA,CAAQ,SAAA,CACxBA,EAAU,KAAA,CAAM,UAAA,CAAa,MACtBA,CACT,CAKO,SAASC,EAAAA,EAAwC,CACtD,IAAMjM,CAAAA,CAAY,QAAA,CAAS,aAAA,CAAc,KAAK,CAAA,CAC9C,OAAAA,CAAAA,CAAU,KAAA,CAAM,OAAA,CAAU,MAAA,CAC1BA,EAAU,KAAA,CAAM,cAAA,CAAiB,UAAA,CACjCA,CAAAA,CAAU,KAAA,CAAM,GAAA,CAAM,MACfA,CACT,CC5KA,IAAMkM,EAAAA,CAA2D,CAE/D,WAAA,CAAa,SAAA,CACb,UAAA,CAAY,QAAA,CACZ,OAAA,CAAS,UACT,mBAAA,CAAqB,KAAA,CACrB,cAAe,IACjB,CAAA,CAQO,SAASC,CAAAA,CACdC,CAAAA,CAC2B,CAC3B,OAAO,IAAI,OAAA,CAASC,GAAY,CAE9B,IAAM5L,EACJ,OAAO2L,CAAAA,EAAqB,SACxB,CAAE,OAAA,CAASA,CAAiB,CAAA,CAC5BA,CAAAA,CAEA,CACJ,MAAArC,CAAAA,CACA,OAAA,CAAA+B,CAAAA,CACA,WAAA,CAAAQ,CAAAA,CAAcJ,EAAAA,CAAgB,YAC9B,UAAA,CAAAK,CAAAA,CAAaL,EAAAA,CAAgB,UAAA,CAC7B,OAAA,CAAAT,CAAAA,CAAUS,GAAgB,OAAA,CAC1B,mBAAA,CAAAM,EAAsBN,EAAAA,CAAgB,mBAAA,CACtC,cAAA7G,CAAAA,CAAgB6G,EAAAA,CAAgB,aAAA,CAChC,OAAA,CAAAO,CACF,CAAA,CAAIhM,EAGAiM,CAAAA,CAAW,KAAA,CAGThO,EAAQ2M,EAAAA,CAAkB,CAC9B,oBAAAmB,CAAAA,CACA,aAAA,CAAAnH,CAAAA,CACA,OAAA,CAAS,IAAM,CACRqH,IACHA,CAAAA,CAAW,IAAA,CACXL,EAAQ,KAAK,CAAA,CAAA,CAEfM,IACF,CACF,CAAC,CAAA,CAGK,CAAE,MAAA,CAAAxB,EAAQ,OAAA,CAAArB,CAAQ,CAAA,CAAIoB,EAAAA,CAAqBxM,CAAK,CAAA,CAGlDqL,GACFD,CAAAA,CAAQ,WAAA,CAAY4B,EAAAA,CAAmB3B,CAAAA,CAAOrL,CAAK,CAAC,EAItDoL,CAAAA,CAAQ,WAAA,CAAY+B,GAAqBC,CAAAA,CAASpN,CAAK,CAAC,CAAA,CAGxD,IAAMkO,CAAAA,CAAkBX,EAAAA,EAAsB,CAGxCY,CAAAA,CAAmCJ,GAAW,CAClD,CAAE,IAAA,CAAMF,CAAAA,CAAY,KAAA,CAAO,KAAA,CAAO,QAAS,SAAU,CAAA,CACrD,CAAE,IAAA,CAAMD,CAAAA,CAAa,KAAA,CAAO,KAAM,OAAA,CAASb,CAAAA,GAAY,UAAY,SAAA,CAAYA,CAAAA,CAAS,UAAW,IAAK,CAC1G,CAAA,CAGIqB,CAAAA,CAA4C,IAAA,CAEhDD,CAAAA,CAAgB,QAASE,CAAAA,EAAc,CACrC,IAAMvB,CAAAA,CAAS,QAAA,CAAS,aAAA,CAAc,QAAQ,CAAA,CAC9CA,CAAAA,CAAO,WAAA,CAAcuB,CAAAA,CAAU,IAAA,CAC/BvB,CAAAA,CAAO,KAAO,QAAA,CACdD,CAAAA,CAAYC,EAAQuB,CAAAA,CAAU,OAAO,EAErCvB,CAAAA,CAAO,gBAAA,CAAiB,OAAA,CAAS,IAAM,CACrCkB,CAAAA,CAAW,KACXhO,CAAAA,CAAM,KAAA,GACN2N,CAAAA,CAAQU,CAAAA,CAAU,KAAK,EACzB,CAAC,CAAA,CAEGA,CAAAA,CAAU,SAAA,GACZD,CAAAA,CAAkBtB,GAGpBoB,CAAAA,CAAgB,WAAA,CAAYpB,CAAM,EACpC,CAAC,EAED1B,CAAAA,CAAQ,WAAA,CAAY8C,CAAe,CAAA,CAGnC,SAASD,CAAAA,EAAgB,CACvBjO,CAAAA,CAAM,OAAA,EAAQ,CACdyM,CAAAA,CAAO,MAAA,GACT,CAGA,QAAA,CAAS,IAAA,CAAK,WAAA,CAAYA,CAAM,CAAA,CAChCzM,CAAAA,CAAM,MAAK,CAGPoO,CAAAA,EACF,sBAAsB,IAAM,CAC1BA,GAAiB,KAAA,GACnB,CAAC,EAEL,CAAC,CACH,CCvHO,SAASE,EAAAA,EAAa,CAC3B,OAAOrD,iBAAAA,CAEHyC,CAAAA,EAEI,OAAOA,CAAAA,EAAqB,QAAA,CACvBD,CAAAA,CAAUC,CAAgB,CAAA,CAE/B,SAAA,GAAaA,GAAoBA,CAAAA,CAAiB,OAAA,CAC7CD,EAAUC,CAA0C,CAAA,CAEtDD,EAAUC,CAAkC,CAAA,CAErD,EACF,CACF,CCRA,IAAMF,EAAAA,CAAyD,CAE7D,WAAA,CAAa,IAAA,CACb,OAAA,CAAS,SACX,CAAA,CAKA,SAASe,EAAAA,CAAiBC,CAAAA,CAAsD,CAC9E,OAAQA,CAAAA,EACN,KAAK,SAAA,CACH,OAAO,SAAA,CACT,KAAK,SAAA,CACH,OAAO,SAAA,CACT,KAAK,QACH,OAAO,QAAA,CACT,KAAK,MAAA,CACH,OAAO,MAAA,CACT,QACE,OAAO,SACX,CACF,CAOO,SAASC,GAAMf,CAAAA,CAAwD,CAC5E,OAAO,IAAI,OAAA,CAASC,CAAAA,EAAY,CAE9B,IAAM5L,CAAAA,CACJ,OAAO2L,CAAAA,EAAqB,QAAA,CACxB,CAAE,OAAA,CAASA,CAAiB,CAAA,CAC5BA,EAEA,CACJ,KAAA,CAAArC,CAAAA,CACA,OAAA,CAAA+B,CAAAA,CACA,WAAA,CAAAQ,EAAcJ,EAAAA,CAAgB,WAAA,CAC9B,QAAAT,CAAAA,CAAUS,EAAAA,CAAgB,OAC5B,CAAA,CAAIzL,CAAAA,CAGE/B,CAAAA,CAAQ2M,EAAAA,CAAkB,CAC9B,mBAAA,CAAqB,MACrB,aAAA,CAAe,IAAA,CACf,OAAA,CAAS,IAAM,CACbgB,CAAAA,GACAM,CAAAA,GACF,CACF,CAAC,CAAA,CAGK,CAAE,OAAAxB,CAAAA,CAAQ,OAAA,CAAArB,CAAQ,CAAA,CAAIoB,EAAAA,CAAqBxM,CAAK,CAAA,CAGlDqL,CAAAA,EACFD,CAAAA,CAAQ,WAAA,CAAY4B,EAAAA,CAAmB3B,CAAAA,CAAOrL,CAAK,CAAC,CAAA,CAItDoL,CAAAA,CAAQ,WAAA,CAAY+B,EAAAA,CAAqBC,CAAAA,CAASpN,CAAK,CAAC,CAAA,CAGxD,IAAMkO,CAAAA,CAAkBX,EAAAA,EAAsB,CAGxCmB,EAAgB,QAAA,CAAS,aAAA,CAAc,QAAQ,CAAA,CACrDA,CAAAA,CAAc,YAAcd,CAAAA,CAC5Bc,CAAAA,CAAc,IAAA,CAAO,QAAA,CACrB7B,CAAAA,CAAY6B,CAAAA,CAAeH,GAAiBxB,CAAO,CAAC,EAEpD2B,CAAAA,CAAc,gBAAA,CAAiB,QAAS,IAAM,CAC5C1O,CAAAA,CAAM,KAAA,GACR,CAAC,EAEDkO,CAAAA,CAAgB,WAAA,CAAYQ,CAAa,CAAA,CACzCtD,CAAAA,CAAQ,YAAY8C,CAAe,CAAA,CAGnC,SAASD,CAAAA,EAAgB,CACvBjO,CAAAA,CAAM,SAAQ,CACdyM,CAAAA,CAAO,MAAA,GACT,CAGA,QAAA,CAAS,KAAK,WAAA,CAAYA,CAAM,CAAA,CAChCzM,CAAAA,CAAM,IAAA,EAAK,CAGX,sBAAsB,IAAM,CAC1B0O,EAAc,KAAA,GAChB,CAAC,EACH,CAAC,CACH,CCvGO,SAASC,EAAAA,EAAW,CACzB,OAAO1D,iBAAAA,CACJyC,GACK,OAAOA,CAAAA,EAAqB,SACvBe,EAAAA,CAAQf,CAAgB,CAAA,CAE1Be,EAAAA,CAAQf,CAAgB,CAAA,CAEjC,EACF,CACF,CCJA,IAAMF,CAAAA,CAEF,CACF,WAAA,CAAa,EAAA,CACb,aAAc,EAAA,CACd,WAAA,CAAa,IAAA,CACb,UAAA,CAAY,QAAA,CACZ,IAAA,CAAM,OACN,QAAA,CAAU,KAAA,CACV,SAAA,CAAW,CAAA,CACX,SAAA,CAAW,CAAA,CAAA,CACb,EAOO,SAASoB,EAAAA,CACdlB,EACwB,CACxB,OAAO,IAAI,OAAA,CAASC,CAAAA,EAAY,CAE9B,IAAM5L,CAAAA,CACJ,OAAO2L,GAAqB,QAAA,CACxB,CAAE,QAASA,CAAiB,CAAA,CAC5BA,EAEA,CACJ,KAAA,CAAArC,CAAAA,CACA,OAAA,CAAA+B,CAAAA,CACA,WAAA,CAAAyB,EAAcrB,CAAAA,CAAgB,WAAA,CAC9B,aAAAsB,CAAAA,CAAetB,CAAAA,CAAgB,aAC/B,WAAA,CAAAI,CAAAA,CAAcJ,CAAAA,CAAgB,WAAA,CAC9B,UAAA,CAAAK,CAAAA,CAAaL,EAAgB,UAAA,CAC7B,IAAA,CAAAuB,CAAAA,CAAOvB,CAAAA,CAAgB,IAAA,CACvB,QAAA,CAAAwB,EACA,QAAA,CAAAC,CAAAA,CAAWzB,CAAAA,CAAgB,QAAA,CAC3B,SAAA,CAAA0B,CAAAA,CAAY1B,EAAgB,SAAA,CAC5B,SAAA,CAAA2B,EAAY3B,CAAAA,CAAgB,SAC9B,EAAIzL,CAAAA,CAGAiM,CAAAA,CAAW,KAAA,CAGThO,CAAAA,CAAQ2M,EAAAA,CAAkB,CAC9B,oBAAqB,KAAA,CACrB,aAAA,CAAe,IAAA,CACf,OAAA,CAAS,IAAM,CACRqB,IACHA,CAAAA,CAAW,IAAA,CACXL,CAAAA,CAAQ,IAAI,CAAA,CAAA,CAEdM,EAAAA,GACF,CACF,CAAC,EAGK,CAAE,MAAA,CAAAxB,EAAQ,OAAA,CAAArB,CAAQ,CAAA,CAAIoB,EAAAA,CAAqBxM,CAAK,CAAA,CAGlDqL,GACFD,CAAAA,CAAQ,WAAA,CAAY4B,EAAAA,CAAmB3B,CAAAA,CAAOrL,CAAK,CAAC,EAIlDoN,CAAAA,EACFhC,CAAAA,CAAQ,WAAA,CAAY+B,EAAAA,CAAqBC,CAAAA,CAASpN,CAAK,CAAC,CAAA,CAI1D,IAAMoP,EAAiB,QAAA,CAAS,aAAA,CAAc,KAAK,CAAA,CACnDA,CAAAA,CAAe,KAAA,CAAM,YAAA,CAAe,MAAA,CAGpC,IAAMC,EAAQ,QAAA,CAAS,aAAA,CAAc,OAAO,CAAA,CAC5CA,CAAAA,CAAM,KAAON,CAAAA,CACbM,CAAAA,CAAM,KAAA,CAAQP,CAAAA,CACVD,CAAAA,GAAaQ,CAAAA,CAAM,YAAcR,CAAAA,CAAAA,CACjCI,CAAAA,GAAUI,EAAM,QAAA,CAAW,IAAA,CAAA,CAC3BH,EAAY,CAAA,GAAGG,CAAAA,CAAM,SAAA,CAAYH,CAAAA,CAAAA,CACjCC,CAAAA,CAAY,CAAA,CAAA,CAAA,GAAUE,EAAM,SAAA,CAAYF,CAAAA,CAAAA,CAE5CE,CAAAA,CAAM,KAAA,CAAM,KAAA,CAAQ,MAAA,CACpBA,EAAM,KAAA,CAAM,OAAA,CAAU,UAAA,CACtBA,CAAAA,CAAM,KAAA,CAAM,MAAA,CAAS,oBACrBA,CAAAA,CAAM,KAAA,CAAM,aAAe,KAAA,CAC3BA,CAAAA,CAAM,MAAM,QAAA,CAAW,MAAA,CACvBA,CAAAA,CAAM,KAAA,CAAM,OAAA,CAAU,MAAA,CACtBA,EAAM,KAAA,CAAM,SAAA,CAAY,YAAA,CAExBA,CAAAA,CAAM,gBAAA,CAAiB,OAAA,CAAS,IAAM,CACpCA,CAAAA,CAAM,KAAA,CAAM,WAAA,CAAc,SAAA,CAC1BA,CAAAA,CAAM,MAAM,SAAA,CAAY,oCAC1B,CAAC,CAAA,CAEDA,CAAAA,CAAM,iBAAiB,MAAA,CAAQ,IAAM,CACnCA,CAAAA,CAAM,KAAA,CAAM,WAAA,CAAc,UAC1BA,CAAAA,CAAM,KAAA,CAAM,SAAA,CAAY,OAC1B,CAAC,CAAA,CAGD,IAAMC,CAAAA,CAAU,QAAA,CAAS,aAAA,CAAc,GAAG,CAAA,CAC1CA,CAAAA,CAAQ,MAAM,KAAA,CAAQ,SAAA,CACtBA,EAAQ,KAAA,CAAM,QAAA,CAAW,OACzBA,CAAAA,CAAQ,KAAA,CAAM,SAAA,CAAY,KAAA,CAC1BA,CAAAA,CAAQ,KAAA,CAAM,aAAe,GAAA,CAC7BA,CAAAA,CAAQ,MAAM,OAAA,CAAU,MAAA,CAExBF,EAAe,WAAA,CAAYC,CAAK,CAAA,CAChCD,CAAAA,CAAe,WAAA,CAAYE,CAAO,EAClClE,CAAAA,CAAQ,WAAA,CAAYgE,CAAc,CAAA,CAGlC,SAASG,GAAkC,CACzC,IAAM/Q,CAAAA,CAAQ6Q,CAAAA,CAAM,KAAA,CAGpB,OAAIJ,GAAY,CAACzQ,CAAAA,CAAM,IAAA,EAAK,CACnB,wBAAA,CAIL0Q,CAAAA,CAAY,GAAK1Q,CAAAA,CAAM,MAAA,CAAS0Q,CAAAA,CAC3B,CAAA,QAAA,EAAWA,CAAS,CAAA,oBAAA,CAAA,CAIzBC,EAAY,CAAA,CAAA,CAAA,EAAY3Q,CAAAA,CAAM,OAAS2Q,CAAAA,CAClC,CAAA,QAAA,EAAWA,CAAS,CAAA,mBAAA,CAAA,CAIzBH,CAAAA,CACKA,CAAAA,CAASxQ,CAAK,CAAA,CAGhB,IACT,CAEA,SAASgR,CAAAA,CAAUpC,CAAAA,CAAuB,CACxCkC,CAAAA,CAAQ,WAAA,CAAclC,EACtBkC,CAAAA,CAAQ,KAAA,CAAM,OAAA,CAAU,OAAA,CACxBD,CAAAA,CAAM,KAAA,CAAM,YAAc,UAC5B,CAEA,SAASI,CAAAA,EAAmB,CAC1BH,EAAQ,KAAA,CAAM,OAAA,CAAU,MAAA,CACxBD,CAAAA,CAAM,KAAA,CAAM,WAAA,CAAc,UAC5B,CAEA,SAASK,CAAAA,EAAqB,CAC5BD,CAAAA,EAAW,CACX,IAAME,CAAAA,CAAmBJ,CAAAA,EAAc,CAEvC,GAAII,CAAAA,GAAqB,IAAA,CAAM,CAK7BH,CAAAA,CAHE,OAAOG,GAAqB,QAAA,CACxBA,CAAAA,CACA,eACgB,CAAA,CACtBN,CAAAA,CAAM,KAAA,EAAM,CACZ,MACF,CAEArB,EAAW,IAAA,CACXhO,CAAAA,CAAM,OAAM,CACZ2N,CAAAA,CAAQ0B,EAAM,KAAK,EACrB,CAGAA,CAAAA,CAAM,gBAAA,CAAiB,SAAA,CAAY9G,GAAM,CACnCA,CAAAA,CAAE,MAAQ,OAAA,GACZA,CAAAA,CAAE,gBAAe,CACjBmH,CAAAA,EAAa,EAEjB,CAAC,CAAA,CAGDL,CAAAA,CAAM,iBAAiB,OAAA,CAASI,CAAU,CAAA,CAG1C,IAAMvB,CAAAA,CAAkBX,EAAAA,GAGlBqC,CAAAA,CAAe,QAAA,CAAS,aAAA,CAAc,QAAQ,CAAA,CACpDA,CAAAA,CAAa,YAAc/B,CAAAA,CAC3B+B,CAAAA,CAAa,KAAO,QAAA,CACpB/C,CAAAA,CAAY+C,EAAc,SAAS,CAAA,CAEnCA,CAAAA,CAAa,gBAAA,CAAiB,OAAA,CAAS,IAAM,CAC3C5B,CAAAA,CAAW,IAAA,CACXhO,EAAM,KAAA,EAAM,CACZ2N,EAAQ,IAAI,EACd,CAAC,CAAA,CAGD,IAAMe,CAAAA,CAAgB,SAAS,aAAA,CAAc,QAAQ,EACrDA,CAAAA,CAAc,WAAA,CAAcd,EAC5Bc,CAAAA,CAAc,IAAA,CAAO,QAAA,CACrB7B,CAAAA,CAAY6B,CAAAA,CAAe,SAAS,EAEpCA,CAAAA,CAAc,gBAAA,CAAiB,OAAA,CAASgB,CAAY,CAAA,CAEpDxB,CAAAA,CAAgB,YAAY0B,CAAY,CAAA,CACxC1B,CAAAA,CAAgB,WAAA,CAAYQ,CAAa,CAAA,CACzCtD,EAAQ,WAAA,CAAY8C,CAAe,EAGnC,SAASD,EAAAA,EAAgB,CACvBjO,CAAAA,CAAM,OAAA,EAAQ,CACdyM,CAAAA,CAAO,MAAA,GACT,CAGA,QAAA,CAAS,IAAA,CAAK,YAAYA,CAAM,CAAA,CAChCzM,EAAM,IAAA,EAAK,CAGX,qBAAA,CAAsB,IAAM,CAC1BqP,CAAAA,CAAM,OAAM,CAERP,CAAAA,EACFO,EAAM,MAAA,GAEV,CAAC,EACH,CAAC,CACH,CC1OO,SAASQ,EAAAA,EAAY,CAC1B,OAAO5E,iBAAAA,CACJyC,CAAAA,EACK,OAAOA,CAAAA,EAAqB,QAAA,CACvBkB,GAASlB,CAAgB,CAAA,CAE3BkB,EAAAA,CAASlB,CAAgB,CAAA,CAElC,EACF,CACF,CCMA,IAAMoC,EAAAA,CAAwBzF,mBAAAA,CAAwC,IAAI,CAAA,CAKnE,SAAS0F,CAAAA,EAA8C,CAC5D,IAAMxF,CAAAA,CAAUC,iBAAWsF,EAAqB,CAAA,CAChD,GAAI,CAACvF,CAAAA,CACH,MAAM,IAAI,KAAA,CAAM,iEAAiE,EAEnF,OAAOA,CACT,CAmBO,SAASyF,CAAAA,CAAM,CACpB,KAAA1Q,CAAAA,CACA,WAAA,CAAAZ,CAAAA,CAAc,KAAA,CACd,YAAA,CAAAuR,CAAAA,CACA,SAAArF,CAAAA,CACA,GAAGrN,CACL,CAAA,CAAmC,CAEjC,IAAM6O,CAAAA,CAAWC,YAAAA,CAAyB,IAAI,CAAA,CAEzCD,CAAAA,CAAS,OAAA,GACZA,EAAS,OAAA,CAAU/E,CAAAA,CAAY,CAC7B,GAAG9J,CAAAA,CACH,YAAa+B,CAAAA,EAAQZ,CAAAA,CACrB,YAAA,CAAAuR,CACF,CAAC,CAAA,CAAA,CAIH,GAAM,CAACpR,CAAAA,CAAOE,CAAQ,CAAA,CAAI+L,cAAAA,CAAqB,IAC7CsB,CAAAA,CAAS,OAAA,CAAS,QAAA,EACpB,CAAA,CAGAG,eAAAA,CAAU,IAAM,CACd,IAAMvM,CAAAA,CAAQoM,CAAAA,CAAS,OAAA,CAClBpM,CAAAA,EAEDV,IAAS,MAAA,GACPA,CAAAA,EAAQ,CAACU,CAAAA,CAAM,MAAA,EAAO,CACxBA,EAAM,IAAA,EAAK,CACF,CAACV,CAAAA,EAAQU,CAAAA,CAAM,QAAO,EAC/BA,CAAAA,CAAM,KAAA,EAAM,EAGlB,CAAA,CAAG,CAACV,CAAI,CAAC,CAAA,CAGTiN,eAAAA,CAAU,IAAM,CACd,IAAMvM,EAAQoM,CAAAA,CAAS,OAAA,CACvB,GAAKpM,CAAAA,CAEL,OAAOA,CAAAA,CAAM,UAAWiG,CAAAA,EAAa,CACnClH,EAASkH,CAAQ,EACnB,CAAC,CACH,CAAA,CAAG,EAAE,CAAA,CAGLsG,eAAAA,CAAU,IAAM,CACdH,CAAAA,CAAS,OAAA,EAAS,SAAA,CAAU,CAC1B,GAAG7O,EACH,YAAA,CAAA0S,CACF,CAAC,EACH,CAAA,CAAG,CAAC1S,EAAQ0S,CAAY,CAAC,EAGzB1D,eAAAA,CAAU,IACD,IAAM,CACXH,CAAAA,CAAS,OAAA,EAAS,OAAA,GACpB,CAAA,CACC,EAAE,CAAA,CAEL,IAAM5N,CAAAA,CAAQkN,aAAAA,CACZ,KAAO,CACL,KAAA,CAAOU,CAAAA,CAAS,OAAA,CAChB,KAAA,CAAAvN,CACF,GACA,CAACA,CAAK,CACR,CAAA,CAEA,OACEoN,eAAC6D,EAAAA,CAAsB,QAAA,CAAtB,CAA+B,KAAA,CAAOtR,CAAAA,CACpC,QAAA,CAAAoM,EACH,CAEJ,CC9GO,SAASsF,EAAAA,CAAa,CAC3B,OAAA,CAAAC,CAAAA,CAAU,MACV,QAAA,CAAAvF,CAAAA,CACA,UAAAwF,CACF,CAAA,CAAoC,CAClC,GAAM,CAAE,KAAA,CAAApQ,CAAM,CAAA,CAAI+P,CAAAA,EAAyB,CACrCM,CAAAA,CAAerQ,CAAAA,CAAM,eAAA,GAErBwD,CAAAA,CAAe+E,CAAAA,EAAwB,CAC3C8H,CAAAA,CAAa,OAAA,CAAQ9H,CAA0B,EACjD,CAAA,CAEA,OAAI4H,GAAWG,oBAAAA,CAAe1F,CAAQ,EAC7B2F,kBAAAA,CAAa3F,CAAAA,CAAmD,CACrE,GAAGyF,CAAAA,CACH,OAAA,CAAS7M,EACT,SAAA,CAAW4M,CAAAA,CACP,CAAA,EAAIxF,CAAAA,CAAS,KAAA,CAAkC,SAAA,EAAa,EAAE,CAAA,CAAA,EAAIwF,CAAS,CAAA,CAAA,CAAG,IAAA,EAAK,CAClFxF,CAAAA,CAAS,MAAkC,SAClD,CAAC,EAIDqB,cAAAA,CAAC,QAAA,CAAA,CACC,KAAMoE,CAAAA,CAAa,IAAA,CACnB,eAAA,CAAeA,CAAAA,CAAa,eAAe,CAAA,CAC3C,gBAAeA,CAAAA,CAAa,eAAe,EAC3C,uBAAA,CAAsB,EAAA,CACtB,QAAS7M,CAAAA,CACT,SAAA,CAAW4M,CAAAA,CAEV,QAAA,CAAAxF,CAAAA,CACH,CAEJ,CCnCO,SAAS4F,CAAAA,CAAY,CAC1B,SAAA,CAAAlP,CAAAA,CACA,SAAAsJ,CACF,CAAA,CAA0C,CACxC,GAAM,CAAE,KAAA,CAAA5K,EAAO,KAAA,CAAAnB,CAAM,CAAA,CAAIkR,CAAAA,EAAyB,CAGlD,GAAI,CAAClR,CAAAA,CAAM,OAAA,CACT,OAAO,IAAA,CAGT,IAAM4R,EAAenP,CAAAA,EAAatB,CAAAA,CAAM,eAAA,EAAgB,CAClD4L,CAAAA,CAAc5L,CAAAA,CAAM,gBAAe,CAEnCoL,CAAAA,CACJa,eAAC,KAAA,CAAA,CACC,sBAAA,CAAsBL,EAAY,sBAAsB,CAAA,CACxD,YAAA,CAAYA,CAAAA,CAAY,YAAY,CAAA,CAEnC,SAAAhB,CAAAA,CACH,CAAA,CAGF,OAAO8F,qBAAAA,CAAatF,CAAAA,CAASqF,CAAY,CAC3C,CClBO,IAAME,CAAAA,CAAeC,gBAAAA,CAC1B,SAAsB,CAAE,QAAA,CAAAhG,CAAAA,CAAU,SAAA,CAAAwF,CAAAA,CAAW,KAAA,CAAAjP,CAAM,EAAG0P,CAAAA,CAA4B,CAChF,GAAM,CAAE,KAAA,CAAA7Q,CAAM,CAAA,CAAI+P,CAAAA,EAAyB,CACrClE,CAAAA,CAAe7L,CAAAA,CAAM,eAAA,GAErBwD,CAAAA,CAAe+E,CAAAA,EAAwC,CAC3DsD,CAAAA,CAAa,OAAA,CAAQtD,CAA0B,EACjD,CAAA,CAEA,OACE0D,cAAAA,CAAC,KAAA,CAAA,CACC,GAAA,CAAM5C,GAAO,CACXwC,CAAAA,CAAa,IAAIxC,CAAE,CAAA,CACf,OAAOwH,CAAAA,EAAiB,UAAA,CAC1BA,CAAAA,CAAaxH,CAAE,CAAA,CACNwH,CAAAA,GACTA,EAAa,OAAA,CAAUxH,CAAAA,EAE3B,CAAA,CACA,uBAAA,CAAsB,EAAA,CACtB,YAAA,CAAYwC,EAAa,YAAY,CAAA,CACrC,OAAA,CAASrI,CAAAA,CACT,SAAA,CAAW4M,CAAAA,CACX,MAAO,CACL,GAAGvE,EAAa,KAAA,CAChB,eAAA,CAAiB,qBACjB,GAAG1K,CACL,CAAA,CAEC,QAAA,CAAAyJ,CAAAA,CACH,CAEJ,CACF,EC1BO,IAAMkG,CAAAA,CAAiBF,gBAAAA,CAC5B,SACE,CAAE,SAAAG,CAAAA,CAAW,QAAA,CAAU,SAAAnG,CAAAA,CAAU,SAAA,CAAAwF,EAAW,KAAA,CAAAjP,CAAM,CAAA,CAClD0P,CAAAA,CACc,CACd,GAAM,CAAE,KAAA,CAAA7Q,CAAM,CAAA,CAAI+P,CAAAA,EAAyB,CACrCjE,CAAAA,CAAiB9L,EAAM,iBAAA,EAAkB,CAEzCwD,CAAAA,CAAe+E,CAAAA,EAAwC,CAC3DuD,CAAAA,CAAe,QAAQvD,CAA0B,EACnD,EAGMyI,CAAAA,CAAaD,CAAAA,GAAa,MAAQ,YAAA,CAAe,QAAA,CACjDE,CAAAA,CAAaF,CAAAA,GAAa,KAAA,CAAQ,MAAA,CAAS,OAEjD,OACE9E,cAAAA,CAAC,OACC,GAAA,CAAM5C,CAAAA,EAAO,CACXyC,CAAAA,CAAe,GAAA,CAAIzC,CAAE,CAAA,CACjB,OAAOwH,CAAAA,EAAiB,WAC1BA,CAAAA,CAAaxH,CAAE,EACNwH,CAAAA,GACTA,CAAAA,CAAa,QAAUxH,CAAAA,EAE3B,CAAA,CACA,yBAAA,CAAwB,EAAA,CACxB,YAAA,CAAYyC,CAAAA,CAAe,YAAY,CAAA,CACvC,OAAA,CAAStI,CAAAA,CACT,SAAA,CAAW4M,CAAAA,CACX,KAAA,CAAO,CACL,GAAGtE,CAAAA,CAAe,KAAA,CAClB,UAAA,CAAAkF,CAAAA,CACA,UAAA,CAAAC,EACA,GAAG9P,CACL,EAEC,QAAA,CAAAyJ,CAAAA,CACH,CAEJ,CACF,ECvDA,IAAMsG,EAAAA,CAAsC,CAC1C,EAAA,CAAI,QACJ,EAAA,CAAI,OAAA,CACJ,EAAA,CAAI,OAAA,CACJ,EAAA,CAAI,OAAA,CACJ,KAAM,MACR,CAAA,CAuBaC,EAAeP,gBAAAA,CAC1B,SACE,CAAE,IAAA,CAAAtF,CAAAA,CAAO,IAAA,CAAM,IAAA,CAAA8F,CAAAA,CAAM,YAAA,CAAcC,EAAW,QAAA,CAAAzG,CAAAA,CAAU,SAAA,CAAAwF,CAAAA,CAAW,KAAA,CAAAjP,CAAM,EACzE0P,CAAAA,CACc,CACd,GAAM,CAAE,KAAA,CAAA7Q,CAAM,EAAI+P,CAAAA,EAAyB,CACrChE,EAAe/L,CAAAA,CAAM,eAAA,GAErBmD,CAAAA,CAAiBoF,CAAAA,EAA2C,CAChEwD,CAAAA,CAAa,SAAA,CAAUxD,CAA6B,EACtD,CAAA,CAEA,OACE0D,eAAC,KAAA,CAAA,CACC,GAAA,CAAM5C,GAAO,CACX0C,CAAAA,CAAa,GAAA,CAAI1C,CAAE,CAAA,CACf,OAAOwH,GAAiB,UAAA,CAC1BA,CAAAA,CAAaxH,CAAE,CAAA,CACNwH,CAAAA,GACTA,EAAa,OAAA,CAAUxH,CAAAA,EAE3B,CAAA,CACA,IAAA,CAAM+H,CAAAA,EAAQrF,CAAAA,CAAa,KAC3B,YAAA,CAAYA,CAAAA,CAAa,YAAY,CAAA,CACrC,YAAA,CAAYsF,CAAAA,EAAatF,EAAa,YAAY,CAAA,CAClD,iBAAA,CAAiBsF,CAAAA,CAAY,MAAA,CAAYtF,CAAAA,CAAa,iBAAiB,CAAA,CACvE,kBAAA,CAAkBA,EAAa,kBAAkB,CAAA,CACjD,wBAAsB,EAAA,CACtB,YAAA,CAAYA,CAAAA,CAAa,YAAY,CAAA,CACrC,QAAA,CAAUA,EAAa,QAAA,CACvB,SAAA,CAAW5I,CAAAA,CACX,SAAA,CAAWiN,CAAAA,CACX,KAAA,CAAO,CACL,eAAA,CAAiB,OAAA,CACjB,YAAA,CAAc,KAAA,CACd,QAAA,CAAUc,EAAAA,CAAS5F,CAAI,CAAA,CACvB,KAAA,CAAOA,IAAS,MAAA,CAAS,OAAA,CAAU,OACnC,MAAA,CAAQA,CAAAA,GAAS,MAAA,CAAS,OAAA,CAAU,MAAA,CACpC,SAAA,CAAWA,IAAS,MAAA,CAAS,OAAA,CAAU,MAAA,CACvC,QAAA,CAAU,MAAA,CACV,SAAA,CAAW,wCACX,GAAGnK,CACL,CAAA,CACA,OAAA,CAAUoH,CAAAA,EAAMA,CAAAA,CAAE,iBAAgB,CAEjC,QAAA,CAAAqC,EACH,CAEJ,CACF,EC7EO,SAAS0G,CAAAA,CAAY,CAC1B,SAAA1G,CAAAA,CACA,SAAA,CAAAwF,EACA,KAAA,CAAAjP,CACF,EAAmC,CACjC,OACE8K,cAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAWmE,CAAAA,CACX,MAAO,CACL,OAAA,CAAS,OACT,UAAA,CAAY,QAAA,CACZ,eAAgB,eAAA,CAChB,OAAA,CAAS,WAAA,CACT,YAAA,CAAc,mBAAA,CACd,GAAGjP,CACL,CAAA,CAEC,QAAA,CAAAyJ,CAAAA,CACH,CAEJ,CCjBO,SAAS2G,CAAAA,CAAW,CACzB,EAAA,CAAAjN,CAAAA,CACA,SAAAsG,CAAAA,CACA,SAAA,CAAAwF,EACA,KAAA,CAAAjP,CACF,EAAkC,CAChC,GAAM,CAAE,KAAA,CAAAnB,CAAM,CAAA,CAAI+P,GAAyB,CACrC9C,CAAAA,CAAajN,EAAM,aAAA,CAAcsE,CAAE,EAEzC,OACE2H,cAAAA,CAAC,IAAA,CAAA,CACC,EAAA,CAAIgB,CAAAA,CAAW,EAAA,CACf,sBAAoB,EAAA,CACpB,SAAA,CAAWmD,EACX,KAAA,CAAO,CACL,OAAQ,CAAA,CACR,QAAA,CAAU,MAAA,CACV,UAAA,CAAY,GAAA,CACZ,KAAA,CAAO,UACP,GAAGjP,CACL,CAAA,CAEC,QAAA,CAAAyJ,CAAAA,CACH,CAEJ,CCzBO,SAAS4G,CAAAA,CAAiB,CAC/B,GAAAlN,CAAAA,CACA,QAAA,CAAAsG,EACA,SAAA,CAAAwF,CAAAA,CACA,MAAAjP,CACF,CAAA,CAAwC,CACtC,GAAM,CAAE,KAAA,CAAAnB,CAAM,CAAA,CAAI+P,CAAAA,GACZ1C,CAAAA,CAAYrN,CAAAA,CAAM,oBAAoBsE,CAAE,CAAA,CAE9C,OACE2H,cAAAA,CAAC,GAAA,CAAA,CACC,EAAA,CAAIoB,EAAU,EAAA,CACd,2BAAA,CAA0B,GAC1B,SAAA,CAAW+C,CAAAA,CACX,MAAO,CACL,MAAA,CAAQ,CAAA,CACR,QAAA,CAAU,MAAA,CACV,KAAA,CAAO,UACP,UAAA,CAAY,GAAA,CACZ,GAAGjP,CACL,CAAA,CAEC,QAAA,CAAAyJ,EACH,CAEJ,CC5BO,SAAS6G,EAAU,CACxB,QAAA,CAAA7G,EACA,SAAA,CAAAwF,CAAAA,CACA,MAAAjP,CACF,CAAA,CAAiC,CAC/B,OACE8K,cAAAA,CAAC,KAAA,CAAA,CACC,UAAWmE,CAAAA,CACX,KAAA,CAAO,CACL,OAAA,CAAS,MAAA,CACT,GAAGjP,CACL,CAAA,CAEC,QAAA,CAAAyJ,CAAAA,CACH,CAEJ,CChBO,SAAS8G,EAAY,CAC1B,QAAA,CAAA9G,EACA,SAAA,CAAAwF,CAAAA,CACA,KAAA,CAAAjP,CACF,CAAA,CAAmC,CACjC,OACE8K,cAAAA,CAAC,KAAA,CAAA,CACC,SAAA,CAAWmE,CAAAA,CACX,KAAA,CAAO,CACL,QAAS,MAAA,CACT,UAAA,CAAY,QAAA,CACZ,cAAA,CAAgB,UAAA,CAChB,GAAA,CAAK,MACL,OAAA,CAAS,WAAA,CACT,UAAW,mBAAA,CACX,GAAGjP,CACL,CAAA,CAEC,QAAA,CAAAyJ,CAAAA,CACH,CAEJ,CCXO,SAAS+G,EAAAA,CAAW,CACzB,OAAA,CAAAxB,CAAAA,CAAU,MACV,YAAA,CAAckB,CAAAA,CACd,SAAAzG,CAAAA,CACA,SAAA,CAAAwF,EACA,KAAA,CAAAjP,CACF,CAAA,CAAkC,CAChC,GAAM,CAAE,MAAAnB,CAAM,CAAA,CAAI+P,CAAAA,EAAyB,CACrC6B,CAAAA,CAAa5R,CAAAA,CAAM,qBAAoB,CAEvCwD,CAAAA,CAAe+E,CAAAA,EAAwB,CAC3CqJ,CAAAA,CAAW,OAAA,CAAQrJ,CAA0B,EAC/C,CAAA,CAEA,OAAI4H,CAAAA,EAAWG,oBAAAA,CAAe1F,CAAQ,CAAA,CAC7B2F,kBAAAA,CAAa3F,CAAAA,CAAmD,CACrE,GAAGgH,CAAAA,CACH,aAAcP,CAAAA,EAAaO,CAAAA,CAAW,YAAY,CAAA,CAClD,OAAA,CAASpO,CAAAA,CACT,UAAW4M,CAAAA,CACP,CAAA,EAAIxF,CAAAA,CAAS,KAAA,CAAkC,SAAA,EAAa,EAAE,IAAIwF,CAAS,CAAA,CAAA,CAAG,MAAK,CAClFxF,CAAAA,CAAS,MAAkC,SAClD,CAAC,CAAA,CAIDqB,cAAAA,CAAC,QAAA,CAAA,CACC,IAAA,CAAM2F,EAAW,IAAA,CACjB,YAAA,CAAYP,CAAAA,EAAaO,CAAAA,CAAW,YAAY,CAAA,CAChD,sBAAoB,EAAA,CACpB,OAAA,CAASpO,CAAAA,CACT,SAAA,CAAW4M,CAAAA,CACX,KAAA,CAAO,CACL,UAAA,CAAY,MAAA,CACZ,OAAQ,MAAA,CACR,OAAA,CAAS,MACT,MAAA,CAAQ,SAAA,CACR,OAAA,CAAS,MAAA,CACT,UAAA,CAAY,QAAA,CACZ,eAAgB,QAAA,CAChB,KAAA,CAAO,UACP,YAAA,CAAc,KAAA,CACd,GAAGjP,CACL,CAAA,CAEC,QAAA,CAAAyJ,CAAAA,EACCqB,cAAAA,CAAC,KAAA,CAAA,CACC,MAAM,IAAA,CACN,MAAA,CAAO,KACP,OAAA,CAAQ,WAAA,CACR,KAAK,MAAA,CACL,KAAA,CAAM,4BAAA,CAEN,QAAA,CAAAA,cAAAA,CAAC,MAAA,CAAA,CACC,EAAE,sBAAA,CACF,MAAA,CAAO,cAAA,CACP,WAAA,CAAY,GAAA,CACZ,aAAA,CAAc,QACd,cAAA,CAAe,OAAA,CACjB,CAAA,CACF,CAAA,CAEJ,CAEJ,CC3CA,IAAM4F,GAA8D,CAClE,OAAA,CAAS,CACP,eAAA,CAAiB,SAAA,CACjB,KAAA,CAAO,OACT,CAAA,CACA,MAAA,CAAQ,CACN,eAAA,CAAiB,SAAA,CACjB,KAAA,CAAO,OACT,CAAA,CACA,OAAA,CAAS,CACP,eAAA,CAAiB,SAAA,CACjB,KAAA,CAAO,OACT,CACF,CAAA,CAKO,SAASC,EAAAA,CAAc,CAC5B,KAAAxS,CAAAA,CACA,YAAA,CAAA2Q,CAAAA,CACA,KAAA,CAAA5E,CAAAA,CACA,WAAA,CAAA0G,EACA,WAAA,CAAAnE,CAAAA,CAAc,SAAA,CACd,UAAA,CAAAC,CAAAA,CAAa,QAAA,CACb,QAAAd,CAAAA,CAAU,SAAA,CACV,SAAA,CAAAiF,CAAAA,CACA,QAAA,CAAAC,CAAAA,CACA,UAAA7B,CAAAA,CACA,KAAA,CAAAjP,CACF,CAAA,CAAqC,CAWnC,OACE8K,cAAAA,CAAC+D,CAAAA,CAAA,CACC,IAAA,CAAM1Q,CAAAA,CACN,YAAA,CAAc2Q,EACd,mBAAA,CAAqB,KAAA,CACrB,cAAe,IAAA,CACf,IAAA,CAAK,cAEL,QAAA,CAAAhE,cAAAA,CAACuE,CAAAA,CAAA,CACC,QAAA,CAAAvE,cAAAA,CAAC0E,EAAA,CACC,QAAA,CAAA1E,eAAC6E,CAAAA,CAAA,CACC,SAAA5E,eAAAA,CAACiF,CAAAA,CAAA,CAAa,IAAA,CAAK,IAAA,CAAK,SAAA,CAAWf,EAAW,KAAA,CAAOjP,CAAAA,CAClD,QAAA,CAAA,CAAAkK,CAAAA,EACCY,cAAAA,CAACqF,CAAAA,CAAA,CAAY,KAAA,CAAO,CAAE,YAAA,CAAc,MAAA,CAAQ,aAAA,CAAe,CAAE,EAC3D,QAAA,CAAArF,cAAAA,CAACsF,EAAA,CAAY,QAAA,CAAAlG,EAAM,CAAA,CACrB,CAAA,CAEFY,cAAAA,CAACwF,CAAAA,CAAA,CAAU,KAAA,CAAO,CAAE,UAAA,CAAYpG,CAAAA,CAAQ,MAAQ,MAAU,CAAA,CACxD,SAAAY,cAAAA,CAACuF,CAAAA,CAAA,CAAkB,QAAA,CAAAO,CAAAA,CAAY,CAAA,CACjC,EACA7F,eAAAA,CAACwF,CAAAA,CAAA,CAAY,KAAA,CAAO,CAAE,UAAW,MAAO,CAAA,CACtC,QAAA,CAAA,CAAAzF,cAAAA,CAAC,QAAA,CAAA,CACC,IAAA,CAAK,SACL,OAAA,CA5BK,IAAM,CACzBgG,CAAAA,IAAW,CACXhC,CAAAA,CAAa,KAAK,EACpB,CAAA,CA0BgB,KAAA,CAAO,CACL,OAAA,CAAS,UAAA,CACT,aAAc,KAAA,CACd,MAAA,CAAQ,OACR,MAAA,CAAQ,SAAA,CACR,WAAY,GAAA,CACZ,QAAA,CAAU,MAAA,CACV,eAAA,CAAiB,SAAA,CACjB,KAAA,CAAO,SACT,CAAA,CAEC,QAAA,CAAApC,EACH,CAAA,CACA5B,cAAAA,CAAC,UACC,IAAA,CAAK,QAAA,CACL,OAAA,CAjDM,IAAM,CAC1B+F,CAAAA,GACA/B,CAAAA,CAAa,KAAK,EACpB,CAAA,CA+CgB,KAAA,CAAO,CACL,OAAA,CAAS,UAAA,CACT,YAAA,CAAc,KAAA,CACd,MAAA,CAAQ,MAAA,CACR,OAAQ,SAAA,CACR,UAAA,CAAY,GAAA,CACZ,QAAA,CAAU,MAAA,CACV,GAAG4B,GAAe9E,CAAO,CAC3B,CAAA,CAEC,QAAA,CAAAa,CAAAA,CACH,CAAA,CAAA,CACF,GACF,CAAA,CACF,CAAA,CACF,EACF,CAAA,CACF,CAEJ,CCxGA,IAAMiE,EAAAA,CAA4D,CAChE,OAAA,CAAS,CACP,eAAA,CAAiB,SAAA,CACjB,MAAO,OACT,CAAA,CACA,OAAA,CAAS,CACP,eAAA,CAAiB,SAAA,CACjB,MAAO,OACT,CAAA,CACA,QAAS,CACP,eAAA,CAAiB,UACjB,KAAA,CAAO,OACT,CAAA,CACA,KAAA,CAAO,CACL,eAAA,CAAiB,UACjB,KAAA,CAAO,OACT,CAAA,CACA,IAAA,CAAM,CACJ,eAAA,CAAiB,UACjB,KAAA,CAAO,OACT,CACF,CAAA,CAKO,SAASK,EAAAA,CAAY,CAC1B,IAAA,CAAA5S,CAAAA,CACA,aAAA2Q,CAAAA,CACA,KAAA,CAAA5E,EACA,WAAA,CAAA0G,CAAAA,CACA,WAAA,CAAAnE,CAAAA,CAAc,IAAA,CACd,OAAA,CAAAb,EAAU,SAAA,CACV,SAAA,CAAAiF,EACA,SAAA,CAAA5B,CAAAA,CACA,MAAAjP,CACF,CAAA,CAAmC,CAMjC,OACE8K,cAAAA,CAAC+D,CAAAA,CAAA,CACC,IAAA,CAAM1Q,CAAAA,CACN,aAAc2Q,CAAAA,CACd,mBAAA,CAAqB,MACrB,aAAA,CAAe,IAAA,CACf,IAAA,CAAK,aAAA,CAEL,QAAA,CAAAhE,cAAAA,CAACuE,EAAA,CACC,QAAA,CAAAvE,cAAAA,CAAC0E,CAAAA,CAAA,CACC,QAAA,CAAA1E,eAAC6E,CAAAA,CAAA,CACC,QAAA,CAAA5E,eAAAA,CAACiF,CAAAA,CAAA,CAAa,KAAK,IAAA,CAAK,SAAA,CAAWf,EAAW,KAAA,CAAOjP,CAAAA,CAClD,UAAAkK,CAAAA,EACCY,cAAAA,CAACqF,CAAAA,CAAA,CAAY,KAAA,CAAO,CAAE,aAAc,MAAA,CAAQ,aAAA,CAAe,CAAE,CAAA,CAC3D,QAAA,CAAArF,cAAAA,CAACsF,EAAA,CAAY,QAAA,CAAAlG,CAAAA,CAAM,CAAA,CACrB,CAAA,CAEFY,cAAAA,CAACwF,EAAA,CAAU,KAAA,CAAO,CAAE,UAAA,CAAYpG,CAAAA,CAAQ,MAAQ,MAAU,CAAA,CACxD,QAAA,CAAAY,cAAAA,CAACuF,CAAAA,CAAA,CAAkB,SAAAO,CAAAA,CAAY,CAAA,CACjC,CAAA,CACA9F,cAAAA,CAACyF,CAAAA,CAAA,CAAY,MAAO,CAAE,SAAA,CAAW,MAAO,CAAA,CACtC,QAAA,CAAAzF,cAAAA,CAAC,UACC,IAAA,CAAK,QAAA,CACL,QA5BM,IAAM,CAC1B+F,GAAU,CACV/B,CAAAA,CAAa,KAAK,EACpB,CAAA,CA0BgB,KAAA,CAAO,CACL,OAAA,CAAS,UAAA,CACT,aAAc,KAAA,CACd,MAAA,CAAQ,OACR,MAAA,CAAQ,SAAA,CACR,UAAA,CAAY,GAAA,CACZ,QAAA,CAAU,MAAA,CACV,GAAG4B,EAAAA,CAAe9E,CAAO,CAC3B,CAAA,CAEC,QAAA,CAAAa,EACH,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CACF,CAAA,CACF,CAAA,CACF,CAEJ,CCpEO,SAASuE,EAAAA,CAAa,CAC3B,IAAA,CAAA7S,CAAAA,CACA,aAAA2Q,CAAAA,CACA,KAAA,CAAA5E,CAAAA,CACA,WAAA,CAAA0G,CAAAA,CACA,WAAA,CAAAlD,EACA,YAAA,CAAAC,CAAAA,CAAe,EAAA,CACf,WAAA,CAAAlB,CAAAA,CAAc,IAAA,CACd,WAAAC,CAAAA,CAAa,QAAA,CACb,IAAA,CAAAkB,CAAAA,CAAO,MAAA,CACP,QAAA,CAAAC,EACA,QAAA,CAAAC,CAAAA,CAAW,MACX,SAAA,CAAAC,CAAAA,CAAY,EACZ,SAAA,CAAAC,CAAAA,CACA,SAAA,CAAA6C,CAAAA,CACA,QAAA,CAAAC,CAAAA,CACA,UAAA7B,CAAAA,CACA,KAAA,CAAAjP,CACF,CAAA,CAAoC,CAClC,GAAM,CAAC3C,CAAAA,CAAO4T,CAAQ,CAAA,CAAItH,cAAAA,CAASgE,CAAY,CAAA,CACzC,CAAC7Q,CAAAA,CAAOoU,CAAQ,EAAIvH,cAAAA,CAAwB,IAAI,EAChDwH,CAAAA,CAAWjG,YAAAA,CAAyB,IAAI,CAAA,CAG9CE,eAAAA,CAAU,IAAM,CACVjN,CAAAA,GACF8S,CAAAA,CAAStD,CAAY,CAAA,CACrBuD,CAAAA,CAAS,IAAI,CAAA,EAEjB,CAAA,CAAG,CAAC/S,CAAAA,CAAMwP,CAAY,CAAC,EAGvBvC,eAAAA,CAAU,IAAM,CACVjN,CAAAA,EAAQgT,CAAAA,CAAS,UACnBA,CAAAA,CAAS,OAAA,CAAQ,KAAA,EAAM,CACnBxD,CAAAA,EACFwD,CAAAA,CAAS,QAAQ,MAAA,EAAO,EAG9B,CAAA,CAAG,CAAChT,CAAAA,CAAMwP,CAAY,CAAC,CAAA,CAEvB,IAAMS,CAAAA,CAAgB,IAAe,CAEnC,GAAIN,GAAY,CAACzQ,CAAAA,CAAM,MAAK,CAC1B,OAAA6T,EAAS,wBAAwB,CAAA,CAC1B,KAAA,CAIT,GAAInD,CAAAA,CAAY,CAAA,EAAK1Q,EAAM,MAAA,CAAS0Q,CAAAA,CAClC,OAAAmD,CAAAA,CAAS,CAAA,QAAA,EAAWnD,CAAS,sBAAsB,CAAA,CAC5C,KAAA,CAIT,GAAIC,CAAAA,EAAa3Q,CAAAA,CAAM,MAAA,CAAS2Q,EAC9B,OAAAkD,CAAAA,CAAS,WAAWlD,CAAS,CAAA,mBAAA,CAAqB,EAC3C,KAAA,CAIT,GAAIH,CAAAA,CAAU,CACZ,IAAMuD,CAAAA,CAASvD,EAASxQ,CAAK,CAAA,CAC7B,GAAI+T,CAAAA,GAAW,IAAA,CACb,OAAAF,EAAS,OAAOE,CAAAA,EAAW,QAAA,CAAWA,CAAAA,CAAS,eAAe,CAAA,CACvD,KAEX,CAEA,OAAO,KACT,CAAA,CAEMC,CAAAA,CAAgB,IAAM,CACtBjD,CAAAA,EAAc,GAChByC,CAAAA,CAAUxT,CAAK,CAAA,CACfyR,EAAa,KAAK,CAAA,EAEtB,EAcA,OACEhE,cAAAA,CAAC+D,EAAA,CACC,IAAA,CAAM1Q,CAAAA,CACN,YAAA,CAAc2Q,CAAAA,CACd,mBAAA,CAAqB,MACrB,aAAA,CAAe,IAAA,CACf,KAAK,aAAA,CAEL,QAAA,CAAAhE,eAACuE,CAAAA,CAAA,CACC,QAAA,CAAAvE,cAAAA,CAAC0E,CAAAA,CAAA,CACC,SAAA1E,cAAAA,CAAC6E,CAAAA,CAAA,CACC,QAAA,CAAA5E,eAAAA,CAACiF,CAAAA,CAAA,CAAa,IAAA,CAAK,IAAA,CAAK,SAAA,CAAWf,CAAAA,CAAW,KAAA,CAAOjP,CAAAA,CAClD,UAAAkK,CAAAA,EACCY,cAAAA,CAACqF,EAAA,CAAY,KAAA,CAAO,CAAE,YAAA,CAAc,MAAA,CAAQ,aAAA,CAAe,CAAE,CAAA,CAC3D,QAAA,CAAArF,eAACsF,CAAAA,CAAA,CAAY,QAAA,CAAAlG,CAAAA,CAAM,CAAA,CACrB,CAAA,CAEFa,gBAACuF,CAAAA,CAAA,CAAU,KAAA,CAAO,CAAE,UAAA,CAAYpG,CAAAA,CAAQ,MAAQ,MAAU,CAAA,CACvD,UAAA0G,CAAAA,EACC9F,cAAAA,CAACuF,EAAA,CAAiB,KAAA,CAAO,CAAE,YAAA,CAAc,MAAO,CAAA,CAC7C,SAAAO,CAAAA,CACH,CAAA,CAEF7F,eAAAA,CAAC,KAAA,CAAA,CACC,QAAA,CAAA,CAAAD,cAAAA,CAAC,SACC,GAAA,CAAKqG,CAAAA,CACL,IAAA,CAAMvD,CAAAA,CACN,KAAA,CAAOvQ,CAAAA,CACP,SAAW+J,CAAAA,EAAM,CACf6J,EAAS7J,CAAAA,CAAE,MAAA,CAAO,KAAK,CAAA,CACvB8J,CAAAA,CAAS,IAAI,EACf,CAAA,CACA,SAAA,CAvCK9J,GAA2B,CAC5CA,CAAAA,CAAE,MAAQ,OAAA,GACZA,CAAAA,CAAE,gBAAe,CACjBiK,CAAAA,EAAc,EAElB,CAAA,CAmCkB,WAAA,CAAa3D,CAAAA,CACb,SAAUI,CAAAA,CACV,SAAA,CAAWC,EACX,SAAA,CAAWC,CAAAA,CACX,MAAO,CACL,KAAA,CAAO,MAAA,CACP,OAAA,CAAS,UAAA,CACT,MAAA,CAAQ,aAAalR,CAAAA,CAAQ,SAAA,CAAY,SAAS,CAAA,CAAA,CAClD,YAAA,CAAc,KAAA,CACd,SAAU,MAAA,CACV,OAAA,CAAS,MAAA,CACT,SAAA,CAAW,YACb,CAAA,CACF,EACCA,CAAAA,EACCgO,cAAAA,CAAC,KACC,KAAA,CAAO,CACL,MAAO,SAAA,CACP,QAAA,CAAU,MAAA,CACV,SAAA,CAAW,KAAA,CACX,YAAA,CAAc,CAChB,CAAA,CAEC,QAAA,CAAAhO,CAAAA,CACH,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CACAiO,gBAACwF,CAAAA,CAAA,CAAY,KAAA,CAAO,CAAE,SAAA,CAAW,MAAO,EACtC,QAAA,CAAA,CAAAzF,cAAAA,CAAC,UACC,IAAA,CAAK,QAAA,CACL,QA5EK,IAAM,CACzBgG,CAAAA,IAAW,CACXhC,CAAAA,CAAa,KAAK,EACpB,CAAA,CA0EgB,KAAA,CAAO,CACL,OAAA,CAAS,UAAA,CACT,YAAA,CAAc,MACd,MAAA,CAAQ,MAAA,CACR,MAAA,CAAQ,SAAA,CACR,UAAA,CAAY,GAAA,CACZ,SAAU,MAAA,CACV,eAAA,CAAiB,UACjB,KAAA,CAAO,SACT,EAEC,QAAA,CAAApC,CAAAA,CACH,CAAA,CACA5B,cAAAA,CAAC,QAAA,CAAA,CACC,IAAA,CAAK,SACL,OAAA,CAASuG,CAAAA,CACT,MAAO,CACL,OAAA,CAAS,WACT,YAAA,CAAc,KAAA,CACd,MAAA,CAAQ,MAAA,CACR,MAAA,CAAQ,SAAA,CACR,WAAY,GAAA,CACZ,QAAA,CAAU,OACV,eAAA,CAAiB,SAAA,CACjB,MAAO,OACT,CAAA,CAEC,QAAA,CAAA5E,CAAAA,CACH,CAAA,CAAA,CACF,CAAA,CAAA,CACF,EACF,CAAA,CACF,CAAA,CACF,CAAA,CACF,CAEJ,CCzOA,SAASH,GACPC,CAAAA,CAC2B,CAC3B,OAAI,OAAOA,CAAAA,EAAqB,QAAA,CACvBD,EAAYC,CAAgB,CAAA,CAEjC,YAAaA,CAAAA,EAAoBA,CAAAA,CAAiB,QAC7CD,CAAAA,CAAYC,CAA0C,CAAA,CAExDD,CAAAA,CAAYC,CAAkC,CACvD,CAOA,SAASe,EAAAA,CAAMf,CAAAA,CAAwD,CACrE,OAAI,OAAOA,GAAqB,QAAA,CACvBe,EAAAA,CAAUf,CAAgB,CAAA,CAE5Be,EAAAA,CAAUf,CAAgB,CACnC,CAOA,SAASkB,GAAOlB,CAAAA,CAAkE,CAChF,OAAI,OAAOA,CAAAA,EAAqB,QAAA,CACvBkB,EAAAA,CAAWlB,CAAgB,CAAA,CAE7BkB,GAAWlB,CAAgB,CACpC,CAQO,IAAM7C,EAAAA,CAAS,CACpB,QAAA4C,EAAAA,CACA,KAAA,CAAAgB,EAAAA,CACA,MAAA,CAAAG,EACF","file":"index.cjs","sourcesContent":["/**\n * Default configuration and config utilities for ModalKit\n */\n\nimport type { ModalConfig } from '../types'\n\n/**\n * Default modal configuration\n */\nexport const DEFAULT_CONFIG: Required<\n  Omit<\n    ModalConfig,\n    | 'open'\n    | 'initialFocusRef'\n    | 'finalFocusRef'\n    | 'portalTarget'\n    | 'id'\n    | 'ariaLabel'\n    | 'ariaLabelledBy'\n    | 'ariaDescribedBy'\n    | 'onOpen'\n    | 'onClose'\n    | 'onOpenChange'\n    | 'onAnimationStart'\n    | 'onAnimationEnd'\n    | 'onEscapeKeyDown'\n    | 'onOverlayClick'\n  >\n> = {\n  defaultOpen: false,\n  closeOnOverlayClick: true,\n  closeOnEscape: true,\n  preventScroll: true,\n  scrollBehavior: 'inside',\n  trapFocus: true,\n  autoFocus: true,\n  restoreFocus: true,\n  stackable: true,\n  closeOnStackedOpen: false,\n  animated: false,\n  animationDuration: 200,\n  disablePortal: false,\n  role: 'dialog',\n}\n\n/**\n * Merge user config with defaults\n */\nexport function mergeConfig(config?: ModalConfig): ModalConfig {\n  if (!config) return { ...DEFAULT_CONFIG }\n\n  return {\n    ...DEFAULT_CONFIG,\n    ...config,\n  }\n}\n\n/**\n * Get a resolved config value\n */\nexport function getConfigValue<K extends keyof ModalConfig>(\n  config: ModalConfig,\n  key: K,\n  defaultValue: NonNullable<ModalConfig[K]>\n): NonNullable<ModalConfig[K]> {\n  const value = config[key]\n  return value !== undefined ? (value as NonNullable<ModalConfig[K]>) : defaultValue\n}\n","/**\n * Event emitter utilities for ModalKit\n */\n\nimport type { EventEmitter } from '../types'\n\n/**\n * Create a typed event emitter\n */\nexport function createEventEmitter<\n  T extends Record<string, unknown[]>\n>(): EventEmitter<T> {\n  const listeners = new Map<keyof T, Set<Function>>()\n\n  function on<K extends keyof T>(\n    event: K,\n    handler: (...args: T[K]) => void\n  ): () => void {\n    if (!listeners.has(event)) {\n      listeners.set(event, new Set())\n    }\n    listeners.get(event)!.add(handler)\n\n    // Return unsubscribe function\n    return () => off(event, handler)\n  }\n\n  function off<K extends keyof T>(\n    event: K,\n    handler: (...args: T[K]) => void\n  ): void {\n    const handlers = listeners.get(event)\n    if (handlers) {\n      handlers.delete(handler)\n      if (handlers.size === 0) {\n        listeners.delete(event)\n      }\n    }\n  }\n\n  function emit<K extends keyof T>(event: K, ...args: T[K]): void {\n    const handlers = listeners.get(event)\n    if (handlers) {\n      handlers.forEach((handler) => {\n        try {\n          handler(...args)\n        } catch (error) {\n          console.error(`Error in event handler for \"${String(event)}\":`, error)\n        }\n      })\n    }\n  }\n\n  function clear(): void {\n    listeners.clear()\n  }\n\n  return { on, off, emit, clear }\n}\n\n/**\n * Create a simple subscription manager for state changes\n */\nexport function createSubscriptionManager<T>(): {\n  subscribe: (callback: (value: T) => void) => () => void\n  notify: (value: T) => void\n  clear: () => void\n} {\n  const subscribers = new Set<(value: T) => void>()\n\n  function subscribe(callback: (value: T) => void): () => void {\n    subscribers.add(callback)\n    return () => {\n      subscribers.delete(callback)\n    }\n  }\n\n  function notify(value: T): void {\n    subscribers.forEach((callback) => {\n      try {\n        callback(value)\n      } catch (error) {\n        console.error('Error in subscriber:', error)\n      }\n    })\n  }\n\n  function clear(): void {\n    subscribers.clear()\n  }\n\n  return { subscribe, notify, clear }\n}\n","/**\n * State management for ModalKit\n */\n\nimport type { ModalState, AnimationState, StateManager } from '../types'\nimport { createSubscriptionManager } from '../utils/events'\n\n/**\n * Create initial modal state\n */\nexport function createInitialState(defaultOpen: boolean = false): ModalState {\n  return {\n    open: defaultOpen,\n    animationState: defaultOpen ? 'entered' : 'idle',\n    stackOrder: 0,\n    isTopMost: false,\n    mounted: defaultOpen,\n  }\n}\n\n/**\n * Create a state manager\n */\nexport function createStateManager(\n  initialState: ModalState\n): StateManager<ModalState> {\n  let state = { ...initialState }\n  const { subscribe, notify } = createSubscriptionManager<ModalState>()\n\n  function getState(): ModalState {\n    return { ...state }\n  }\n\n  function setState(partial: Partial<ModalState>): void {\n    const prevState = state\n    state = { ...state, ...partial }\n\n    // Only notify if state actually changed\n    if (hasStateChanged(prevState, state)) {\n      notify(state)\n    }\n  }\n\n  return {\n    getState,\n    setState,\n    subscribe,\n  }\n}\n\n/**\n * Check if state has changed\n */\nfunction hasStateChanged(prev: ModalState, next: ModalState): boolean {\n  return (\n    prev.open !== next.open ||\n    prev.animationState !== next.animationState ||\n    prev.stackOrder !== next.stackOrder ||\n    prev.isTopMost !== next.isTopMost ||\n    prev.mounted !== next.mounted\n  )\n}\n\n/**\n * Derive mounted state from open and animation state\n */\nexport function shouldBeMounted(\n  open: boolean,\n  animationState: AnimationState\n): boolean {\n  // Mounted when open or during exit animation\n  return open || animationState === 'exiting' || animationState === 'exited'\n}\n\n/**\n * Get the next animation state based on current state and action\n */\nexport function getNextAnimationState(\n  currentState: AnimationState,\n  action: 'open' | 'close',\n  animated: boolean\n): AnimationState {\n  if (!animated) {\n    return action === 'open' ? 'entered' : 'idle'\n  }\n\n  if (action === 'open') {\n    return 'entering'\n  }\n\n  // Close action\n  if (currentState === 'entered' || currentState === 'entering') {\n    return 'exiting'\n  }\n\n  return 'idle'\n}\n","/**\n * Modal stack management for ModalKit\n */\n\nimport type { Modal, ModalStack, ModalInternal, StackEvent } from '../types'\nimport { createEventEmitter } from '../utils/events'\n\n/**\n * Stack event types\n */\ninterface StackEvents extends Record<string, unknown[]> {\n  push: [Modal]\n  pop: [Modal]\n  change: [Modal[]]\n}\n\n/**\n * Base z-index for modals\n */\nexport const BASE_Z_INDEX = 1000\n\n/**\n * Z-index increment per stacked modal\n */\nexport const Z_INDEX_INCREMENT = 10\n\n/**\n * Calculate z-index for a modal at given stack position\n */\nexport function calculateZIndex(stackOrder: number): number {\n  return BASE_Z_INDEX + (stackOrder - 1) * Z_INDEX_INCREMENT\n}\n\n/**\n * Create the modal stack manager\n */\nfunction createModalStack(): ModalStack & {\n  push: (modal: ModalInternal) => void\n  remove: (modal: ModalInternal) => void\n} {\n  const stack: ModalInternal[] = []\n  const events = createEventEmitter<StackEvents>()\n\n  function updateStackState(): void {\n    stack.forEach((modal, index) => {\n      const order = index + 1\n      const isTopMost = index === stack.length - 1\n      modal._setStackOrder(order)\n      modal._setIsTopMost(isTopMost)\n    })\n  }\n\n  function push(modal: ModalInternal): void {\n    // Check if modal is already in stack\n    const existingIndex = stack.indexOf(modal)\n    if (existingIndex !== -1) {\n      return\n    }\n\n    stack.push(modal)\n    updateStackState()\n    events.emit('push', modal)\n    events.emit('change', [...stack])\n  }\n\n  function remove(modal: ModalInternal): void {\n    const index = stack.indexOf(modal)\n    if (index === -1) return\n\n    stack.splice(index, 1)\n    updateStackState()\n    events.emit('pop', modal)\n    events.emit('change', [...stack])\n  }\n\n  function count(): number {\n    return stack.length\n  }\n\n  function isEmpty(): boolean {\n    return stack.length === 0\n  }\n\n  function getAll(): Modal[] {\n    return [...stack]\n  }\n\n  function getTopMost(): Modal | null {\n    return stack[stack.length - 1] ?? null\n  }\n\n  function getByOrder(order: number): Modal | null {\n    return stack[order - 1] ?? null\n  }\n\n  function closeAll(): void {\n    // Close from top to bottom\n    const modalsToClose = [...stack].reverse()\n    modalsToClose.forEach((modal) => modal.close())\n  }\n\n  function closeTopMost(): void {\n    const topMost = getTopMost()\n    if (topMost) {\n      topMost.close()\n    }\n  }\n\n  function on<K extends StackEvent>(\n    event: K,\n    handler: K extends 'change'\n      ? (modals: Modal[]) => void\n      : (modal: Modal) => void\n  ): () => void {\n    return events.on(event, handler as (...args: StackEvents[K]) => void)\n  }\n\n  function off<K extends StackEvent>(\n    event: K,\n    handler: K extends 'change'\n      ? (modals: Modal[]) => void\n      : (modal: Modal) => void\n  ): void {\n    events.off(event, handler as (...args: StackEvents[K]) => void)\n  }\n\n  return {\n    count,\n    isEmpty,\n    getAll,\n    getTopMost,\n    getByOrder,\n    closeAll,\n    closeTopMost,\n    on,\n    off,\n    push,\n    remove,\n  }\n}\n\n/**\n * Global modal stack singleton\n */\nexport const modalStack = createModalStack()\n\n/**\n * Internal stack methods for modal instances\n * @internal\n */\nexport const stackInternal = {\n  push: modalStack.push,\n  remove: modalStack.remove,\n}\n","/**\n * Focus utility functions for ModalKit\n */\n\n/**\n * Selector for focusable elements\n */\nexport const FOCUSABLE_SELECTOR = [\n  'a[href]',\n  'area[href]',\n  'button:not([disabled])',\n  'input:not([disabled])',\n  'select:not([disabled])',\n  'textarea:not([disabled])',\n  '[tabindex]:not([tabindex=\"-1\"])',\n  '[contenteditable=\"true\"]',\n  'audio[controls]',\n  'video[controls]',\n  'details > summary:first-of-type',\n].join(',')\n\n/**\n * Check if an element is visible\n */\nfunction isVisible(element: HTMLElement): boolean {\n  // Check if element is hidden\n  if (\n    element.offsetWidth === 0 &&\n    element.offsetHeight === 0 &&\n    element.getClientRects().length === 0\n  ) {\n    return false\n  }\n\n  // Check computed styles\n  const style = getComputedStyle(element)\n  if (style.visibility === 'hidden' || style.display === 'none') {\n    return false\n  }\n\n  return true\n}\n\n/**\n * Check if an element is focusable\n */\nexport function isFocusable(element: Element): boolean {\n  if (!(element instanceof HTMLElement)) return false\n  if (!element.matches(FOCUSABLE_SELECTOR)) return false\n  if (!isVisible(element)) return false\n\n  return true\n}\n\n/**\n * Get all focusable elements within a container\n */\nexport function getFocusableElements(container: HTMLElement): HTMLElement[] {\n  const elements = container.querySelectorAll<HTMLElement>(FOCUSABLE_SELECTOR)\n  return Array.from(elements).filter(isFocusable)\n}\n\n/**\n * Get the first focusable element in a container\n */\nexport function getFirstFocusable(container: HTMLElement): HTMLElement | null {\n  const focusables = getFocusableElements(container)\n  return focusables[0] ?? null\n}\n\n/**\n * Get the last focusable element in a container\n */\nexport function getLastFocusable(container: HTMLElement): HTMLElement | null {\n  const focusables = getFocusableElements(container)\n  return focusables[focusables.length - 1] ?? null\n}\n\n/**\n * Get the currently focused element\n */\nexport function getActiveElement(doc: Document = document): Element | null {\n  let activeElement = doc.activeElement\n\n  // Handle shadow DOM\n  while (activeElement?.shadowRoot?.activeElement) {\n    activeElement = activeElement.shadowRoot.activeElement\n  }\n\n  return activeElement\n}\n\n/**\n * Focus an element safely\n */\nexport function focusElement(\n  element: HTMLElement | null | undefined,\n  options?: FocusOptions\n): boolean {\n  if (!element) return false\n\n  try {\n    element.focus(options)\n    return getActiveElement() === element\n  } catch {\n    return false\n  }\n}\n\n/**\n * Storage for saved focus state\n */\ninterface FocusState {\n  element: HTMLElement | null\n  scrollX: number\n  scrollY: number\n}\n\nlet savedFocus: FocusState | null = null\n\n/**\n * Save the current focus state\n */\nexport function saveFocus(): void {\n  const activeElement = getActiveElement()\n  savedFocus = {\n    element: activeElement instanceof HTMLElement ? activeElement : null,\n    scrollX: window.scrollX,\n    scrollY: window.scrollY,\n  }\n}\n\n/**\n * Restore previously saved focus state\n */\nexport function restoreFocus(preventScroll: boolean = true): void {\n  if (!savedFocus) return\n\n  const { element, scrollX, scrollY } = savedFocus\n\n  if (element && document.body.contains(element)) {\n    focusElement(element, { preventScroll })\n\n    // Restore scroll position if needed\n    if (preventScroll) {\n      window.scrollTo(scrollX, scrollY)\n    }\n  }\n\n  savedFocus = null\n}\n\n/**\n * Clear saved focus without restoring\n */\nexport function clearSavedFocus(): void {\n  savedFocus = null\n}\n\n/**\n * Check if focus is within a container\n */\nexport function isFocusWithin(container: HTMLElement): boolean {\n  const activeElement = getActiveElement()\n  if (!activeElement) return false\n  return container.contains(activeElement)\n}\n","/**\n * Focus trap implementation for ModalKit\n */\n\nimport type { FocusTrap, FocusTrapConfig } from '../types'\nimport {\n  getFocusableElements,\n  getFirstFocusable,\n  focusElement,\n  getActiveElement,\n  saveFocus,\n  restoreFocus,\n} from '../utils/focus'\n\n/**\n * Create a focus trap instance\n */\nexport function createFocusTrap(config: FocusTrapConfig): FocusTrap {\n  const {\n    container,\n    initialFocus,\n    fallbackFocus,\n    returnFocus,\n    escapeDeactivates = true,\n    clickOutsideDeactivates = false,\n    allowOutsideClick = false,\n    onActivate,\n    onDeactivate,\n  } = config\n\n  let active = false\n  let paused = false\n\n  // Resolve element from ref\n  function resolveElement(\n    ref: HTMLElement | (() => HTMLElement | null) | null | undefined\n  ): HTMLElement | null {\n    if (!ref) return null\n    if (typeof ref === 'function') return ref()\n    return ref\n  }\n\n  // Handle Tab key navigation\n  function handleKeyDown(event: KeyboardEvent): void {\n    if (!active || paused) return\n    if (event.key !== 'Tab') return\n\n    const focusables = getFocusableElements(container)\n    if (focusables.length === 0) return\n\n    const firstFocusable = focusables[0]\n    const lastFocusable = focusables[focusables.length - 1]\n    const activeElement = getActiveElement()\n\n    // Handle Shift+Tab (backwards)\n    if (event.shiftKey) {\n      if (activeElement === firstFocusable || !container.contains(activeElement as Node)) {\n        event.preventDefault()\n        focusElement(lastFocusable)\n      }\n    } else {\n      // Handle Tab (forwards)\n      if (activeElement === lastFocusable || !container.contains(activeElement as Node)) {\n        event.preventDefault()\n        focusElement(firstFocusable)\n      }\n    }\n  }\n\n  // Handle Escape key\n  function handleEscapeKey(event: KeyboardEvent): void {\n    if (!active || paused) return\n    if (event.key !== 'Escape') return\n\n    if (escapeDeactivates) {\n      event.preventDefault()\n      deactivate()\n    }\n  }\n\n  // Handle clicks outside the container\n  function handleClick(event: MouseEvent): void {\n    if (!active || paused) return\n\n    const target = event.target as Node\n    if (!container.contains(target)) {\n      // Check if outside click is allowed\n      const shouldAllowClick =\n        typeof allowOutsideClick === 'function'\n          ? allowOutsideClick(event)\n          : allowOutsideClick\n\n      if (!shouldAllowClick) {\n        event.preventDefault()\n        event.stopPropagation()\n      }\n\n      if (clickOutsideDeactivates) {\n        deactivate()\n      }\n    }\n  }\n\n  // Handle focus leaving the container\n  function handleFocusIn(event: FocusEvent): void {\n    if (!active || paused) return\n\n    const target = event.target as Node\n    if (!container.contains(target)) {\n      // Focus has left the trap, bring it back\n      event.preventDefault()\n      const firstFocusable = getFirstFocusable(container)\n      if (firstFocusable) {\n        focusElement(firstFocusable)\n      } else {\n        // Fallback to container itself\n        container.focus()\n      }\n    }\n  }\n\n  function activate(): void {\n    if (active) return\n\n    // Save current focus for restoration\n    saveFocus()\n\n    active = true\n    paused = false\n\n    // Add event listeners\n    document.addEventListener('keydown', handleKeyDown, true)\n    document.addEventListener('keydown', handleEscapeKey, true)\n    document.addEventListener('click', handleClick, true)\n    document.addEventListener('focusin', handleFocusIn, true)\n\n    // Set initial focus\n    const initialElement = resolveElement(initialFocus)\n    const fallbackElement = resolveElement(fallbackFocus)\n    const firstFocusable = getFirstFocusable(container)\n\n    const elementToFocus =\n      initialElement ??\n      fallbackElement ??\n      firstFocusable ??\n      container\n\n    // Make container focusable as fallback\n    if (!container.hasAttribute('tabindex')) {\n      container.setAttribute('tabindex', '-1')\n    }\n\n    focusElement(elementToFocus as HTMLElement, { preventScroll: true })\n\n    onActivate?.()\n  }\n\n  function deactivate(): void {\n    if (!active) return\n\n    active = false\n    paused = false\n\n    // Remove event listeners\n    document.removeEventListener('keydown', handleKeyDown, true)\n    document.removeEventListener('keydown', handleEscapeKey, true)\n    document.removeEventListener('click', handleClick, true)\n    document.removeEventListener('focusin', handleFocusIn, true)\n\n    // Restore focus\n    const returnElement = resolveElement(returnFocus)\n    if (returnElement) {\n      focusElement(returnElement, { preventScroll: true })\n    } else {\n      restoreFocus(true)\n    }\n\n    onDeactivate?.()\n  }\n\n  function pause(): void {\n    if (!active) return\n    paused = true\n  }\n\n  function unpause(): void {\n    if (!active) return\n    paused = false\n  }\n\n  function isActive(): boolean {\n    return active\n  }\n\n  function isPaused(): boolean {\n    return paused\n  }\n\n  return {\n    activate,\n    deactivate,\n    pause,\n    unpause,\n    isActive,\n    isPaused,\n  }\n}\n","/**\n * DOM utility functions for ModalKit\n */\n\n/**\n * Get an element by selector string or return the element itself\n */\nexport function getElement(\n  target: HTMLElement | string | null | undefined\n): HTMLElement | null {\n  if (!target) return null\n  if (typeof target === 'string') {\n    return document.querySelector(target)\n  }\n  return target\n}\n\n/**\n * Create a portal container element\n */\nexport function createPortalContainer(id?: string): HTMLDivElement {\n  const container = document.createElement('div')\n  if (id) {\n    container.id = id\n  }\n  container.setAttribute('data-modalkit-portal', '')\n  return container\n}\n\n/**\n * Safely remove an element from the DOM\n */\nexport function removeElement(element: HTMLElement | null): void {\n  if (element && element.parentNode) {\n    element.parentNode.removeChild(element)\n  }\n}\n\n/**\n * Check if an element is in the document\n */\nexport function isInDocument(element: HTMLElement | null): boolean {\n  if (!element) return false\n  return document.body.contains(element)\n}\n\n/**\n * Get the document's scrollbar width\n */\nexport function getScrollbarWidth(): number {\n  // Create outer element\n  const outer = document.createElement('div')\n  outer.style.visibility = 'hidden'\n  outer.style.overflow = 'scroll'\n  document.body.appendChild(outer)\n\n  // Create inner element\n  const inner = document.createElement('div')\n  outer.appendChild(inner)\n\n  // Calculate scrollbar width\n  const scrollbarWidth = outer.offsetWidth - inner.offsetWidth\n\n  // Cleanup\n  removeElement(outer)\n\n  return scrollbarWidth\n}\n\n/**\n * Check if the element or its descendants contain another element\n */\nexport function contains(parent: Element | null, child: Element | null): boolean {\n  if (!parent || !child) return false\n  return parent === child || parent.contains(child)\n}\n\n/**\n * Set multiple styles on an element\n */\nexport function setStyles(\n  element: HTMLElement,\n  styles: Partial<CSSStyleDeclaration>\n): void {\n  Object.assign(element.style, styles)\n}\n\n/**\n * Get the owner document of an element\n */\nexport function getOwnerDocument(element: Element | null): Document {\n  return element?.ownerDocument ?? document\n}\n\n/**\n * Check if we're in a browser environment\n */\nexport function isBrowser(): boolean {\n  return typeof window !== 'undefined' && typeof document !== 'undefined'\n}\n","/**\n * Scroll lock implementation for ModalKit\n */\n\nimport type { ScrollLock } from '../types'\nimport { getScrollbarWidth } from '../utils/dom'\n\n// Reference counting for multiple modals\nlet lockCount = 0\n\n// Store original body styles\nlet originalStyles: {\n  overflow: string\n  paddingRight: string\n} | null = null\n\n/**\n * Check if iOS Safari\n * @internal\n */\n/* c8 ignore start */\nfunction isIOS(): boolean {\n  return (\n    typeof navigator !== 'undefined' &&\n    /iPad|iPhone|iPod/.test(navigator.userAgent)\n  )\n}\n\n/**\n * Get current scroll position\n * @internal\n */\nfunction getScrollPosition(): { x: number; y: number } {\n  return {\n    x: window.pageXOffset ?? document.documentElement.scrollLeft,\n    y: window.pageYOffset ?? document.documentElement.scrollTop,\n  }\n}\n/* c8 ignore stop */\n\n// Store scroll position for iOS fix\nlet scrollPosition: { x: number; y: number } | null = null\n\n/**\n * Lock body scroll\n */\nfunction lock(): void {\n  lockCount++\n\n  // Only apply lock on first call\n  if (lockCount > 1) return\n\n  const scrollbarWidth = getScrollbarWidth()\n  const hasScrollbar = window.innerWidth > document.documentElement.clientWidth\n\n  // Save original styles\n  originalStyles = {\n    overflow: document.body.style.overflow,\n    paddingRight: document.body.style.paddingRight,\n  }\n\n  // Apply lock styles\n  document.body.style.overflow = 'hidden'\n\n  // Add padding to prevent layout shift from scrollbar disappearing\n  if (hasScrollbar && scrollbarWidth > 0) {\n    const currentPadding = parseInt(\n      getComputedStyle(document.body).paddingRight,\n      10\n    ) || 0\n    document.body.style.paddingRight = `${currentPadding + scrollbarWidth}px`\n  }\n\n  // iOS Safari fix\n  /* c8 ignore start */\n  if (isIOS()) {\n    scrollPosition = getScrollPosition()\n    document.body.style.position = 'fixed'\n    document.body.style.top = `-${scrollPosition.y}px`\n    document.body.style.left = `-${scrollPosition.x}px`\n    document.body.style.width = '100%'\n  }\n  /* c8 ignore stop */\n}\n\n/**\n * Unlock body scroll\n */\n/* c8 ignore start */\nfunction unlock(): void {\n  if (lockCount === 0) return\n\n  lockCount--\n\n  // Only remove lock on last call\n  if (lockCount > 0) return\n\n  // Restore original styles\n  if (originalStyles) {\n    document.body.style.overflow = originalStyles.overflow\n    document.body.style.paddingRight = originalStyles.paddingRight\n    originalStyles = null\n  }\n\n  // iOS Safari fix - restore scroll position\n  if (isIOS() && scrollPosition) {\n    document.body.style.position = ''\n    document.body.style.top = ''\n    document.body.style.left = ''\n    document.body.style.width = ''\n    window.scrollTo(scrollPosition.x, scrollPosition.y)\n    scrollPosition = null\n  }\n}\n/* c8 ignore stop */\n\n/**\n * Check if scroll is locked\n */\nfunction isLocked(): boolean {\n  return lockCount > 0\n}\n\n/**\n * Force reset scroll lock (useful for testing)\n * @internal\n */\nexport function resetScrollLock(): void {\n  if (originalStyles) {\n    document.body.style.overflow = originalStyles.overflow\n    document.body.style.paddingRight = originalStyles.paddingRight\n    originalStyles = null\n  }\n\n  /* c8 ignore start */\n  if (isIOS()) {\n    document.body.style.position = ''\n    document.body.style.top = ''\n    document.body.style.left = ''\n    document.body.style.width = ''\n  }\n  /* c8 ignore stop */\n\n  lockCount = 0\n  scrollPosition = null\n}\n\n/**\n * Scroll lock singleton\n */\nexport const scrollLock: ScrollLock = {\n  lock,\n  unlock,\n  isLocked,\n}\n","/**\n * Animation controller for ModalKit\n */\n\nimport type { AnimationState, AnimationType, AnimationController } from '../types'\n\n/**\n * Configuration for animation controller\n */\nexport interface AnimationControllerConfig {\n  /** Animation duration in ms */\n  duration: number\n  /** Called when animation state changes */\n  onStateChange?: (state: AnimationState) => void\n  /** Called when animation starts */\n  onAnimationStart?: (type: AnimationType) => void\n  /** Called when animation ends */\n  onAnimationEnd?: (type: AnimationType) => void\n}\n\n/**\n * Create an animation controller\n */\nexport function createAnimationController(\n  config: AnimationControllerConfig\n): AnimationController {\n  const { duration, onStateChange, onAnimationStart, onAnimationEnd } = config\n\n  let state: AnimationState = 'idle'\n  let timerId: ReturnType<typeof setTimeout> | null = null\n\n  function clearTimer(): void {\n    if (timerId !== null) {\n      clearTimeout(timerId)\n      timerId = null\n    }\n  }\n\n  function setState(newState: AnimationState): void {\n    if (state !== newState) {\n      state = newState\n      onStateChange?.(state)\n    }\n  }\n\n  function startEnter(): void {\n    clearTimer()\n    setState('entering')\n    onAnimationStart?.('enter')\n\n    timerId = setTimeout(() => {\n      setState('entered')\n      onAnimationEnd?.('enter')\n      timerId = null\n    }, duration)\n  }\n\n  function startExit(): void {\n    clearTimer()\n    setState('exiting')\n    onAnimationStart?.('exit')\n\n    timerId = setTimeout(() => {\n      setState('exited')\n      onAnimationEnd?.('exit')\n\n      // Transition to idle after exited\n      timerId = setTimeout(() => {\n        setState('idle')\n        timerId = null\n      }, 0)\n    }, duration)\n  }\n\n  function skipTo(targetState: 'entered' | 'exited'): void {\n    clearTimer()\n\n    if (targetState === 'entered') {\n      setState('entered')\n    } else {\n      setState('exited')\n      // Transition to idle\n      timerId = setTimeout(() => {\n        setState('idle')\n        timerId = null\n      }, 0)\n    }\n  }\n\n  function getState(): AnimationState {\n    return state\n  }\n\n  function isAnimating(): boolean {\n    return state === 'entering' || state === 'exiting'\n  }\n\n  function destroy(): void {\n    clearTimer()\n    state = 'idle'\n  }\n\n  return {\n    startEnter,\n    startExit,\n    skipTo,\n    getState,\n    isAnimating,\n    destroy,\n  }\n}\n\n/**\n * Create a no-op animation controller (for when animations are disabled)\n */\nexport function createNoopAnimationController(): AnimationController {\n  let state: AnimationState = 'idle'\n\n  return {\n    startEnter() {\n      state = 'entered'\n    },\n    startExit() {\n      state = 'idle'\n    },\n    skipTo(targetState: 'entered' | 'exited') {\n      state = targetState === 'entered' ? 'entered' : 'idle'\n    },\n    getState() {\n      return state\n    },\n    isAnimating() {\n      return false\n    },\n    destroy() {\n      state = 'idle'\n    },\n  }\n}\n","/**\n * Keyboard handling for ModalKit\n */\n\n/**\n * Check if event is Escape key\n */\nexport function isEscapeKey(event: KeyboardEvent): boolean {\n  return event.key === 'Escape' || event.key === 'Esc' || event.keyCode === 27\n}\n\n/**\n * Check if event is Tab key\n */\nexport function isTabKey(event: KeyboardEvent): boolean {\n  return event.key === 'Tab' || event.keyCode === 9\n}\n\n/**\n * Check if event is Enter key\n */\nexport function isEnterKey(event: KeyboardEvent): boolean {\n  return event.key === 'Enter' || event.keyCode === 13\n}\n\n/**\n * Check if event is Space key\n */\nexport function isSpaceKey(event: KeyboardEvent): boolean {\n  return event.key === ' ' || event.key === 'Spacebar' || event.keyCode === 32\n}\n\n/**\n * Configuration for keyboard handler\n */\nexport interface KeyboardHandlerConfig {\n  /** Close modal on Escape */\n  closeOnEscape: boolean\n  /** Callback when Escape is pressed */\n  onEscapeKeyDown?: (event: KeyboardEvent) => void\n  /** Close callback */\n  onClose: () => void\n  /** Whether this is the top-most modal */\n  isTopMost: () => boolean\n}\n\n/**\n * Create a keyboard event handler for modals\n */\nexport function createKeyboardHandler(\n  config: KeyboardHandlerConfig\n): (event: KeyboardEvent) => void {\n  const { closeOnEscape, onEscapeKeyDown, onClose, isTopMost } = config\n\n  return function handleKeyDown(event: KeyboardEvent): void {\n    // Only handle events for top-most modal\n    if (!isTopMost()) return\n\n    if (isEscapeKey(event)) {\n      // Call user callback first\n      onEscapeKeyDown?.(event)\n\n      // Close if enabled and event not prevented\n      if (closeOnEscape && !event.defaultPrevented) {\n        event.preventDefault()\n        event.stopPropagation()\n        onClose()\n      }\n    }\n  }\n}\n\n/**\n * Prevent default and stop propagation\n */\nexport function stopEvent(event: Event): void {\n  event.preventDefault()\n  event.stopPropagation()\n}\n","/**\n * Portal utilities for ModalKit\n */\n\nimport { getElement, createPortalContainer, removeElement } from '../utils/dom'\n\n// Default portal container ID\nconst DEFAULT_PORTAL_ID = 'modalkit-portal-root'\n\n/**\n * Get or create the default portal container\n */\nexport function getPortalContainer(\n  target?: HTMLElement | string | null\n): HTMLElement {\n  // If a specific target is provided, use it\n  if (target) {\n    const element = getElement(target)\n    if (element) return element\n  }\n\n  // Try to find existing default container\n  let container = document.getElementById(DEFAULT_PORTAL_ID)\n\n  // Create new container if doesn't exist\n  if (!container) {\n    container = createPortalContainer(DEFAULT_PORTAL_ID)\n    document.body.appendChild(container)\n  }\n\n  return container\n}\n\n/**\n * Create a new portal element\n */\nexport function createPortal(id?: string): HTMLDivElement {\n  return createPortalContainer(id)\n}\n\n/**\n * Append a portal element to a target\n */\nexport function appendPortal(\n  portal: HTMLElement,\n  target?: HTMLElement | string | null\n): void {\n  const container = getPortalContainer(target)\n  container.appendChild(portal)\n}\n\n/**\n * Remove a portal element from the DOM\n */\nexport function removePortal(portal: HTMLElement | null): void {\n  removeElement(portal)\n}\n\n/**\n * Clean up all modalkit portals from the DOM\n */\nexport function cleanupPortals(): void {\n  const portals = document.querySelectorAll('[data-modalkit-portal]')\n  portals.forEach((portal) => portal.remove())\n\n  // Also remove the default container if empty\n  const defaultContainer = document.getElementById(DEFAULT_PORTAL_ID)\n  if (defaultContainer && defaultContainer.children.length === 0) {\n    defaultContainer.remove()\n  }\n}\n","/**\n * ID generation utilities for ModalKit\n */\n\nlet counter = 0\n\n/**\n * Generate a unique ID with optional prefix\n */\nexport function generateId(prefix: string = 'modalkit'): string {\n  counter++\n  return `${prefix}-${counter}`\n}\n\n/**\n * Create a namespaced ID generator\n */\nexport function createIdGenerator(namespace: string): () => string {\n  let localCounter = 0\n\n  return function generateNamespacedId(): string {\n    localCounter++\n    return `${namespace}-${localCounter}`\n  }\n}\n\n/**\n * Reset the global counter (useful for testing)\n */\nexport function resetIdCounter(): void {\n  counter = 0\n}\n\n/**\n * Create modal-specific IDs\n */\nexport function createModalIds(baseId: string): {\n  modalId: string\n  titleId: string\n  descriptionId: string\n} {\n  return {\n    modalId: baseId,\n    titleId: `${baseId}-title`,\n    descriptionId: `${baseId}-description`,\n  }\n}\n","/**\n * Main modal factory for ModalKit\n */\n\nimport type {\n  Modal,\n  ModalConfig,\n  ModalState,\n  ModalInternal,\n  AnimationState,\n  PortalProps,\n  OverlayProps,\n  ContainerProps,\n  ContentProps,\n  TitleProps,\n  DescriptionProps,\n  CloseButtonProps,\n  TriggerProps,\n  FocusTrap,\n} from '../types'\n\nimport { mergeConfig, DEFAULT_CONFIG } from './config'\nimport { createInitialState, createStateManager, shouldBeMounted } from './state'\nimport { stackInternal, calculateZIndex } from './stack'\nimport { createFocusTrap } from '../features/focus-trap'\nimport { scrollLock } from '../features/scroll-lock'\nimport {\n  createAnimationController,\n  createNoopAnimationController,\n} from '../features/animation'\nimport { createKeyboardHandler } from '../features/keyboard'\nimport { getPortalContainer } from '../features/portal'\nimport { generateId, createModalIds } from '../utils/id'\nimport { contains as domContains } from '../utils/dom'\nimport {\n  saveFocus,\n  restoreFocus,\n  focusElement,\n  getFirstFocusable,\n  getLastFocusable,\n} from '../utils/focus'\n\n/**\n * Create a new modal instance\n */\nexport function createModal(userConfig?: ModalConfig): Modal {\n  // Merge config with defaults\n  const config = mergeConfig(userConfig)\n\n  // Generate IDs\n  const baseId = config.id ?? generateId('modal')\n  const ids = createModalIds(baseId)\n\n  // Initialize state\n  const initialOpen = config.open ?? config.defaultOpen ?? false\n  const stateManager = createStateManager(createInitialState(initialOpen))\n\n  // Animation controller\n  const animationController = config.animated\n    ? createAnimationController({\n        duration: config.animationDuration ?? DEFAULT_CONFIG.animationDuration,\n        onStateChange: (animationState) => {\n          stateManager.setState({\n            animationState,\n            mounted: shouldBeMounted(stateManager.getState().open, animationState),\n          })\n        },\n        onAnimationStart: config.onAnimationStart,\n        onAnimationEnd: config.onAnimationEnd,\n      })\n    : createNoopAnimationController()\n\n  // Focus trap (created lazily)\n  let focusTrap: FocusTrap | null = null\n  let contentElement: HTMLElement | null = null\n  let overlayElement: HTMLElement | null = null\n  let containerElement: HTMLElement | null = null\n\n  // Keyboard handler\n  const handleKeyDown = createKeyboardHandler({\n    closeOnEscape: config.closeOnEscape ?? DEFAULT_CONFIG.closeOnEscape,\n    onEscapeKeyDown: config.onEscapeKeyDown,\n    onClose: () => close(),\n    isTopMost: () => stateManager.getState().isTopMost,\n  })\n\n  // ============ INTERNAL METHODS ============\n\n  function resolveElement(\n    ref: HTMLElement | (() => HTMLElement | null) | null | undefined\n  ): HTMLElement | null {\n    if (!ref) return null\n    if (typeof ref === 'function') return ref()\n    return ref\n  }\n\n  function setupFocusTrap(): void {\n    if (!contentElement || focusTrap) return\n    if (!config.trapFocus) return\n\n    focusTrap = createFocusTrap({\n      container: contentElement,\n      initialFocus: resolveElement(config.initialFocusRef),\n      returnFocus: resolveElement(config.finalFocusRef),\n      escapeDeactivates: false, // We handle escape ourselves\n      clickOutsideDeactivates: false,\n    })\n  }\n\n  function teardownFocusTrap(): void {\n    if (focusTrap) {\n      focusTrap.deactivate()\n      focusTrap = null\n    }\n  }\n\n  function activateFocusTrap(): void {\n    // Create focus trap if needed\n    if (!focusTrap && config.trapFocus && contentElement) {\n      setupFocusTrap()\n    }\n\n    // Activate if exists and not active\n    if (focusTrap && !focusTrap.isActive()) {\n      focusTrap.activate()\n    }\n  }\n\n  function handleOpen(): void {\n    const state = stateManager.getState()\n    if (state.open) return\n\n    // Save focus before opening\n    if (config.restoreFocus) {\n      saveFocus()\n    }\n\n    // Update state\n    stateManager.setState({ open: true, mounted: true })\n\n    // Start animation\n    if (config.animated) {\n      animationController.startEnter()\n    } else {\n      stateManager.setState({ animationState: 'entered' })\n    }\n\n    // Add to stack\n    stackInternal.push(modal as ModalInternal)\n\n    // Lock scroll\n    if (config.preventScroll) {\n      scrollLock.lock()\n    }\n\n    // Callbacks\n    config.onOpen?.()\n    config.onOpenChange?.(true)\n\n    // Focus trap will be activated when content is mounted\n    // (via ref callback in getContentProps)\n  }\n\n  function handleClose(): void {\n    const state = stateManager.getState()\n    if (!state.open) return\n\n    // Update state\n    stateManager.setState({ open: false })\n\n    // Start animation\n    if (config.animated) {\n      animationController.startExit()\n    } else {\n      stateManager.setState({ animationState: 'idle', mounted: false })\n    }\n\n    // Remove from stack\n    stackInternal.remove(modal as ModalInternal)\n\n    // Deactivate focus trap\n    teardownFocusTrap()\n\n    // Unlock scroll\n    if (config.preventScroll) {\n      scrollLock.unlock()\n    }\n\n    // Restore focus\n    if (config.restoreFocus) {\n      const finalFocus = resolveElement(config.finalFocusRef)\n      if (finalFocus) {\n        focusElement(finalFocus)\n      } else {\n        restoreFocus()\n      }\n    }\n\n    // Callbacks\n    config.onClose?.()\n    config.onOpenChange?.(false)\n  }\n\n  function handleOverlayClick(e: MouseEvent): void {\n    // Only close if clicking directly on overlay/container, not content\n    const target = e.target as HTMLElement\n    const isOverlay = target === overlayElement || target === containerElement\n\n    if (!isOverlay) return\n\n    config.onOverlayClick?.(e)\n\n    if (config.closeOnOverlayClick && !e.defaultPrevented) {\n      close()\n    }\n  }\n\n  // ============ PUBLIC API ============\n\n  function isOpen(): boolean {\n    return stateManager.getState().open\n  }\n\n  function isMounted(): boolean {\n    return stateManager.getState().mounted\n  }\n\n  function getState(): ModalState {\n    return stateManager.getState()\n  }\n\n  function subscribe(callback: (state: ModalState) => void): () => void {\n    return stateManager.subscribe(callback)\n  }\n\n  function open(): void {\n    handleOpen()\n  }\n\n  function close(): void {\n    handleClose()\n  }\n\n  function toggle(): void {\n    if (isOpen()) {\n      close()\n    } else {\n      open()\n    }\n  }\n\n  function getStackOrder(): number {\n    return stateManager.getState().stackOrder\n  }\n\n  function isTopMost(): boolean {\n    return stateManager.getState().isTopMost\n  }\n\n  function isAnimating(): boolean {\n    return animationController.isAnimating()\n  }\n\n  function getAnimationState(): AnimationState {\n    return stateManager.getState().animationState\n  }\n\n  function focusFirst(): void {\n    if (!contentElement) return\n    const first = getFirstFocusable(contentElement)\n    if (first) focusElement(first)\n  }\n\n  function focusLast(): void {\n    if (!contentElement) return\n    const last = getLastFocusable(contentElement)\n    if (last) focusElement(last)\n  }\n\n  function contains(element: Element | null): boolean {\n    return domContains(contentElement, element)\n  }\n\n  function getPortalTarget(): HTMLElement {\n    return getPortalContainer(config.portalTarget)\n  }\n\n  // ============ PROPS GETTERS ============\n\n  function getPortalProps(): PortalProps {\n    return {\n      'data-modalkit-portal': '',\n      'data-state': getAnimationState(),\n    }\n  }\n\n  function getOverlayProps(): OverlayProps {\n    const state = getState()\n    const zIndex = calculateZIndex(state.stackOrder)\n\n    return {\n      ref: (el) => {\n        overlayElement = el\n      },\n      'data-modalkit-overlay': '',\n      'data-state': state.animationState,\n      style: {\n        position: 'fixed',\n        inset: '0',\n        zIndex,\n      },\n      onClick: handleOverlayClick,\n    }\n  }\n\n  function getContainerProps(): ContainerProps {\n    const state = getState()\n    const zIndex = calculateZIndex(state.stackOrder) + 1\n    const scrollBehavior = config.scrollBehavior ?? DEFAULT_CONFIG.scrollBehavior\n\n    return {\n      ref: (el) => {\n        containerElement = el\n      },\n      'data-modalkit-container': '',\n      'data-state': state.animationState,\n      style: {\n        position: 'fixed',\n        inset: '0',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex,\n        overflow: scrollBehavior === 'inside' ? 'auto' : 'hidden',\n      },\n      onClick: handleOverlayClick,\n    }\n  }\n\n  function getContentProps(): ContentProps {\n    const state = getState()\n\n    const props: ContentProps = {\n      ref: (el) => {\n        const wasNull = contentElement === null\n        contentElement = el\n\n        // Setup and activate focus trap when content is mounted\n        if (el && wasNull && state.open) {\n          setupFocusTrap()\n          if (config.autoFocus) {\n            // Delay to ensure element is in DOM\n            requestAnimationFrame(() => {\n              activateFocusTrap()\n            })\n          }\n        }\n      },\n      role: config.role ?? DEFAULT_CONFIG.role,\n      'aria-modal': true,\n      'data-modalkit-content': '',\n      'data-state': state.animationState,\n      tabIndex: -1,\n      onKeyDown: handleKeyDown,\n    }\n\n    // Add aria attributes\n    if (config.ariaLabel) {\n      props['aria-label'] = config.ariaLabel\n    } else if (config.ariaLabelledBy) {\n      props['aria-labelledby'] = config.ariaLabelledBy\n    } else {\n      // Default to title ID\n      props['aria-labelledby'] = ids.titleId\n    }\n\n    if (config.ariaDescribedBy) {\n      props['aria-describedby'] = config.ariaDescribedBy\n    } else {\n      props['aria-describedby'] = ids.descriptionId\n    }\n\n    return props\n  }\n\n  function getTitleProps(customId?: string): TitleProps {\n    return {\n      id: customId ?? ids.titleId,\n      'data-modalkit-title': '',\n    }\n  }\n\n  function getDescriptionProps(customId?: string): DescriptionProps {\n    return {\n      id: customId ?? ids.descriptionId,\n      'data-modalkit-description': '',\n    }\n  }\n\n  function getCloseButtonProps(): CloseButtonProps {\n    return {\n      type: 'button',\n      'aria-label': 'Close',\n      'data-modalkit-close': '',\n      onClick: () => close(),\n    }\n  }\n\n  function getTriggerProps(): TriggerProps {\n    return {\n      type: 'button',\n      'aria-haspopup': 'dialog',\n      'aria-expanded': isOpen(),\n      'data-modalkit-trigger': '',\n      onClick: () => open(),\n    }\n  }\n\n  function getConfig(): ModalConfig {\n    return { ...config }\n  }\n\n  function setConfig(newConfig: Partial<ModalConfig>): void {\n    Object.assign(config, newConfig)\n  }\n\n  function destroy(): void {\n    if (isOpen()) {\n      close()\n    }\n    teardownFocusTrap()\n    animationController.destroy()\n    contentElement = null\n    overlayElement = null\n    containerElement = null\n  }\n\n  // ============ INTERNAL INTERFACE ============\n\n  const modal: ModalInternal = {\n    // Public API\n    isOpen,\n    isMounted,\n    getState,\n    subscribe,\n    open,\n    close,\n    toggle,\n    getStackOrder,\n    isTopMost,\n    isAnimating,\n    getAnimationState,\n    focusFirst,\n    focusLast,\n    contains,\n    getPortalTarget,\n    getPortalProps,\n    getOverlayProps,\n    getContainerProps,\n    getContentProps,\n    getTitleProps,\n    getDescriptionProps,\n    getCloseButtonProps,\n    getTriggerProps,\n    getConfig,\n    setConfig,\n    destroy,\n\n    // Internal API\n    _id: baseId,\n    _getTitleId: () => ids.titleId,\n    _getDescriptionId: () => ids.descriptionId,\n    _setStackOrder: (order) => stateManager.setState({ stackOrder: order }),\n    _setIsTopMost: (isTop) => stateManager.setState({ isTopMost: isTop }),\n    _getContentElement: () => contentElement,\n    _handleOverlayClick: handleOverlayClick,\n    _handleKeyDown: handleKeyDown,\n  }\n\n  // Open if defaultOpen is true\n  if (initialOpen) {\n    stackInternal.push(modal)\n  }\n\n  return modal\n}\n","/**\n * React context for ModalKit\n */\n\nimport React, {\n  createContext,\n  useContext,\n  useState,\n  useCallback,\n  useMemo,\n  type ReactNode,\n} from 'react'\nimport { createModal } from '../../core/modal'\nimport type { ModalConfig, Modal } from '../../types'\n\n/**\n * Modal instance wrapper for imperative API\n */\ninterface ManagedModal {\n  id: string\n  modal: Modal\n  content: ReactNode | ((props: { close: () => void }) => ReactNode)\n  config: ModalConfig\n}\n\n/**\n * Context value interface\n */\nexport interface ModalContextValue {\n  // Registry\n  modals: Map<string, ManagedModal>\n\n  // Imperative methods\n  openModal: (config: {\n    id?: string\n    content: ReactNode | ((props: { close: () => void }) => ReactNode)\n    title?: string\n    size?: 'sm' | 'md' | 'lg' | 'xl' | 'full'\n  } & Partial<ModalConfig>) => string\n\n  closeModal: (id: string) => void\n  closeAll: () => void\n\n  // Internal: force re-render\n  _forceUpdate: () => void\n}\n\n/**\n * Modal context\n */\nconst ModalContext = createContext<ModalContextValue | null>(null)\n\n/**\n * Hook to access modal context\n */\nexport function useModalContext(): ModalContextValue {\n  const context = useContext(ModalContext)\n  if (!context) {\n    throw new Error('useModalContext must be used within a ModalProvider')\n  }\n  return context\n}\n\n/**\n * Provider props\n */\nexport interface ModalProviderProps {\n  children: ReactNode\n}\n\n/**\n * Generate unique ID\n */\nlet idCounter = 0\nfunction generateModalId(): string {\n  idCounter++\n  return `managed-modal-${idCounter}`\n}\n\n/**\n * Modal provider component\n */\nexport function ModalProvider({ children }: ModalProviderProps): React.ReactElement {\n  const [modals] = useState(() => new Map<string, ManagedModal>())\n  const [, setUpdateCounter] = useState(0)\n\n  const forceUpdate = useCallback(() => {\n    setUpdateCounter((c) => c + 1)\n  }, [])\n\n  const openModal = useCallback(\n    (config: {\n      id?: string\n      content: ReactNode | ((props: { close: () => void }) => ReactNode)\n      title?: string\n      size?: 'sm' | 'md' | 'lg' | 'xl' | 'full'\n    } & Partial<ModalConfig>): string => {\n      const id = config.id ?? generateModalId()\n      const { content, title, size, ...modalConfig } = config\n\n      const modal = createModal({\n        ...modalConfig,\n        onClose: () => {\n          modalConfig.onClose?.()\n          modals.delete(id)\n          forceUpdate()\n        },\n      })\n\n      modals.set(id, {\n        id,\n        modal,\n        content,\n        config: modalConfig,\n      })\n\n      modal.open()\n      forceUpdate()\n\n      return id\n    },\n    [modals, forceUpdate]\n  )\n\n  const closeModal = useCallback(\n    (id: string) => {\n      const managed = modals.get(id)\n      if (managed) {\n        managed.modal.close()\n      }\n    },\n    [modals]\n  )\n\n  const closeAll = useCallback(() => {\n    modals.forEach((managed) => {\n      managed.modal.close()\n    })\n  }, [modals])\n\n  const value = useMemo(\n    (): ModalContextValue => ({\n      modals,\n      openModal,\n      closeModal,\n      closeAll,\n      _forceUpdate: forceUpdate,\n    }),\n    [modals, openModal, closeModal, closeAll, forceUpdate]\n  )\n\n  // Render managed modals\n  const managedModalElements: ReactNode[] = []\n  modals.forEach((managed) => {\n    const { id, modal, content } = managed\n    const state = modal.getState()\n\n    if (!state.mounted) return\n\n    const portalProps = modal.getPortalProps()\n    const overlayProps = modal.getOverlayProps()\n    const containerProps = modal.getContainerProps()\n    const contentProps = modal.getContentProps()\n\n    const renderedContent =\n      typeof content === 'function'\n        ? content({ close: () => modal.close() })\n        : content\n\n    managedModalElements.push(\n      <div\n        key={id}\n        data-modalkit-portal={portalProps['data-modalkit-portal']}\n        data-state={portalProps['data-state']}\n      >\n        <div\n          ref={overlayProps.ref}\n          data-modalkit-overlay=\"\"\n          data-state={overlayProps['data-state']}\n          style={{\n            ...overlayProps.style,\n            backgroundColor: 'rgba(0, 0, 0, 0.5)',\n          }}\n          onClick={overlayProps.onClick as unknown as React.MouseEventHandler}\n        >\n          <div\n            ref={containerProps.ref}\n            data-modalkit-container=\"\"\n            data-state={containerProps['data-state']}\n            style={containerProps.style}\n            onClick={containerProps.onClick as unknown as React.MouseEventHandler}\n          >\n            <div\n              ref={contentProps.ref}\n              role={contentProps.role}\n              aria-modal={contentProps['aria-modal']}\n              aria-labelledby={contentProps['aria-labelledby']}\n              aria-describedby={contentProps['aria-describedby']}\n              data-modalkit-content=\"\"\n              data-state={contentProps['data-state']}\n              tabIndex={contentProps.tabIndex}\n              onKeyDown={contentProps.onKeyDown as unknown as React.KeyboardEventHandler}\n              style={{\n                backgroundColor: 'white',\n                borderRadius: '8px',\n                padding: '24px',\n                maxWidth: '500px',\n                width: '100%',\n                boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25)',\n              }}\n            >\n              {renderedContent}\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  })\n\n  return (\n    <ModalContext.Provider value={value}>\n      {children}\n      {managedModalElements}\n    </ModalContext.Provider>\n  )\n}\n\nexport { ModalContext }\n","/**\n * useModal hook for React\n */\n\nimport { useState, useEffect, useRef, useMemo, useCallback } from 'react'\nimport { createModal } from '../../../core/modal'\nimport type {\n  Modal,\n  ModalConfig,\n  ModalState,\n  AnimationState,\n  TriggerProps,\n  OverlayProps,\n  ContainerProps,\n  ContentProps,\n  TitleProps,\n  DescriptionProps,\n  CloseButtonProps,\n} from '../../../types'\n\n/**\n * Return type for useModal hook\n */\nexport interface UseModalReturn {\n  // State\n  isOpen: boolean\n  animationState: AnimationState\n  stackOrder: number\n  isTopMost: boolean\n\n  // Actions\n  open: () => void\n  close: () => void\n  toggle: () => void\n\n  // Focus\n  focusFirst: () => void\n  focusLast: () => void\n\n  // Props getters\n  getTriggerProps: () => TriggerProps\n  getOverlayProps: () => OverlayProps\n  getContainerProps: () => ContainerProps\n  getContentProps: () => ContentProps\n  getTitleProps: (id?: string) => TitleProps\n  getDescriptionProps: (id?: string) => DescriptionProps\n  getCloseButtonProps: () => CloseButtonProps\n\n  // Modal instance (for advanced usage)\n  modal: Modal\n}\n\n/**\n * Hook to create and manage a modal\n */\nexport function useModal(config?: ModalConfig): UseModalReturn {\n  // Create modal instance once\n  const modalRef = useRef<Modal | null>(null)\n  const configRef = useRef(config)\n\n  if (!modalRef.current) {\n    modalRef.current = createModal(config)\n  }\n\n  // Track state\n  const [state, setState] = useState<ModalState>(() =>\n    modalRef.current!.getState()\n  )\n\n  // Update config when it changes\n  useEffect(() => {\n    if (configRef.current !== config && config) {\n      configRef.current = config\n      modalRef.current?.setConfig(config)\n    }\n  }, [config])\n\n  // Handle controlled mode\n  useEffect(() => {\n    if (config?.open !== undefined) {\n      if (config.open && !modalRef.current?.isOpen()) {\n        modalRef.current?.open()\n      } else if (!config.open && modalRef.current?.isOpen()) {\n        modalRef.current?.close()\n      }\n    }\n  }, [config?.open])\n\n  // Subscribe to state changes\n  useEffect(() => {\n    const modal = modalRef.current\n    if (!modal) return\n\n    return modal.subscribe((newState) => {\n      setState(newState)\n    })\n  }, [])\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      modalRef.current?.destroy()\n    }\n  }, [])\n\n  // Memoize methods\n  const open = useCallback(() => modalRef.current?.open(), [])\n  const close = useCallback(() => modalRef.current?.close(), [])\n  const toggle = useCallback(() => modalRef.current?.toggle(), [])\n  const focusFirst = useCallback(() => modalRef.current?.focusFirst(), [])\n  const focusLast = useCallback(() => modalRef.current?.focusLast(), [])\n\n  // Props getters\n  const getTriggerProps = useCallback(\n    () => modalRef.current!.getTriggerProps(),\n    []\n  )\n  const getOverlayProps = useCallback(\n    () => modalRef.current!.getOverlayProps(),\n    []\n  )\n  const getContainerProps = useCallback(\n    () => modalRef.current!.getContainerProps(),\n    []\n  )\n  const getContentProps = useCallback(\n    () => modalRef.current!.getContentProps(),\n    []\n  )\n  const getTitleProps = useCallback(\n    (id?: string) => modalRef.current!.getTitleProps(id),\n    []\n  )\n  const getDescriptionProps = useCallback(\n    (id?: string) => modalRef.current!.getDescriptionProps(id),\n    []\n  )\n  const getCloseButtonProps = useCallback(\n    () => modalRef.current!.getCloseButtonProps(),\n    []\n  )\n\n  return useMemo(\n    () => ({\n      isOpen: state.open,\n      animationState: state.animationState,\n      stackOrder: state.stackOrder,\n      isTopMost: state.isTopMost,\n      open,\n      close,\n      toggle,\n      focusFirst,\n      focusLast,\n      getTriggerProps,\n      getOverlayProps,\n      getContainerProps,\n      getContentProps,\n      getTitleProps,\n      getDescriptionProps,\n      getCloseButtonProps,\n      modal: modalRef.current!,\n    }),\n    [\n      state,\n      open,\n      close,\n      toggle,\n      focusFirst,\n      focusLast,\n      getTriggerProps,\n      getOverlayProps,\n      getContainerProps,\n      getContentProps,\n      getTitleProps,\n      getDescriptionProps,\n      getCloseButtonProps,\n    ]\n  )\n}\n","/**\n * Base utilities for dialog implementations\n */\n\nimport { createModal } from '../core/modal'\nimport type { ModalConfig } from '../types'\n\n/**\n * Dialog variant types\n */\nexport type DialogVariant =\n  | 'default'\n  | 'primary'\n  | 'danger'\n  | 'warning'\n  | 'success'\n  | 'error'\n  | 'info'\n\n/**\n * Create dialog container elements\n */\nexport function createDialogElements(modal: ReturnType<typeof createModal>): {\n  portal: HTMLDivElement\n  overlay: HTMLDivElement\n  container: HTMLDivElement\n  content: HTMLDivElement\n} {\n  const portal = document.createElement('div')\n  const portalProps = modal.getPortalProps()\n  portal.setAttribute('data-modalkit-portal', portalProps['data-modalkit-portal'])\n  portal.setAttribute('data-state', portalProps['data-state'])\n\n  const overlay = document.createElement('div')\n  const overlayProps = modal.getOverlayProps()\n  overlay.setAttribute('data-modalkit-overlay', '')\n  overlay.setAttribute('data-state', overlayProps['data-state'])\n  Object.assign(overlay.style, overlayProps.style)\n  overlay.style.backgroundColor = 'rgba(0, 0, 0, 0.5)'\n  overlayProps.ref(overlay)\n\n  const container = document.createElement('div')\n  const containerProps = modal.getContainerProps()\n  container.setAttribute('data-modalkit-container', '')\n  container.setAttribute('data-state', containerProps['data-state'])\n  Object.assign(container.style, containerProps.style)\n  containerProps.ref(container)\n\n  const content = document.createElement('div')\n  const contentProps = modal.getContentProps()\n  content.setAttribute('role', contentProps.role)\n  content.setAttribute('aria-modal', 'true')\n  if (contentProps['aria-labelledby']) {\n    content.setAttribute('aria-labelledby', contentProps['aria-labelledby'])\n  }\n  if (contentProps['aria-describedby']) {\n    content.setAttribute('aria-describedby', contentProps['aria-describedby'])\n  }\n  content.setAttribute('data-modalkit-content', '')\n  content.setAttribute('data-state', contentProps['data-state'])\n  content.setAttribute('tabindex', '-1')\n  content.style.backgroundColor = 'white'\n  content.style.borderRadius = '8px'\n  content.style.padding = '24px'\n  content.style.maxWidth = '400px'\n  content.style.width = '100%'\n  content.style.boxShadow = '0 25px 50px -12px rgba(0, 0, 0, 0.25)'\n  contentProps.ref(content)\n\n  // Add keyboard handler\n  content.addEventListener('keydown', (e) => {\n    contentProps.onKeyDown(e)\n  })\n\n  // Assemble\n  container.appendChild(content)\n  overlay.appendChild(container)\n  portal.appendChild(overlay)\n\n  return { portal, overlay, container, content }\n}\n\n/**\n * Create a dialog modal with common configuration\n */\nexport function createDialogModal(\n  customConfig?: Partial<ModalConfig>\n): ReturnType<typeof createModal> {\n  return createModal({\n    closeOnOverlayClick: false,\n    closeOnEscape: true,\n    trapFocus: true,\n    preventScroll: true,\n    role: 'alertdialog',\n    animated: false,\n    ...customConfig,\n  })\n}\n\n/**\n * Apply styles for a button\n */\nexport function styleButton(\n  button: HTMLButtonElement,\n  variant: DialogVariant = 'default'\n): void {\n  button.style.padding = '8px 16px'\n  button.style.borderRadius = '6px'\n  button.style.border = 'none'\n  button.style.cursor = 'pointer'\n  button.style.fontWeight = '500'\n  button.style.fontSize = '14px'\n  button.style.transition = 'background-color 0.2s'\n\n  switch (variant) {\n    case 'primary':\n      button.style.backgroundColor = '#3b82f6'\n      button.style.color = 'white'\n      break\n    case 'danger':\n    case 'error':\n      button.style.backgroundColor = '#ef4444'\n      button.style.color = 'white'\n      break\n    case 'warning':\n      button.style.backgroundColor = '#f59e0b'\n      button.style.color = 'white'\n      break\n    case 'success':\n      button.style.backgroundColor = '#10b981'\n      button.style.color = 'white'\n      break\n    case 'info':\n      button.style.backgroundColor = '#3b82f6'\n      button.style.color = 'white'\n      break\n    default:\n      button.style.backgroundColor = '#e5e7eb'\n      button.style.color = '#374151'\n  }\n}\n\n/**\n * Create dialog title element\n */\nexport function createTitleElement(\n  title: string,\n  modal: ReturnType<typeof createModal>\n): HTMLHeadingElement {\n  const titleProps = modal.getTitleProps()\n  const titleEl = document.createElement('h2')\n  titleEl.id = titleProps.id\n  titleEl.setAttribute('data-modalkit-title', '')\n  titleEl.textContent = title\n  titleEl.style.margin = '0 0 8px 0'\n  titleEl.style.fontSize = '18px'\n  titleEl.style.fontWeight = '600'\n  titleEl.style.color = '#111827'\n  return titleEl\n}\n\n/**\n * Create dialog message element\n */\nexport function createMessageElement(\n  message: string,\n  modal: ReturnType<typeof createModal>\n): HTMLParagraphElement {\n  const descProps = modal.getDescriptionProps()\n  const messageEl = document.createElement('p')\n  messageEl.id = descProps.id\n  messageEl.setAttribute('data-modalkit-description', '')\n  messageEl.textContent = message\n  messageEl.style.margin = '0 0 24px 0'\n  messageEl.style.fontSize = '14px'\n  messageEl.style.color = '#6b7280'\n  messageEl.style.lineHeight = '1.5'\n  return messageEl\n}\n\n/**\n * Create button container\n */\nexport function createButtonContainer(): HTMLDivElement {\n  const container = document.createElement('div')\n  container.style.display = 'flex'\n  container.style.justifyContent = 'flex-end'\n  container.style.gap = '8px'\n  return container\n}\n","/**\n * Confirm dialog implementation\n */\n\nimport type { ConfirmOptions, ConfirmOptionsAdvanced, ConfirmButton } from '../types'\nimport {\n  createDialogModal,\n  createDialogElements,\n  createTitleElement,\n  createMessageElement,\n  createButtonContainer,\n  styleButton,\n} from './base'\n\n/**\n * Default confirm options\n */\nconst DEFAULT_OPTIONS: Required<Omit<ConfirmOptions, 'title'>> = {\n  message: '',\n  confirmText: 'Confirm',\n  cancelText: 'Cancel',\n  variant: 'default',\n  closeOnOverlayClick: false,\n  closeOnEscape: true,\n}\n\n/**\n * Show a confirm dialog\n */\nexport function confirm(message: string): Promise<boolean>\nexport function confirm(options: ConfirmOptions): Promise<boolean>\nexport function confirm(options: ConfirmOptionsAdvanced): Promise<string | boolean>\nexport function confirm(\n  messageOrOptions: string | ConfirmOptions | ConfirmOptionsAdvanced\n): Promise<boolean | string> {\n  return new Promise((resolve) => {\n    // Normalize options\n    const options: ConfirmOptionsAdvanced =\n      typeof messageOrOptions === 'string'\n        ? { message: messageOrOptions }\n        : messageOrOptions\n\n    const {\n      title,\n      message,\n      confirmText = DEFAULT_OPTIONS.confirmText,\n      cancelText = DEFAULT_OPTIONS.cancelText,\n      variant = DEFAULT_OPTIONS.variant,\n      closeOnOverlayClick = DEFAULT_OPTIONS.closeOnOverlayClick,\n      closeOnEscape = DEFAULT_OPTIONS.closeOnEscape,\n      buttons,\n    } = options\n\n    // Track if resolved\n    let resolved = false\n\n    // Create modal\n    const modal = createDialogModal({\n      closeOnOverlayClick,\n      closeOnEscape,\n      onClose: () => {\n        if (!resolved) {\n          resolved = true\n          resolve(false)\n        }\n        cleanup()\n      },\n    })\n\n    // Create elements\n    const { portal, content } = createDialogElements(modal)\n\n    // Add title if provided\n    if (title) {\n      content.appendChild(createTitleElement(title, modal))\n    }\n\n    // Add message\n    content.appendChild(createMessageElement(message, modal))\n\n    // Create button container\n    const buttonContainer = createButtonContainer()\n\n    // Determine buttons to show\n    const buttonsToRender: ConfirmButton[] = buttons ?? [\n      { text: cancelText, value: false, variant: 'default' },\n      { text: confirmText, value: true, variant: variant === 'default' ? 'primary' : variant, autoFocus: true },\n    ]\n\n    // Create buttons\n    let autoFocusButton: HTMLButtonElement | null = null\n\n    buttonsToRender.forEach((btnConfig) => {\n      const button = document.createElement('button')\n      button.textContent = btnConfig.text\n      button.type = 'button'\n      styleButton(button, btnConfig.variant)\n\n      button.addEventListener('click', () => {\n        resolved = true\n        modal.close()\n        resolve(btnConfig.value)\n      })\n\n      if (btnConfig.autoFocus) {\n        autoFocusButton = button\n      }\n\n      buttonContainer.appendChild(button)\n    })\n\n    content.appendChild(buttonContainer)\n\n    // Cleanup function\n    function cleanup(): void {\n      modal.destroy()\n      portal.remove()\n    }\n\n    // Mount and open\n    document.body.appendChild(portal)\n    modal.open()\n\n    // Focus the auto-focus button\n    if (autoFocusButton) {\n      requestAnimationFrame(() => {\n        autoFocusButton?.focus()\n      })\n    }\n  })\n}\n","/**\n * useConfirm hook for React\n */\n\nimport { useCallback } from 'react'\nimport { confirm as confirmFn } from '../../../dialogs/confirm'\nimport type { ConfirmOptions, ConfirmOptionsAdvanced } from '../../../types'\n\n/**\n * Hook to show confirm dialogs\n */\nexport function useConfirm() {\n  return useCallback(\n    (\n      messageOrOptions: string | ConfirmOptions | ConfirmOptionsAdvanced\n    ): Promise<boolean | string> => {\n      if (typeof messageOrOptions === 'string') {\n        return confirmFn(messageOrOptions)\n      }\n      if ('buttons' in messageOrOptions && messageOrOptions.buttons) {\n        return confirmFn(messageOrOptions as ConfirmOptionsAdvanced)\n      }\n      return confirmFn(messageOrOptions as ConfirmOptions)\n    },\n    []\n  )\n}\n","/**\n * Alert dialog implementation\n */\n\nimport type { AlertOptions } from '../types'\nimport {\n  createDialogModal,\n  createDialogElements,\n  createTitleElement,\n  createMessageElement,\n  createButtonContainer,\n  styleButton,\n  type DialogVariant,\n} from './base'\n\n/**\n * Default alert options\n */\nconst DEFAULT_OPTIONS: Required<Omit<AlertOptions, 'title'>> = {\n  message: '',\n  confirmText: 'OK',\n  variant: 'default',\n}\n\n/**\n * Map alert variants to button variants\n */\nfunction getButtonVariant(alertVariant: AlertOptions['variant']): DialogVariant {\n  switch (alertVariant) {\n    case 'success':\n      return 'success'\n    case 'warning':\n      return 'warning'\n    case 'error':\n      return 'danger'\n    case 'info':\n      return 'info'\n    default:\n      return 'primary'\n  }\n}\n\n/**\n * Show an alert dialog\n */\nexport function alert(message: string): Promise<void>\nexport function alert(options: AlertOptions): Promise<void>\nexport function alert(messageOrOptions: string | AlertOptions): Promise<void> {\n  return new Promise((resolve) => {\n    // Normalize options\n    const options: AlertOptions =\n      typeof messageOrOptions === 'string'\n        ? { message: messageOrOptions }\n        : messageOrOptions\n\n    const {\n      title,\n      message,\n      confirmText = DEFAULT_OPTIONS.confirmText,\n      variant = DEFAULT_OPTIONS.variant,\n    } = options\n\n    // Create modal\n    const modal = createDialogModal({\n      closeOnOverlayClick: false,\n      closeOnEscape: true,\n      onClose: () => {\n        resolve()\n        cleanup()\n      },\n    })\n\n    // Create elements\n    const { portal, content } = createDialogElements(modal)\n\n    // Add title if provided\n    if (title) {\n      content.appendChild(createTitleElement(title, modal))\n    }\n\n    // Add message\n    content.appendChild(createMessageElement(message, modal))\n\n    // Create button container\n    const buttonContainer = createButtonContainer()\n\n    // Create confirm button\n    const confirmButton = document.createElement('button')\n    confirmButton.textContent = confirmText\n    confirmButton.type = 'button'\n    styleButton(confirmButton, getButtonVariant(variant))\n\n    confirmButton.addEventListener('click', () => {\n      modal.close()\n    })\n\n    buttonContainer.appendChild(confirmButton)\n    content.appendChild(buttonContainer)\n\n    // Cleanup function\n    function cleanup(): void {\n      modal.destroy()\n      portal.remove()\n    }\n\n    // Mount and open\n    document.body.appendChild(portal)\n    modal.open()\n\n    // Focus the confirm button\n    requestAnimationFrame(() => {\n      confirmButton.focus()\n    })\n  })\n}\n","/**\n * useAlert hook for React\n */\n\nimport { useCallback } from 'react'\nimport { alert as alertFn } from '../../../dialogs/alert'\nimport type { AlertOptions } from '../../../types'\n\n/**\n * Hook to show alert dialogs\n */\nexport function useAlert() {\n  return useCallback(\n    (messageOrOptions: string | AlertOptions): Promise<void> => {\n      if (typeof messageOrOptions === 'string') {\n        return alertFn(messageOrOptions)\n      }\n      return alertFn(messageOrOptions)\n    },\n    []\n  )\n}\n","/**\n * Prompt dialog implementation\n */\n\nimport type { PromptOptions } from '../types'\nimport {\n  createDialogModal,\n  createDialogElements,\n  createTitleElement,\n  createMessageElement,\n  createButtonContainer,\n  styleButton,\n} from './base'\n\n/**\n * Default prompt options\n */\nconst DEFAULT_OPTIONS: Required<\n  Omit<PromptOptions, 'title' | 'message' | 'validate'>\n> = {\n  placeholder: '',\n  defaultValue: '',\n  confirmText: 'OK',\n  cancelText: 'Cancel',\n  type: 'text',\n  required: false,\n  minLength: 0,\n  maxLength: Infinity,\n}\n\n/**\n * Show a prompt dialog\n */\nexport function prompt(message: string): Promise<string | null>\nexport function prompt(options: PromptOptions): Promise<string | null>\nexport function prompt(\n  messageOrOptions: string | PromptOptions\n): Promise<string | null> {\n  return new Promise((resolve) => {\n    // Normalize options\n    const options: PromptOptions =\n      typeof messageOrOptions === 'string'\n        ? { message: messageOrOptions }\n        : messageOrOptions\n\n    const {\n      title,\n      message,\n      placeholder = DEFAULT_OPTIONS.placeholder,\n      defaultValue = DEFAULT_OPTIONS.defaultValue,\n      confirmText = DEFAULT_OPTIONS.confirmText,\n      cancelText = DEFAULT_OPTIONS.cancelText,\n      type = DEFAULT_OPTIONS.type,\n      validate,\n      required = DEFAULT_OPTIONS.required,\n      minLength = DEFAULT_OPTIONS.minLength,\n      maxLength = DEFAULT_OPTIONS.maxLength,\n    } = options\n\n    // Track if resolved\n    let resolved = false\n\n    // Create modal\n    const modal = createDialogModal({\n      closeOnOverlayClick: false,\n      closeOnEscape: true,\n      onClose: () => {\n        if (!resolved) {\n          resolved = true\n          resolve(null)\n        }\n        cleanup()\n      },\n    })\n\n    // Create elements\n    const { portal, content } = createDialogElements(modal)\n\n    // Add title if provided\n    if (title) {\n      content.appendChild(createTitleElement(title, modal))\n    }\n\n    // Add message if provided\n    if (message) {\n      content.appendChild(createMessageElement(message, modal))\n    }\n\n    // Create input container\n    const inputContainer = document.createElement('div')\n    inputContainer.style.marginBottom = '16px'\n\n    // Create input\n    const input = document.createElement('input')\n    input.type = type\n    input.value = defaultValue\n    if (placeholder) input.placeholder = placeholder\n    if (required) input.required = true\n    if (minLength > 0) input.minLength = minLength\n    if (maxLength < Infinity) input.maxLength = maxLength\n\n    input.style.width = '100%'\n    input.style.padding = '8px 12px'\n    input.style.border = '1px solid #d1d5db'\n    input.style.borderRadius = '6px'\n    input.style.fontSize = '14px'\n    input.style.outline = 'none'\n    input.style.boxSizing = 'border-box'\n\n    input.addEventListener('focus', () => {\n      input.style.borderColor = '#3b82f6'\n      input.style.boxShadow = '0 0 0 3px rgba(59, 130, 246, 0.1)'\n    })\n\n    input.addEventListener('blur', () => {\n      input.style.borderColor = '#d1d5db'\n      input.style.boxShadow = 'none'\n    })\n\n    // Create error message element\n    const errorEl = document.createElement('p')\n    errorEl.style.color = '#ef4444'\n    errorEl.style.fontSize = '12px'\n    errorEl.style.marginTop = '4px'\n    errorEl.style.marginBottom = '0'\n    errorEl.style.display = 'none'\n\n    inputContainer.appendChild(input)\n    inputContainer.appendChild(errorEl)\n    content.appendChild(inputContainer)\n\n    // Validation function\n    function validateInput(): boolean | string {\n      const value = input.value\n\n      // Required check\n      if (required && !value.trim()) {\n        return 'This field is required'\n      }\n\n      // Min length check\n      if (minLength > 0 && value.length < minLength) {\n        return `Minimum ${minLength} characters required`\n      }\n\n      // Max length check\n      if (maxLength < Infinity && value.length > maxLength) {\n        return `Maximum ${maxLength} characters allowed`\n      }\n\n      // Custom validation\n      if (validate) {\n        return validate(value)\n      }\n\n      return true\n    }\n\n    function showError(message: string): void {\n      errorEl.textContent = message\n      errorEl.style.display = 'block'\n      input.style.borderColor = '#ef4444'\n    }\n\n    function clearError(): void {\n      errorEl.style.display = 'none'\n      input.style.borderColor = '#d1d5db'\n    }\n\n    function handleSubmit(): void {\n      clearError()\n      const validationResult = validateInput()\n\n      if (validationResult !== true) {\n        const errorMessage =\n          typeof validationResult === 'string'\n            ? validationResult\n            : 'Invalid input'\n        showError(errorMessage)\n        input.focus()\n        return\n      }\n\n      resolved = true\n      modal.close()\n      resolve(input.value)\n    }\n\n    // Handle Enter key\n    input.addEventListener('keydown', (e) => {\n      if (e.key === 'Enter') {\n        e.preventDefault()\n        handleSubmit()\n      }\n    })\n\n    // Clear error on input\n    input.addEventListener('input', clearError)\n\n    // Create button container\n    const buttonContainer = createButtonContainer()\n\n    // Cancel button\n    const cancelButton = document.createElement('button')\n    cancelButton.textContent = cancelText\n    cancelButton.type = 'button'\n    styleButton(cancelButton, 'default')\n\n    cancelButton.addEventListener('click', () => {\n      resolved = true\n      modal.close()\n      resolve(null)\n    })\n\n    // Confirm button\n    const confirmButton = document.createElement('button')\n    confirmButton.textContent = confirmText\n    confirmButton.type = 'button'\n    styleButton(confirmButton, 'primary')\n\n    confirmButton.addEventListener('click', handleSubmit)\n\n    buttonContainer.appendChild(cancelButton)\n    buttonContainer.appendChild(confirmButton)\n    content.appendChild(buttonContainer)\n\n    // Cleanup function\n    function cleanup(): void {\n      modal.destroy()\n      portal.remove()\n    }\n\n    // Mount and open\n    document.body.appendChild(portal)\n    modal.open()\n\n    // Focus the input\n    requestAnimationFrame(() => {\n      input.focus()\n      // Select default value\n      if (defaultValue) {\n        input.select()\n      }\n    })\n  })\n}\n","/**\n * usePrompt hook for React\n */\n\nimport { useCallback } from 'react'\nimport { prompt as promptFn } from '../../../dialogs/prompt'\nimport type { PromptOptions } from '../../../types'\n\n/**\n * Hook to show prompt dialogs\n */\nexport function usePrompt() {\n  return useCallback(\n    (messageOrOptions: string | PromptOptions): Promise<string | null> => {\n      if (typeof messageOrOptions === 'string') {\n        return promptFn(messageOrOptions)\n      }\n      return promptFn(messageOrOptions)\n    },\n    []\n  )\n}\n","/**\n * Modal compound component for React\n */\n\nimport React, {\n  createContext,\n  useContext,\n  useState,\n  useEffect,\n  useRef,\n  useMemo,\n  type ReactNode,\n} from 'react'\nimport { createModal } from '../../../core/modal'\nimport type { Modal as ModalType, ModalConfig, ModalState } from '../../../types'\n\n/**\n * Modal context value\n */\ninterface ModalContextValue {\n  modal: ModalType\n  state: ModalState\n}\n\n/**\n * Modal context\n */\nconst ModalComponentContext = createContext<ModalContextValue | null>(null)\n\n/**\n * Hook to access modal context within compound components\n */\nexport function useModalComponentContext(): ModalContextValue {\n  const context = useContext(ModalComponentContext)\n  if (!context) {\n    throw new Error('Modal compound components must be used within a Modal component')\n  }\n  return context\n}\n\n/**\n * Modal component props\n */\nexport interface ModalProps extends Omit<ModalConfig, 'open' | 'defaultOpen'> {\n  /** Whether the modal is open (controlled) */\n  open?: boolean\n  /** Initial open state (uncontrolled) */\n  defaultOpen?: boolean\n  /** Callback when open state changes */\n  onOpenChange?: (open: boolean) => void\n  /** Children */\n  children: ReactNode\n}\n\n/**\n * Modal root component\n */\nexport function Modal({\n  open,\n  defaultOpen = false,\n  onOpenChange,\n  children,\n  ...config\n}: ModalProps): React.ReactElement {\n  // Create modal instance\n  const modalRef = useRef<ModalType | null>(null)\n\n  if (!modalRef.current) {\n    modalRef.current = createModal({\n      ...config,\n      defaultOpen: open ?? defaultOpen,\n      onOpenChange,\n    })\n  }\n\n  // Track state\n  const [state, setState] = useState<ModalState>(() =>\n    modalRef.current!.getState()\n  )\n\n  // Handle controlled mode\n  useEffect(() => {\n    const modal = modalRef.current\n    if (!modal) return\n\n    if (open !== undefined) {\n      if (open && !modal.isOpen()) {\n        modal.open()\n      } else if (!open && modal.isOpen()) {\n        modal.close()\n      }\n    }\n  }, [open])\n\n  // Subscribe to state changes\n  useEffect(() => {\n    const modal = modalRef.current\n    if (!modal) return\n\n    return modal.subscribe((newState) => {\n      setState(newState)\n    })\n  }, [])\n\n  // Update config\n  useEffect(() => {\n    modalRef.current?.setConfig({\n      ...config,\n      onOpenChange,\n    })\n  }, [config, onOpenChange])\n\n  // Cleanup\n  useEffect(() => {\n    return () => {\n      modalRef.current?.destroy()\n    }\n  }, [])\n\n  const value = useMemo(\n    () => ({\n      modal: modalRef.current!,\n      state,\n    }),\n    [state]\n  )\n\n  return (\n    <ModalComponentContext.Provider value={value}>\n      {children}\n    </ModalComponentContext.Provider>\n  )\n}\n\nexport { ModalComponentContext }\n","/**\n * ModalTrigger component\n */\n\nimport React, { type ReactElement, cloneElement, isValidElement } from 'react'\nimport { useModalComponentContext } from './Modal'\n\n/**\n * ModalTrigger props\n */\nexport interface ModalTriggerProps {\n  /** Render as child element instead of button */\n  asChild?: boolean\n  /** Children */\n  children: React.ReactNode\n  /** Additional class name */\n  className?: string\n}\n\n/**\n * Modal trigger button component\n */\nexport function ModalTrigger({\n  asChild = false,\n  children,\n  className,\n}: ModalTriggerProps): ReactElement {\n  const { modal } = useModalComponentContext()\n  const triggerProps = modal.getTriggerProps()\n\n  const handleClick = (e: React.MouseEvent) => {\n    triggerProps.onClick(e as unknown as MouseEvent)\n  }\n\n  if (asChild && isValidElement(children)) {\n    return cloneElement(children as ReactElement<Record<string, unknown>>, {\n      ...triggerProps,\n      onClick: handleClick,\n      className: className\n        ? `${(children.props as Record<string, unknown>).className || ''} ${className}`.trim()\n        : (children.props as Record<string, unknown>).className,\n    })\n  }\n\n  return (\n    <button\n      type={triggerProps.type}\n      aria-haspopup={triggerProps['aria-haspopup']}\n      aria-expanded={triggerProps['aria-expanded']}\n      data-modalkit-trigger=\"\"\n      onClick={handleClick}\n      className={className}\n    >\n      {children}\n    </button>\n  )\n}\n","/**\n * ModalPortal component\n */\n\nimport { type ReactNode, type ReactElement } from 'react'\nimport { createPortal } from 'react-dom'\nimport { useModalComponentContext } from './Modal'\n\n/**\n * ModalPortal props\n */\nexport interface ModalPortalProps {\n  /** Container element for portal */\n  container?: HTMLElement\n  /** Children */\n  children: ReactNode\n}\n\n/**\n * Modal portal component - renders children in a portal\n */\nexport function ModalPortal({\n  container,\n  children,\n}: ModalPortalProps): ReactElement | null {\n  const { modal, state } = useModalComponentContext()\n\n  // Don't render if not mounted\n  if (!state.mounted) {\n    return null\n  }\n\n  const portalTarget = container ?? modal.getPortalTarget()\n  const portalProps = modal.getPortalProps()\n\n  const content = (\n    <div\n      data-modalkit-portal={portalProps['data-modalkit-portal']}\n      data-state={portalProps['data-state']}\n    >\n      {children}\n    </div>\n  )\n\n  return createPortal(content, portalTarget)\n}\n","/**\n * ModalOverlay component\n */\n\nimport React, {\n  type ReactNode,\n  type ReactElement,\n  type CSSProperties,\n  forwardRef,\n} from 'react'\nimport { useModalComponentContext } from './Modal'\n\n/**\n * ModalOverlay props\n */\nexport interface ModalOverlayProps {\n  /** Children */\n  children?: ReactNode\n  /** Additional class name */\n  className?: string\n  /** Additional styles */\n  style?: CSSProperties\n}\n\n/**\n * Modal overlay/backdrop component\n */\nexport const ModalOverlay = forwardRef<HTMLDivElement, ModalOverlayProps>(\n  function ModalOverlay({ children, className, style }, forwardedRef): ReactElement {\n    const { modal } = useModalComponentContext()\n    const overlayProps = modal.getOverlayProps()\n\n    const handleClick = (e: React.MouseEvent<HTMLDivElement>) => {\n      overlayProps.onClick(e as unknown as MouseEvent)\n    }\n\n    return (\n      <div\n        ref={(el) => {\n          overlayProps.ref(el)\n          if (typeof forwardedRef === 'function') {\n            forwardedRef(el)\n          } else if (forwardedRef) {\n            forwardedRef.current = el\n          }\n        }}\n        data-modalkit-overlay=\"\"\n        data-state={overlayProps['data-state']}\n        onClick={handleClick}\n        className={className}\n        style={{\n          ...overlayProps.style,\n          backgroundColor: 'rgba(0, 0, 0, 0.5)',\n          ...style,\n        }}\n      >\n        {children}\n      </div>\n    )\n  }\n)\n","/**\n * ModalContainer component\n */\n\nimport React, {\n  type ReactNode,\n  type ReactElement,\n  type CSSProperties,\n  forwardRef,\n} from 'react'\nimport { useModalComponentContext } from './Modal'\n\n/**\n * Position options\n */\nexport type ModalPosition = 'center' | 'top'\n\n/**\n * ModalContainer props\n */\nexport interface ModalContainerProps {\n  /** Position of modal content */\n  position?: ModalPosition\n  /** Children */\n  children: ReactNode\n  /** Additional class name */\n  className?: string\n  /** Additional styles */\n  style?: CSSProperties\n}\n\n/**\n * Modal container component - handles positioning\n */\nexport const ModalContainer = forwardRef<HTMLDivElement, ModalContainerProps>(\n  function ModalContainer(\n    { position = 'center', children, className, style },\n    forwardedRef\n  ): ReactElement {\n    const { modal } = useModalComponentContext()\n    const containerProps = modal.getContainerProps()\n\n    const handleClick = (e: React.MouseEvent<HTMLDivElement>) => {\n      containerProps.onClick(e as unknown as MouseEvent)\n    }\n\n    // Adjust alignment based on position\n    const alignItems = position === 'top' ? 'flex-start' : 'center'\n    const paddingTop = position === 'top' ? '10vh' : undefined\n\n    return (\n      <div\n        ref={(el) => {\n          containerProps.ref(el)\n          if (typeof forwardedRef === 'function') {\n            forwardedRef(el)\n          } else if (forwardedRef) {\n            forwardedRef.current = el\n          }\n        }}\n        data-modalkit-container=\"\"\n        data-state={containerProps['data-state']}\n        onClick={handleClick}\n        className={className}\n        style={{\n          ...containerProps.style,\n          alignItems,\n          paddingTop,\n          ...style,\n        }}\n      >\n        {children}\n      </div>\n    )\n  }\n)\n","/**\n * ModalContent component\n */\n\nimport React, {\n  type ReactNode,\n  type ReactElement,\n  type CSSProperties,\n  forwardRef,\n} from 'react'\nimport { useModalComponentContext } from './Modal'\n\n/**\n * Size options\n */\nexport type ModalSize = 'sm' | 'md' | 'lg' | 'xl' | 'full'\n\n/**\n * Size to max-width mapping\n */\nconst SIZE_MAP: Record<ModalSize, string> = {\n  sm: '400px',\n  md: '500px',\n  lg: '600px',\n  xl: '800px',\n  full: '100%',\n}\n\n/**\n * ModalContent props\n */\nexport interface ModalContentProps {\n  /** Size of the modal */\n  size?: ModalSize\n  /** ARIA role override */\n  role?: 'dialog' | 'alertdialog'\n  /** Custom aria-label */\n  'aria-label'?: string\n  /** Children */\n  children: ReactNode\n  /** Additional class name */\n  className?: string\n  /** Additional styles */\n  style?: CSSProperties\n}\n\n/**\n * Modal content component - the actual modal box\n */\nexport const ModalContent = forwardRef<HTMLDivElement, ModalContentProps>(\n  function ModalContent(\n    { size = 'md', role, 'aria-label': ariaLabel, children, className, style },\n    forwardedRef\n  ): ReactElement {\n    const { modal } = useModalComponentContext()\n    const contentProps = modal.getContentProps()\n\n    const handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n      contentProps.onKeyDown(e as unknown as KeyboardEvent)\n    }\n\n    return (\n      <div\n        ref={(el) => {\n          contentProps.ref(el)\n          if (typeof forwardedRef === 'function') {\n            forwardedRef(el)\n          } else if (forwardedRef) {\n            forwardedRef.current = el\n          }\n        }}\n        role={role ?? contentProps.role}\n        aria-modal={contentProps['aria-modal']}\n        aria-label={ariaLabel ?? contentProps['aria-label']}\n        aria-labelledby={ariaLabel ? undefined : contentProps['aria-labelledby']}\n        aria-describedby={contentProps['aria-describedby']}\n        data-modalkit-content=\"\"\n        data-state={contentProps['data-state']}\n        tabIndex={contentProps.tabIndex}\n        onKeyDown={handleKeyDown}\n        className={className}\n        style={{\n          backgroundColor: 'white',\n          borderRadius: '8px',\n          maxWidth: SIZE_MAP[size],\n          width: size === 'full' ? '100vw' : '100%',\n          height: size === 'full' ? '100vh' : 'auto',\n          maxHeight: size === 'full' ? '100vh' : '90vh',\n          overflow: 'auto',\n          boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25)',\n          ...style,\n        }}\n        onClick={(e) => e.stopPropagation()}\n      >\n        {children}\n      </div>\n    )\n  }\n)\n","/**\n * ModalHeader component\n */\n\nimport { type ReactNode, type ReactElement, type CSSProperties } from 'react'\n\n/**\n * ModalHeader props\n */\nexport interface ModalHeaderProps {\n  /** Children */\n  children: ReactNode\n  /** Additional class name */\n  className?: string\n  /** Additional styles */\n  style?: CSSProperties\n}\n\n/**\n * Modal header component - contains title and close button\n */\nexport function ModalHeader({\n  children,\n  className,\n  style,\n}: ModalHeaderProps): ReactElement {\n  return (\n    <div\n      className={className}\n      style={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        padding: '16px 24px',\n        borderBottom: '1px solid #e5e7eb',\n        ...style,\n      }}\n    >\n      {children}\n    </div>\n  )\n}\n","/**\n * ModalTitle component\n */\n\nimport { type ReactNode, type ReactElement, type CSSProperties } from 'react'\nimport { useModalComponentContext } from './Modal'\n\n/**\n * ModalTitle props\n */\nexport interface ModalTitleProps {\n  /** Custom ID */\n  id?: string\n  /** Children */\n  children: ReactNode\n  /** Additional class name */\n  className?: string\n  /** Additional styles */\n  style?: CSSProperties\n}\n\n/**\n * Modal title component\n */\nexport function ModalTitle({\n  id,\n  children,\n  className,\n  style,\n}: ModalTitleProps): ReactElement {\n  const { modal } = useModalComponentContext()\n  const titleProps = modal.getTitleProps(id)\n\n  return (\n    <h2\n      id={titleProps.id}\n      data-modalkit-title=\"\"\n      className={className}\n      style={{\n        margin: 0,\n        fontSize: '18px',\n        fontWeight: 600,\n        color: '#111827',\n        ...style,\n      }}\n    >\n      {children}\n    </h2>\n  )\n}\n","/**\n * ModalDescription component\n */\n\nimport { type ReactNode, type ReactElement, type CSSProperties } from 'react'\nimport { useModalComponentContext } from './Modal'\n\n/**\n * ModalDescription props\n */\nexport interface ModalDescriptionProps {\n  /** Custom ID */\n  id?: string\n  /** Children */\n  children: ReactNode\n  /** Additional class name */\n  className?: string\n  /** Additional styles */\n  style?: CSSProperties\n}\n\n/**\n * Modal description component\n */\nexport function ModalDescription({\n  id,\n  children,\n  className,\n  style,\n}: ModalDescriptionProps): ReactElement {\n  const { modal } = useModalComponentContext()\n  const descProps = modal.getDescriptionProps(id)\n\n  return (\n    <p\n      id={descProps.id}\n      data-modalkit-description=\"\"\n      className={className}\n      style={{\n        margin: 0,\n        fontSize: '14px',\n        color: '#6b7280',\n        lineHeight: 1.5,\n        ...style,\n      }}\n    >\n      {children}\n    </p>\n  )\n}\n","/**\n * ModalBody component\n */\n\nimport { type ReactNode, type ReactElement, type CSSProperties } from 'react'\n\n/**\n * ModalBody props\n */\nexport interface ModalBodyProps {\n  /** Children */\n  children: ReactNode\n  /** Additional class name */\n  className?: string\n  /** Additional styles */\n  style?: CSSProperties\n}\n\n/**\n * Modal body component - main content area\n */\nexport function ModalBody({\n  children,\n  className,\n  style,\n}: ModalBodyProps): ReactElement {\n  return (\n    <div\n      className={className}\n      style={{\n        padding: '24px',\n        ...style,\n      }}\n    >\n      {children}\n    </div>\n  )\n}\n","/**\n * ModalFooter component\n */\n\nimport { type ReactNode, type ReactElement, type CSSProperties } from 'react'\n\n/**\n * ModalFooter props\n */\nexport interface ModalFooterProps {\n  /** Children */\n  children: ReactNode\n  /** Additional class name */\n  className?: string\n  /** Additional styles */\n  style?: CSSProperties\n}\n\n/**\n * Modal footer component - contains action buttons\n */\nexport function ModalFooter({\n  children,\n  className,\n  style,\n}: ModalFooterProps): ReactElement {\n  return (\n    <div\n      className={className}\n      style={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'flex-end',\n        gap: '8px',\n        padding: '16px 24px',\n        borderTop: '1px solid #e5e7eb',\n        ...style,\n      }}\n    >\n      {children}\n    </div>\n  )\n}\n","/**\n * ModalClose component\n */\n\nimport React, {\n  type ReactElement,\n  type CSSProperties,\n  cloneElement,\n  isValidElement,\n} from 'react'\nimport { useModalComponentContext } from './Modal'\n\n/**\n * ModalClose props\n */\nexport interface ModalCloseProps {\n  /** Render as child element instead of button */\n  asChild?: boolean\n  /** Custom aria-label */\n  'aria-label'?: string\n  /** Children */\n  children?: React.ReactNode\n  /** Additional class name */\n  className?: string\n  /** Additional styles */\n  style?: CSSProperties\n}\n\n/**\n * Modal close button component\n */\nexport function ModalClose({\n  asChild = false,\n  'aria-label': ariaLabel,\n  children,\n  className,\n  style,\n}: ModalCloseProps): ReactElement {\n  const { modal } = useModalComponentContext()\n  const closeProps = modal.getCloseButtonProps()\n\n  const handleClick = (e: React.MouseEvent) => {\n    closeProps.onClick(e as unknown as MouseEvent)\n  }\n\n  if (asChild && isValidElement(children)) {\n    return cloneElement(children as ReactElement<Record<string, unknown>>, {\n      ...closeProps,\n      'aria-label': ariaLabel ?? closeProps['aria-label'],\n      onClick: handleClick,\n      className: className\n        ? `${(children.props as Record<string, unknown>).className || ''} ${className}`.trim()\n        : (children.props as Record<string, unknown>).className,\n    })\n  }\n\n  return (\n    <button\n      type={closeProps.type}\n      aria-label={ariaLabel ?? closeProps['aria-label']}\n      data-modalkit-close=\"\"\n      onClick={handleClick}\n      className={className}\n      style={{\n        background: 'none',\n        border: 'none',\n        padding: '4px',\n        cursor: 'pointer',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        color: '#6b7280',\n        borderRadius: '4px',\n        ...style,\n      }}\n    >\n      {children ?? (\n        <svg\n          width=\"20\"\n          height=\"20\"\n          viewBox=\"0 0 20 20\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            d=\"M15 5L5 15M5 5L15 15\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n          />\n        </svg>\n      )}\n    </button>\n  )\n}\n","/**\n * ConfirmDialog component\n */\n\nimport { type ReactElement, type CSSProperties } from 'react'\nimport { Modal } from './Modal'\nimport { ModalPortal } from './ModalPortal'\nimport { ModalOverlay } from './ModalOverlay'\nimport { ModalContainer } from './ModalContainer'\nimport { ModalContent } from './ModalContent'\nimport { ModalHeader } from './ModalHeader'\nimport { ModalTitle } from './ModalTitle'\nimport { ModalBody } from './ModalBody'\nimport { ModalDescription } from './ModalDescription'\nimport { ModalFooter } from './ModalFooter'\n\n/**\n * Variant types\n */\nexport type ConfirmDialogVariant = 'default' | 'danger' | 'warning'\n\n/**\n * ConfirmDialog props\n */\nexport interface ConfirmDialogProps {\n  /** Whether the dialog is open */\n  open: boolean\n  /** Callback when open state changes */\n  onOpenChange: (open: boolean) => void\n  /** Dialog title */\n  title?: string\n  /** Dialog description/message */\n  description: string\n  /** Confirm button text */\n  confirmText?: string\n  /** Cancel button text */\n  cancelText?: string\n  /** Visual variant */\n  variant?: ConfirmDialogVariant\n  /** Called when confirm is clicked */\n  onConfirm: () => void\n  /** Called when cancel is clicked */\n  onCancel?: () => void\n  /** Additional class name for content */\n  className?: string\n  /** Additional styles for content */\n  style?: CSSProperties\n}\n\n/**\n * Variant to button style mapping\n */\nconst VARIANT_STYLES: Record<ConfirmDialogVariant, CSSProperties> = {\n  default: {\n    backgroundColor: '#3b82f6',\n    color: 'white',\n  },\n  danger: {\n    backgroundColor: '#ef4444',\n    color: 'white',\n  },\n  warning: {\n    backgroundColor: '#f59e0b',\n    color: 'white',\n  },\n}\n\n/**\n * Pre-built confirm dialog component\n */\nexport function ConfirmDialog({\n  open,\n  onOpenChange,\n  title,\n  description,\n  confirmText = 'Confirm',\n  cancelText = 'Cancel',\n  variant = 'default',\n  onConfirm,\n  onCancel,\n  className,\n  style,\n}: ConfirmDialogProps): ReactElement {\n  const handleConfirm = () => {\n    onConfirm()\n    onOpenChange(false)\n  }\n\n  const handleCancel = () => {\n    onCancel?.()\n    onOpenChange(false)\n  }\n\n  return (\n    <Modal\n      open={open}\n      onOpenChange={onOpenChange}\n      closeOnOverlayClick={false}\n      closeOnEscape={true}\n      role=\"alertdialog\"\n    >\n      <ModalPortal>\n        <ModalOverlay>\n          <ModalContainer>\n            <ModalContent size=\"sm\" className={className} style={style}>\n              {title && (\n                <ModalHeader style={{ borderBottom: 'none', paddingBottom: 0 }}>\n                  <ModalTitle>{title}</ModalTitle>\n                </ModalHeader>\n              )}\n              <ModalBody style={{ paddingTop: title ? '8px' : undefined }}>\n                <ModalDescription>{description}</ModalDescription>\n              </ModalBody>\n              <ModalFooter style={{ borderTop: 'none' }}>\n                <button\n                  type=\"button\"\n                  onClick={handleCancel}\n                  style={{\n                    padding: '8px 16px',\n                    borderRadius: '6px',\n                    border: 'none',\n                    cursor: 'pointer',\n                    fontWeight: 500,\n                    fontSize: '14px',\n                    backgroundColor: '#e5e7eb',\n                    color: '#374151',\n                  }}\n                >\n                  {cancelText}\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleConfirm}\n                  style={{\n                    padding: '8px 16px',\n                    borderRadius: '6px',\n                    border: 'none',\n                    cursor: 'pointer',\n                    fontWeight: 500,\n                    fontSize: '14px',\n                    ...VARIANT_STYLES[variant],\n                  }}\n                >\n                  {confirmText}\n                </button>\n              </ModalFooter>\n            </ModalContent>\n          </ModalContainer>\n        </ModalOverlay>\n      </ModalPortal>\n    </Modal>\n  )\n}\n","/**\n * AlertDialog component\n */\n\nimport { type ReactElement, type CSSProperties } from 'react'\nimport { Modal } from './Modal'\nimport { ModalPortal } from './ModalPortal'\nimport { ModalOverlay } from './ModalOverlay'\nimport { ModalContainer } from './ModalContainer'\nimport { ModalContent } from './ModalContent'\nimport { ModalHeader } from './ModalHeader'\nimport { ModalTitle } from './ModalTitle'\nimport { ModalBody } from './ModalBody'\nimport { ModalDescription } from './ModalDescription'\nimport { ModalFooter } from './ModalFooter'\n\n/**\n * Variant types\n */\nexport type AlertDialogVariant = 'default' | 'success' | 'warning' | 'error' | 'info'\n\n/**\n * AlertDialog props\n */\nexport interface AlertDialogProps {\n  /** Whether the dialog is open */\n  open: boolean\n  /** Callback when open state changes */\n  onOpenChange: (open: boolean) => void\n  /** Dialog title */\n  title?: string\n  /** Dialog description/message */\n  description: string\n  /** Confirm button text */\n  confirmText?: string\n  /** Visual variant */\n  variant?: AlertDialogVariant\n  /** Called when confirm is clicked */\n  onConfirm: () => void\n  /** Additional class name for content */\n  className?: string\n  /** Additional styles for content */\n  style?: CSSProperties\n}\n\n/**\n * Variant to button style mapping\n */\nconst VARIANT_STYLES: Record<AlertDialogVariant, CSSProperties> = {\n  default: {\n    backgroundColor: '#3b82f6',\n    color: 'white',\n  },\n  success: {\n    backgroundColor: '#10b981',\n    color: 'white',\n  },\n  warning: {\n    backgroundColor: '#f59e0b',\n    color: 'white',\n  },\n  error: {\n    backgroundColor: '#ef4444',\n    color: 'white',\n  },\n  info: {\n    backgroundColor: '#3b82f6',\n    color: 'white',\n  },\n}\n\n/**\n * Pre-built alert dialog component\n */\nexport function AlertDialog({\n  open,\n  onOpenChange,\n  title,\n  description,\n  confirmText = 'OK',\n  variant = 'default',\n  onConfirm,\n  className,\n  style,\n}: AlertDialogProps): ReactElement {\n  const handleConfirm = () => {\n    onConfirm()\n    onOpenChange(false)\n  }\n\n  return (\n    <Modal\n      open={open}\n      onOpenChange={onOpenChange}\n      closeOnOverlayClick={false}\n      closeOnEscape={true}\n      role=\"alertdialog\"\n    >\n      <ModalPortal>\n        <ModalOverlay>\n          <ModalContainer>\n            <ModalContent size=\"sm\" className={className} style={style}>\n              {title && (\n                <ModalHeader style={{ borderBottom: 'none', paddingBottom: 0 }}>\n                  <ModalTitle>{title}</ModalTitle>\n                </ModalHeader>\n              )}\n              <ModalBody style={{ paddingTop: title ? '8px' : undefined }}>\n                <ModalDescription>{description}</ModalDescription>\n              </ModalBody>\n              <ModalFooter style={{ borderTop: 'none' }}>\n                <button\n                  type=\"button\"\n                  onClick={handleConfirm}\n                  style={{\n                    padding: '8px 16px',\n                    borderRadius: '6px',\n                    border: 'none',\n                    cursor: 'pointer',\n                    fontWeight: 500,\n                    fontSize: '14px',\n                    ...VARIANT_STYLES[variant],\n                  }}\n                >\n                  {confirmText}\n                </button>\n              </ModalFooter>\n            </ModalContent>\n          </ModalContainer>\n        </ModalOverlay>\n      </ModalPortal>\n    </Modal>\n  )\n}\n","/**\n * PromptDialog component\n */\n\nimport React, {\n  useState,\n  useRef,\n  useEffect,\n  type ReactElement,\n  type CSSProperties,\n} from 'react'\nimport { Modal } from './Modal'\nimport { ModalPortal } from './ModalPortal'\nimport { ModalOverlay } from './ModalOverlay'\nimport { ModalContainer } from './ModalContainer'\nimport { ModalContent } from './ModalContent'\nimport { ModalHeader } from './ModalHeader'\nimport { ModalTitle } from './ModalTitle'\nimport { ModalBody } from './ModalBody'\nimport { ModalDescription } from './ModalDescription'\nimport { ModalFooter } from './ModalFooter'\n\n/**\n * PromptDialog props\n */\nexport interface PromptDialogProps {\n  /** Whether the dialog is open */\n  open: boolean\n  /** Callback when open state changes */\n  onOpenChange: (open: boolean) => void\n  /** Dialog title */\n  title?: string\n  /** Dialog description/message */\n  description?: string\n  /** Input placeholder */\n  placeholder?: string\n  /** Default input value */\n  defaultValue?: string\n  /** Confirm button text */\n  confirmText?: string\n  /** Cancel button text */\n  cancelText?: string\n  /** Input type */\n  type?: 'text' | 'password' | 'email' | 'number' | 'tel' | 'url'\n  /** Validation function */\n  validate?: (value: string) => boolean | string\n  /** Whether input is required */\n  required?: boolean\n  /** Minimum input length */\n  minLength?: number\n  /** Maximum input length */\n  maxLength?: number\n  /** Called when confirm is clicked with the input value */\n  onConfirm: (value: string) => void\n  /** Called when cancel is clicked */\n  onCancel?: () => void\n  /** Additional class name for content */\n  className?: string\n  /** Additional styles for content */\n  style?: CSSProperties\n}\n\n/**\n * Pre-built prompt dialog component\n */\nexport function PromptDialog({\n  open,\n  onOpenChange,\n  title,\n  description,\n  placeholder,\n  defaultValue = '',\n  confirmText = 'OK',\n  cancelText = 'Cancel',\n  type = 'text',\n  validate,\n  required = false,\n  minLength = 0,\n  maxLength,\n  onConfirm,\n  onCancel,\n  className,\n  style,\n}: PromptDialogProps): ReactElement {\n  const [value, setValue] = useState(defaultValue)\n  const [error, setError] = useState<string | null>(null)\n  const inputRef = useRef<HTMLInputElement>(null)\n\n  // Reset value when dialog opens\n  useEffect(() => {\n    if (open) {\n      setValue(defaultValue)\n      setError(null)\n    }\n  }, [open, defaultValue])\n\n  // Focus input when dialog opens\n  useEffect(() => {\n    if (open && inputRef.current) {\n      inputRef.current.focus()\n      if (defaultValue) {\n        inputRef.current.select()\n      }\n    }\n  }, [open, defaultValue])\n\n  const validateInput = (): boolean => {\n    // Required check\n    if (required && !value.trim()) {\n      setError('This field is required')\n      return false\n    }\n\n    // Min length check\n    if (minLength > 0 && value.length < minLength) {\n      setError(`Minimum ${minLength} characters required`)\n      return false\n    }\n\n    // Max length check\n    if (maxLength && value.length > maxLength) {\n      setError(`Maximum ${maxLength} characters allowed`)\n      return false\n    }\n\n    // Custom validation\n    if (validate) {\n      const result = validate(value)\n      if (result !== true) {\n        setError(typeof result === 'string' ? result : 'Invalid input')\n        return false\n      }\n    }\n\n    return true\n  }\n\n  const handleConfirm = () => {\n    if (validateInput()) {\n      onConfirm(value)\n      onOpenChange(false)\n    }\n  }\n\n  const handleCancel = () => {\n    onCancel?.()\n    onOpenChange(false)\n  }\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      e.preventDefault()\n      handleConfirm()\n    }\n  }\n\n  return (\n    <Modal\n      open={open}\n      onOpenChange={onOpenChange}\n      closeOnOverlayClick={false}\n      closeOnEscape={true}\n      role=\"alertdialog\"\n    >\n      <ModalPortal>\n        <ModalOverlay>\n          <ModalContainer>\n            <ModalContent size=\"sm\" className={className} style={style}>\n              {title && (\n                <ModalHeader style={{ borderBottom: 'none', paddingBottom: 0 }}>\n                  <ModalTitle>{title}</ModalTitle>\n                </ModalHeader>\n              )}\n              <ModalBody style={{ paddingTop: title ? '8px' : undefined }}>\n                {description && (\n                  <ModalDescription style={{ marginBottom: '16px' }}>\n                    {description}\n                  </ModalDescription>\n                )}\n                <div>\n                  <input\n                    ref={inputRef}\n                    type={type}\n                    value={value}\n                    onChange={(e) => {\n                      setValue(e.target.value)\n                      setError(null)\n                    }}\n                    onKeyDown={handleKeyDown}\n                    placeholder={placeholder}\n                    required={required}\n                    minLength={minLength}\n                    maxLength={maxLength}\n                    style={{\n                      width: '100%',\n                      padding: '8px 12px',\n                      border: `1px solid ${error ? '#ef4444' : '#d1d5db'}`,\n                      borderRadius: '6px',\n                      fontSize: '14px',\n                      outline: 'none',\n                      boxSizing: 'border-box',\n                    }}\n                  />\n                  {error && (\n                    <p\n                      style={{\n                        color: '#ef4444',\n                        fontSize: '12px',\n                        marginTop: '4px',\n                        marginBottom: 0,\n                      }}\n                    >\n                      {error}\n                    </p>\n                  )}\n                </div>\n              </ModalBody>\n              <ModalFooter style={{ borderTop: 'none' }}>\n                <button\n                  type=\"button\"\n                  onClick={handleCancel}\n                  style={{\n                    padding: '8px 16px',\n                    borderRadius: '6px',\n                    border: 'none',\n                    cursor: 'pointer',\n                    fontWeight: 500,\n                    fontSize: '14px',\n                    backgroundColor: '#e5e7eb',\n                    color: '#374151',\n                  }}\n                >\n                  {cancelText}\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleConfirm}\n                  style={{\n                    padding: '8px 16px',\n                    borderRadius: '6px',\n                    border: 'none',\n                    cursor: 'pointer',\n                    fontWeight: 500,\n                    fontSize: '14px',\n                    backgroundColor: '#3b82f6',\n                    color: 'white',\n                  }}\n                >\n                  {confirmText}\n                </button>\n              </ModalFooter>\n            </ModalContent>\n          </ModalContainer>\n        </ModalOverlay>\n      </ModalPortal>\n    </Modal>\n  )\n}\n","/**\n * Imperative modals API for React\n *\n * Note: This requires the ModalProvider to be mounted in the app.\n * For standalone usage without React context, use the core\n * confirm(), alert(), prompt() functions from '@oxog/modalkit'.\n */\n\nimport { confirm as coreConfirm } from '../../../dialogs/confirm'\nimport { alert as coreAlert } from '../../../dialogs/alert'\nimport { prompt as corePrompt } from '../../../dialogs/prompt'\nimport type {\n  ConfirmOptions,\n  ConfirmOptionsAdvanced,\n  AlertOptions,\n  PromptOptions,\n} from '../../../types'\n\n/**\n * Show a confirm dialog\n */\nfunction confirm(message: string): Promise<boolean>\nfunction confirm(options: ConfirmOptions): Promise<boolean>\nfunction confirm(options: ConfirmOptionsAdvanced): Promise<string | boolean>\nfunction confirm(\n  messageOrOptions: string | ConfirmOptions | ConfirmOptionsAdvanced\n): Promise<boolean | string> {\n  if (typeof messageOrOptions === 'string') {\n    return coreConfirm(messageOrOptions)\n  }\n  if ('buttons' in messageOrOptions && messageOrOptions.buttons) {\n    return coreConfirm(messageOrOptions as ConfirmOptionsAdvanced)\n  }\n  return coreConfirm(messageOrOptions as ConfirmOptions)\n}\n\n/**\n * Show an alert dialog\n */\nfunction alert(message: string): Promise<void>\nfunction alert(options: AlertOptions): Promise<void>\nfunction alert(messageOrOptions: string | AlertOptions): Promise<void> {\n  if (typeof messageOrOptions === 'string') {\n    return coreAlert(messageOrOptions)\n  }\n  return coreAlert(messageOrOptions)\n}\n\n/**\n * Show a prompt dialog\n */\nfunction prompt(message: string): Promise<string | null>\nfunction prompt(options: PromptOptions): Promise<string | null>\nfunction prompt(messageOrOptions: string | PromptOptions): Promise<string | null> {\n  if (typeof messageOrOptions === 'string') {\n    return corePrompt(messageOrOptions)\n  }\n  return corePrompt(messageOrOptions)\n}\n\n/**\n * Imperative modals API\n *\n * These functions use the core implementation and work without React context.\n * They render dialogs directly to the DOM.\n */\nexport const modals = {\n  confirm,\n  alert,\n  prompt,\n}\n"]}