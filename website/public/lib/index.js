var D={defaultOpen:false,closeOnOverlayClick:true,closeOnEscape:true,preventScroll:true,scrollBehavior:"inside",trapFocus:true,autoFocus:true,restoreFocus:true,stackable:true,closeOnStackedOpen:false,animated:false,animationDuration:200,disablePortal:false,role:"dialog"};function le(e){return e?{...D,...e}:{...D}}function se(){let e=new Map;function t(n,i){return e.has(n)||e.set(n,new Set),e.get(n).add(i),()=>c(n,i)}function c(n,i){let r=e.get(n);r&&(r.delete(i),r.size===0&&e.delete(n));}function o(n,...i){let r=e.get(n);r&&r.forEach(a=>{try{a(...i);}catch(v){console.error(`Error in event handler for "${String(n)}":`,v);}});}function p(){e.clear();}return {on:t,off:c,emit:o,clear:p}}function ce(){let e=new Set;function t(p){return e.add(p),()=>{e.delete(p);}}function c(p){e.forEach(n=>{try{n(p);}catch(i){console.error("Error in subscriber:",i);}});}function o(){e.clear();}return {subscribe:t,notify:c,clear:o}}function de(e=false){return {open:e,animationState:e?"entered":"idle",stackOrder:0,isTopMost:false,mounted:e}}function ue(e){let t={...e},{subscribe:c,notify:o}=ce();function p(){return {...t}}function n(i){let r=t;t={...t,...i},Ve(r,t)&&o(t);}return {getState:p,setState:n,subscribe:c}}function Ve(e,t){return e.open!==t.open||e.animationState!==t.animationState||e.stackOrder!==t.stackOrder||e.isTopMost!==t.isTopMost||e.mounted!==t.mounted}function fe(e,t){return e||t==="exiting"||t==="exited"}var ze=1e3,je=10;function oe(e){return ze+(e-1)*je}function Ue(){let e=[],t=se();function c(){e.forEach((d,u)=>{let P=u+1,h=u===e.length-1;d._setStackOrder(P),d._setIsTopMost(h);});}function o(d){e.indexOf(d)===-1&&(e.push(d),c(),t.emit("push",d),t.emit("change",[...e]));}function p(d){let u=e.indexOf(d);u!==-1&&(e.splice(u,1),c(),t.emit("pop",d),t.emit("change",[...e]));}function n(){return e.length}function i(){return e.length===0}function r(){return [...e]}function a(){return e[e.length-1]??null}function v(d){return e[d-1]??null}function y(){[...e].reverse().forEach(u=>u.close());}function m(){let d=a();d&&d.close();}function g(d,u){return t.on(d,u)}function x(d,u){t.off(d,u);}return {count:n,isEmpty:i,getAll:r,getTopMost:a,getByOrder:v,closeAll:y,closeTopMost:m,on:g,off:x,push:o,remove:p}}var ne=Ue(),U={push:ne.push,remove:ne.remove};var pe=["a[href]","area[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])','[contenteditable="true"]',"audio[controls]","video[controls]","details > summary:first-of-type"].join(",");function Xe(e){if(e.offsetWidth===0&&e.offsetHeight===0&&e.getClientRects().length===0)return  false;let t=getComputedStyle(e);return !(t.visibility==="hidden"||t.display==="none")}function Ye(e){return !(!(e instanceof HTMLElement)||!e.matches(pe)||!Xe(e))}function Y(e){let t=e.querySelectorAll(pe);return Array.from(t).filter(Ye)}function $(e){return Y(e)[0]??null}function me(e){let t=Y(e);return t[t.length-1]??null}function Z(e=document){let t=e.activeElement;for(;t?.shadowRoot?.activeElement;)t=t.shadowRoot.activeElement;return t}function A(e,t){if(!e)return  false;try{return e.focus(t),Z()===e}catch{return  false}}var X=null;function G(){let e=Z();X={element:e instanceof HTMLElement?e:null,scrollX:window.scrollX,scrollY:window.scrollY};}function J(e=true){if(!X)return;let{element:t,scrollX:c,scrollY:o}=X;t&&document.body.contains(t)&&(A(t,{preventScroll:e}),e&&window.scrollTo(c,o)),X=null;}function re(e){let{container:t,initialFocus:c,fallbackFocus:o,returnFocus:p,escapeDeactivates:n=true,clickOutsideDeactivates:i=false,allowOutsideClick:r=false,onActivate:a,onDeactivate:v}=e,y=false,m=false;function g(f){return f?typeof f=="function"?f():f:null}function x(f){if(!y||m||f.key!=="Tab")return;let E=Y(t);if(E.length===0)return;let S=E[0],k=E[E.length-1],O=Z();f.shiftKey?(O===S||!t.contains(O))&&(f.preventDefault(),A(k)):(O===k||!t.contains(O))&&(f.preventDefault(),A(S));}function d(f){!y||m||f.key==="Escape"&&n&&(f.preventDefault(),M());}function u(f){if(!y||m)return;let E=f.target;t.contains(E)||((typeof r=="function"?r(f):r)||(f.preventDefault(),f.stopPropagation()),i&&M());}function P(f){if(!y||m)return;let E=f.target;if(!t.contains(E)){f.preventDefault();let S=$(t);S?A(S):t.focus();}}function h(){if(y)return;G(),y=true,m=false,document.addEventListener("keydown",x,true),document.addEventListener("keydown",d,true),document.addEventListener("click",u,true),document.addEventListener("focusin",P,true);let f=g(c),E=g(o),S=$(t),k=f??E??S??t;t.hasAttribute("tabindex")||t.setAttribute("tabindex","-1"),A(k,{preventScroll:true}),a?.();}function M(){if(!y)return;y=false,m=false,document.removeEventListener("keydown",x,true),document.removeEventListener("keydown",d,true),document.removeEventListener("click",u,true),document.removeEventListener("focusin",P,true);let f=g(p);f?A(f,{preventScroll:true}):J(true),v?.();}function s(){y&&(m=true);}function b(){y&&(m=false);}function L(){return y}function W(){return m}return {activate:h,deactivate:M,pause:s,unpause:b,isActive:L,isPaused:W}}function ye(e){return e?typeof e=="string"?document.querySelector(e):e:null}function ge(e){let t=document.createElement("div");return (t.id=e),t.setAttribute("data-modalkit-portal",""),t}function ve(e){e&&e.parentNode&&e.parentNode.removeChild(e);}function be(){let e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",document.body.appendChild(e);let t=document.createElement("div");e.appendChild(t);let c=e.offsetWidth-t.offsetWidth;return ve(e),c}function Ee(e,t){return !e||!t?false:e===t||e.contains(t)}var H=0,V=null;function xe(){return typeof navigator<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)}function Ze(){return {x:window.pageXOffset??document.documentElement.scrollLeft,y:window.pageYOffset??document.documentElement.scrollTop}}var I=null;function Ge(){if(H++,H>1)return;let e=be(),t=window.innerWidth>document.documentElement.clientWidth;if(V={overflow:document.body.style.overflow,paddingRight:document.body.style.paddingRight},document.body.style.overflow="hidden",t&&e>0){let c=parseInt(getComputedStyle(document.body).paddingRight,10)||0;document.body.style.paddingRight=`${c+e}px`;}xe()&&(I=Ze(),document.body.style.position="fixed",document.body.style.top=`-${I.y}px`,document.body.style.left=`-${I.x}px`,document.body.style.width="100%");}function Je(){H!==0&&(H--,!(H>0)&&(V&&(document.body.style.overflow=V.overflow,document.body.style.paddingRight=V.paddingRight,V=null),xe()&&I&&(document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.width="",window.scrollTo(I.x,I.y),I=null)));}function Qe(){return H>0}var Q={lock:Ge,unlock:Je,isLocked:Qe};function Ce(e){let{duration:t,onStateChange:c,onAnimationStart:o,onAnimationEnd:p}=e,n="idle",i=null;function r(){i!==null&&(clearTimeout(i),i=null);}function a(u){n!==u&&(n=u,c?.(n));}function v(){r(),a("entering"),o?.("enter"),i=setTimeout(()=>{a("entered"),p?.("enter"),i=null;},t);}function y(){r(),a("exiting"),o?.("exit"),i=setTimeout(()=>{a("exited"),p?.("exit"),i=setTimeout(()=>{a("idle"),i=null;},0);},t);}function m(u){r(),u==="entered"?a("entered"):(a("exited"),i=setTimeout(()=>{a("idle"),i=null;},0));}function g(){return n}function x(){return n==="entering"||n==="exiting"}function d(){r(),n="idle";}return {startEnter:v,startExit:y,skipTo:m,getState:g,isAnimating:x,destroy:d}}function Te(){let e="idle";return {startEnter(){e="entered";},startExit(){e="idle";},skipTo(t){e=t==="entered"?"entered":"idle";},getState(){return e},isAnimating(){return  false},destroy(){e="idle";}}}function et(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27}function he(e){let{closeOnEscape:t,onEscapeKeyDown:c,onClose:o,isTopMost:p}=e;return function(i){p()&&et(i)&&(c?.(i),t&&!i.defaultPrevented&&(i.preventDefault(),i.stopPropagation(),o()));}}var Me="modalkit-portal-root";function Se(e){if(e){let c=ye(e);if(c)return c}let t=document.getElementById(Me);return t||(t=ge(Me),document.body.appendChild(t)),t}var ke=0;function Oe(e="modalkit"){return ke++,`${e}-${ke}`}function Pe(e){return {modalId:e,titleId:`${e}-title`,descriptionId:`${e}-description`}}function ie(e){let t=le(e),c=t.id??Oe("modal"),o=Pe(c),p=t.open??t.defaultOpen??false,n=ue(de(p)),i=t.animated?Ce({duration:t.animationDuration??D.animationDuration,onStateChange:l=>{n.setState({animationState:l,mounted:fe(n.getState().open,l)});},onAnimationStart:t.onAnimationStart,onAnimationEnd:t.onAnimationEnd}):Te(),r=null,a=null,v=null,y=null,m=he({closeOnEscape:t.closeOnEscape??D.closeOnEscape,onEscapeKeyDown:t.onEscapeKeyDown,onClose:()=>E(),isTopMost:()=>n.getState().isTopMost});function g(l){return l?typeof l=="function"?l():l:null}function x(){!a||r||t.trapFocus&&(r=re({container:a,initialFocus:g(t.initialFocusRef),returnFocus:g(t.finalFocusRef),escapeDeactivates:false,clickOutsideDeactivates:false}));}function d(){r&&(r.deactivate(),r=null);}function u(){!r&&t.trapFocus&&a&&x(),r&&!r.isActive()&&r.activate();}function P(){n.getState().open||(t.restoreFocus&&G(),n.setState({open:true,mounted:true}),t.animated?i.startEnter():n.setState({animationState:"entered"}),U.push(j),t.preventScroll&&Q.lock(),t.onOpen?.(),t.onOpenChange?.(true));}function h(){if(n.getState().open){if(n.setState({open:false}),t.animated?i.startExit():n.setState({animationState:"idle",mounted:false}),U.remove(j),d(),t.preventScroll&&Q.unlock(),t.restoreFocus){let T=g(t.finalFocusRef);T?A(T):J();}t.onClose?.(),t.onOpenChange?.(false);}}function M(l){let T=l.target;(T===v||T===y)&&(t.onOverlayClick?.(l),t.closeOnOverlayClick&&!l.defaultPrevented&&E());}function s(){return n.getState().open}function b(){return n.getState().mounted}function L(){return n.getState()}function W(l){return n.subscribe(l)}function f(){P();}function E(){h();}function S(){s()?E():f();}function k(){return n.getState().stackOrder}function O(){return n.getState().isTopMost}function ee(){return i.isAnimating()}function C(){return n.getState().animationState}function ae(){if(!a)return;let l=$(a);l&&A(l);}function Le(){if(!a)return;let l=me(a);l&&A(l);}function we(l){return Ee(a,l)}function Fe(){return Se(t.portalTarget)}function De(){return {"data-modalkit-portal":"","data-state":C()}}function Ie(){let l=L(),T=oe(l.stackOrder);return {ref:F=>{v=F;},"data-modalkit-overlay":"","data-state":l.animationState,style:{position:"fixed",inset:"0",zIndex:T},onClick:M}}function Ke(){let l=L(),T=oe(l.stackOrder)+1,F=t.scrollBehavior??D.scrollBehavior;return {ref:te=>{y=te;},"data-modalkit-container":"","data-state":l.animationState,style:{position:"fixed",inset:"0",display:"flex",alignItems:"center",justifyContent:"center",zIndex:T,overflow:F==="inside"?"auto":"hidden"},onClick:M}}function He(){let l=L(),T={ref:F=>{let te=a===null;a=F,F&&te&&l.open&&(x(),t.autoFocus&&requestAnimationFrame(()=>{u();}));},role:t.role??D.role,"aria-modal":true,"data-modalkit-content":"","data-state":l.animationState,tabIndex:-1,onKeyDown:m};return t.ariaLabel?T["aria-label"]=t.ariaLabel:t.ariaLabelledBy?T["aria-labelledby"]=t.ariaLabelledBy:T["aria-labelledby"]=o.titleId,t.ariaDescribedBy?T["aria-describedby"]=t.ariaDescribedBy:T["aria-describedby"]=o.descriptionId,T}function Be(l){return {id:l??o.titleId,"data-modalkit-title":""}}function Re(l){return {id:l??o.descriptionId,"data-modalkit-description":""}}function Ne(){return {type:"button","aria-label":"Close","data-modalkit-close":"",onClick:()=>E()}}function _e(){return {type:"button","aria-haspopup":"dialog","aria-expanded":s(),"data-modalkit-trigger":"",onClick:()=>f()}}function qe(){return {...t}}function We(l){Object.assign(t,l);}function $e(){s()&&E(),d(),i.destroy(),a=null,v=null,y=null;}let j={isOpen:s,isMounted:b,getState:L,subscribe:W,open:f,close:E,toggle:S,getStackOrder:k,isTopMost:O,isAnimating:ee,getAnimationState:C,focusFirst:ae,focusLast:Le,contains:we,getPortalTarget:Fe,getPortalProps:De,getOverlayProps:Ie,getContainerProps:Ke,getContentProps:He,getTitleProps:Be,getDescriptionProps:Re,getCloseButtonProps:Ne,getTriggerProps:_e,getConfig:qe,setConfig:We,destroy:$e,_id:c,_getTitleId:()=>o.titleId,_getDescriptionId:()=>o.descriptionId,_setStackOrder:l=>n.setState({stackOrder:l}),_setIsTopMost:l=>n.setState({isTopMost:l}),_getContentElement:()=>a,_handleOverlayClick:M,_handleKeyDown:m};return p&&U.push(j),j}function B(e){let t=document.createElement("div"),c=e.getPortalProps();t.setAttribute("data-modalkit-portal",c["data-modalkit-portal"]),t.setAttribute("data-state",c["data-state"]);let o=document.createElement("div"),p=e.getOverlayProps();o.setAttribute("data-modalkit-overlay",""),o.setAttribute("data-state",p["data-state"]),Object.assign(o.style,p.style),o.style.backgroundColor="rgba(0, 0, 0, 0.5)",p.ref(o);let n=document.createElement("div"),i=e.getContainerProps();n.setAttribute("data-modalkit-container",""),n.setAttribute("data-state",i["data-state"]),Object.assign(n.style,i.style),i.ref(n);let r=document.createElement("div"),a=e.getContentProps();return r.setAttribute("role",a.role),r.setAttribute("aria-modal","true"),a["aria-labelledby"]&&r.setAttribute("aria-labelledby",a["aria-labelledby"]),a["aria-describedby"]&&r.setAttribute("aria-describedby",a["aria-describedby"]),r.setAttribute("data-modalkit-content",""),r.setAttribute("data-state",a["data-state"]),r.setAttribute("tabindex","-1"),r.style.backgroundColor="white",r.style.borderRadius="8px",r.style.padding="24px",r.style.maxWidth="400px",r.style.width="100%",r.style.boxShadow="0 25px 50px -12px rgba(0, 0, 0, 0.25)",a.ref(r),r.addEventListener("keydown",v=>{a.onKeyDown(v);}),n.appendChild(r),o.appendChild(n),t.appendChild(o),{portal:t,overlay:o,container:n,content:r}}function R(e){return ie({closeOnOverlayClick:false,closeOnEscape:true,trapFocus:true,preventScroll:true,role:"alertdialog",animated:false,...e})}function K(e,t="default"){switch(e.style.padding="8px 16px",e.style.borderRadius="6px",e.style.border="none",e.style.cursor="pointer",e.style.fontWeight="500",e.style.fontSize="14px",e.style.transition="background-color 0.2s",t){case "primary":e.style.backgroundColor="#3b82f6",e.style.color="white";break;case "danger":case "error":e.style.backgroundColor="#ef4444",e.style.color="white";break;case "warning":e.style.backgroundColor="#f59e0b",e.style.color="white";break;case "success":e.style.backgroundColor="#10b981",e.style.color="white";break;case "info":e.style.backgroundColor="#3b82f6",e.style.color="white";break;default:e.style.backgroundColor="#e5e7eb",e.style.color="#374151";}}function N(e,t){let c=t.getTitleProps(),o=document.createElement("h2");return o.id=c.id,o.setAttribute("data-modalkit-title",""),o.textContent=e,o.style.margin="0 0 8px 0",o.style.fontSize="18px",o.style.fontWeight="600",o.style.color="#111827",o}function _(e,t){let c=t.getDescriptionProps(),o=document.createElement("p");return o.id=c.id,o.setAttribute("data-modalkit-description",""),o.textContent=e,o.style.margin="0 0 24px 0",o.style.fontSize="14px",o.style.color="#6b7280",o.style.lineHeight="1.5",o}function q(){let e=document.createElement("div");return e.style.display="flex",e.style.justifyContent="flex-end",e.style.gap="8px",e}var z={confirmText:"Confirm",cancelText:"Cancel",variant:"default",closeOnOverlayClick:false,closeOnEscape:true};function tt(e){return new Promise(t=>{let c=typeof e=="string"?{message:e}:e,{title:o,message:p,confirmText:n=z.confirmText,cancelText:i=z.cancelText,variant:r=z.variant,closeOnOverlayClick:a=z.closeOnOverlayClick,closeOnEscape:v=z.closeOnEscape,buttons:y}=c,m=false,g=R({closeOnOverlayClick:a,closeOnEscape:v,onClose:()=>{m||(m=true,t(false)),M();}}),{portal:x,content:d}=B(g);o&&d.appendChild(N(o,g)),d.appendChild(_(p,g));let u=q(),P=y??[{text:i,value:false,variant:"default"},{text:n,value:true,variant:r==="default"?"primary":r,autoFocus:true}],h=null;P.forEach(s=>{let b=document.createElement("button");b.textContent=s.text,b.type="button",K(b,s.variant),b.addEventListener("click",()=>{m=true,g.close(),t(s.value);}),s.autoFocus&&(h=b),u.appendChild(b);}),d.appendChild(u);function M(){g.destroy(),x.remove();}document.body.appendChild(x),g.open(),h&&requestAnimationFrame(()=>{h?.focus();});})}var Ae={confirmText:"OK",variant:"default"};function nt(e){switch(e){case "success":return "success";case "warning":return "warning";case "error":return "danger";case "info":return "info";default:return "primary"}}function ot(e){return new Promise(t=>{let c=typeof e=="string"?{message:e}:e,{title:o,message:p,confirmText:n=Ae.confirmText,variant:i=Ae.variant}=c,r=R({closeOnOverlayClick:false,closeOnEscape:true,onClose:()=>{t(),g();}}),{portal:a,content:v}=B(r);o&&v.appendChild(N(o,r)),v.appendChild(_(p,r));let y=q(),m=document.createElement("button");m.textContent=n,m.type="button",K(m,nt(i)),m.addEventListener("click",()=>{r.close();}),y.appendChild(m),v.appendChild(y);function g(){r.destroy(),a.remove();}document.body.appendChild(a),r.open(),requestAnimationFrame(()=>{m.focus();});})}var w={placeholder:"",defaultValue:"",confirmText:"OK",cancelText:"Cancel",type:"text",required:false,minLength:0,maxLength:1/0};function rt(e){return new Promise(t=>{let c=typeof e=="string"?{message:e}:e,{title:o,message:p,placeholder:n=w.placeholder,defaultValue:i=w.defaultValue,confirmText:r=w.confirmText,cancelText:a=w.cancelText,type:v=w.type,validate:y,required:m=w.required,minLength:g=w.minLength,maxLength:x=w.maxLength}=c,d=false,u=R({closeOnOverlayClick:false,closeOnEscape:true,onClose:()=>{d||(d=true,t(null)),ee();}}),{portal:P,content:h}=B(u);o&&h.appendChild(N(o,u)),p&&h.appendChild(_(p,u));let M=document.createElement("div");M.style.marginBottom="16px";let s=document.createElement("input");s.type=v,s.value=i,n&&(s.placeholder=n),m&&(s.required=true),g>0&&(s.minLength=g),x<1/0&&(s.maxLength=x),s.style.width="100%",s.style.padding="8px 12px",s.style.border="1px solid #d1d5db",s.style.borderRadius="6px",s.style.fontSize="14px",s.style.outline="none",s.style.boxSizing="border-box",s.addEventListener("focus",()=>{s.style.borderColor="#3b82f6",s.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)";}),s.addEventListener("blur",()=>{s.style.borderColor="#d1d5db",s.style.boxShadow="none";});let b=document.createElement("p");b.style.color="#ef4444",b.style.fontSize="12px",b.style.marginTop="4px",b.style.marginBottom="0",b.style.display="none",M.appendChild(s),M.appendChild(b),h.appendChild(M);function L(){let C=s.value;return m&&!C.trim()?"This field is required":g>0&&C.length<g?`Minimum ${g} characters required`:x<1/0&&C.length>x?`Maximum ${x} characters allowed`:y?y(C):true}function W(C){b.textContent=C,b.style.display="block",s.style.borderColor="#ef4444";}function f(){b.style.display="none",s.style.borderColor="#d1d5db";}function E(){f();let C=L();if(C!==true){W(typeof C=="string"?C:"Invalid input"),s.focus();return}d=true,u.close(),t(s.value);}s.addEventListener("keydown",C=>{C.key==="Enter"&&(C.preventDefault(),E());}),s.addEventListener("input",f);let S=q(),k=document.createElement("button");k.textContent=a,k.type="button",K(k,"default"),k.addEventListener("click",()=>{d=true,u.close(),t(null);});let O=document.createElement("button");O.textContent=r,O.type="button",K(O,"primary"),O.addEventListener("click",E),S.appendChild(k),S.appendChild(O),h.appendChild(S);function ee(){u.destroy(),P.remove();}document.body.appendChild(P),u.open(),requestAnimationFrame(()=>{s.focus(),i&&s.select();});})}export{ot as alert,tt as confirm,re as createFocusTrap,ie as createModal,ne as modalStack,rt as prompt,Q as scrollLock};//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map